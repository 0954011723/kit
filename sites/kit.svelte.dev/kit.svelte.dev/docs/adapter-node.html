<!DOCTYPE html>
<html lang="en" class="no-js">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />
		<meta name="theme-color" content="#ff3e00" />
		<meta name="color-scheme" content="dark light" />

		<link rel="manifest" href="/manifest.json" />
		<link rel="icon" type="image/png" href="/favicon.png" />

		<meta name="twitter:card" content="summary" />
		<meta name="twitter:site" content="@sveltejs" />
		<meta name="twitter:creator" content="@sveltejs" />
		<meta name="twitter:image" content="/images/twitter-thumbnail.jpg" />
		<meta name="og:image" content="/images/twitter-thumbnail.jpg" />

		<!-- add inline style and blocking script to prevent content flash/jump -->
		<style>
			.ts-version {
				display: none;
			}
			.prefers-ts .js-version {
				display: none;
			}
			.prefers-ts .ts-version {
				display: block;
			}
			.no-js .ts-toggle {
				display: none;
			}
		</style>
		<script>
			document.getElementsByTagName('html')[0].classList.remove('no-js');
			localStorage.getItem('prefers-ts') === 'true' &&
				document.documentElement.classList.add('prefers-ts');
		</script>

		<meta http-equiv="content-security-policy" content="">
		<link href="../_app/immutable/assets/_layout.4a4977ec.css" rel="stylesheet">
		<link href="../_app/immutable/assets/navigation.24972d74.css" rel="stylesheet">
		<link href="../_app/immutable/assets/SearchResults.fb8f4adf.css" rel="stylesheet">
		<link href="../_app/immutable/assets/_layout.8f434bed.css" rel="stylesheet">
		<link href="../_app/immutable/assets/_page.b054ce5e.css" rel="stylesheet">
		<link href="../_app/immutable/assets/hovers.7cc24a08.css" rel="stylesheet">
		<link rel="preload" as="font" type="font/woff2" href="../_app/immutable/assets/overpass-latin-300.3782c01a.woff2" crossorigin>
		<link rel="preload" as="font" type="font/woff2" href="../_app/immutable/assets/overpass-latin-600.0ca25556.woff2" crossorigin>
		<link rel="preload" as="font" type="font/woff2" href="../_app/immutable/assets/fira-mono-latin-400.8d4e0c52.woff2" crossorigin>
		<link rel="modulepreload" href="../_app/immutable/entry/start.bc2154d3.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/index.1cc2e0ff.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/singletons.3ca5ba59.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/paths.8c4e863e.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/control.e7f5239e.js">
		<link rel="modulepreload" href="../_app/immutable/entry/app.6b34a82d.js">
		<link rel="modulepreload" href="../_app/immutable/entry/_layout.svelte.c9a87e1c.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/stores.c28f0607.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/navigation.ad4a0c68.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/SearchResults.ee33e9c4.js">
		<link rel="modulepreload" href="../_app/immutable/entry/_layout.js.984db11e.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/_layout.da46b06b.js">
		<link rel="modulepreload" href="../_app/immutable/entry/docs-layout.svelte.7d27cb05.js">
		<link rel="modulepreload" href="../_app/immutable/entry/docs-_slug_-page.svelte.42d084fc.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/hovers.010bb342.js"><title>Node servers • Docs • SvelteKit</title><!-- HEAD_svelte-18gm73m_START --><meta name="twitter:title" content="SvelteKit docs"><meta name="twitter:description" content="Node servers • SvelteKit documentation"><meta name="Description" content="Node servers • SvelteKit documentation"><!-- HEAD_svelte-18gm73m_END -->
	</head>
	<body>
		<div>


<div style="display: none">
	<svg><symbol id="arrow-left" class="icon" viewBox="0 0 24 24"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></symbol><symbol id="arrow-right" class="icon" viewBox="0 0 24 24"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></symbol><symbol id="arrow-up" class="icon" viewBox="0 0 24 24"><line x1="12" y1="19" x2="12" y2="5"></line><polyline points="5 12 12 5 19 12"></polyline></symbol><symbol id="arrow-down" class="icon" viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"></line><polyline points="19 12 12 19 5 12"></polyline></symbol><symbol id="check" class="icon" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"></polyline></symbol><symbol id="close" class="icon" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></symbol><symbol id="download" class="icon" viewBox="0 0 24 24"><path d="M21 15V19A2 2 0 0 1 19 21H5A2 2 0 0 1 3 19V15"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></symbol><symbol id="edit" class="icon" viewBox="0 0 24 24"><path d="M20 14.66V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5.34"></path><polygon points="18 2 22 6 12 16 8 16 8 12 18 2"></polygon></symbol><symbol id="github" class="icon" viewBox="0 0 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.47715 2 2 6.47715 2 12C2 17.5229 6.47715 22 12 22C17.5229 22 22 17.5229 22 12C22 6.47715 17.5229 2 12 2ZM0 12C0 5.3726 5.3726 0 12 0C18.6274 0 24 5.3726 24 12C24 18.6274 18.6274 24 12 24C5.3726 24 0 18.6274 0 12Z" fill="currentColor" stroke="none"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M9.59162 22.7357C9.49492 22.6109 9.49492 21.4986 9.59162 19.399C8.55572 19.4347 7.90122 19.3628 7.62812 19.1833C7.21852 18.9139 6.80842 18.0833 6.44457 17.4979C6.08072 16.9125 5.27312 16.8199 4.94702 16.6891C4.62091 16.5582 4.53905 16.0247 5.84562 16.4282C7.15222 16.8316 7.21592 17.9303 7.62812 18.1872C8.04032 18.4441 9.02572 18.3317 9.47242 18.1259C9.91907 17.9201 9.88622 17.1538 9.96587 16.8503C10.0666 16.5669 9.71162 16.5041 9.70382 16.5018C9.26777 16.5018 6.97697 16.0036 6.34772 13.7852C5.71852 11.5669 6.52907 10.117 6.96147 9.49369C7.24972 9.07814 7.22422 8.19254 6.88497 6.83679C8.11677 6.67939 9.06732 7.06709 9.73672 7.99999C9.73737 8.00534 10.6143 7.47854 12.0001 7.47854C13.386 7.47854 13.8777 7.90764 14.2571 7.99999C14.6365 8.09234 14.94 6.36699 17.2834 6.83679C16.7942 7.79839 16.3844 8.99999 16.6972 9.49369C17.0099 9.98739 18.2372 11.5573 17.4833 13.7852C16.9807 15.2706 15.9927 16.1761 14.5192 16.5018C14.3502 16.5557 14.2658 16.6427 14.2658 16.7627C14.2658 16.9427 14.4942 16.9624 14.8233 17.8058C15.0426 18.368 15.0585 19.9739 14.8708 22.6234C14.3953 22.7445 14.0254 22.8257 13.7611 22.8673C13.2924 22.9409 12.7835 22.9822 12.2834 22.9982C11.7834 23.0141 11.6098 23.0123 10.9185 22.948C10.4577 22.9051 10.0154 22.8343 9.59162 22.7357Z" fill="currentColor" stroke="none"></path></symbol><symbol id="git-branch" class="icon" viewBox="0 0 24 24"><line x1="6" y1="3" x2="6" y2="15"></line><circle cx="18" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><path d="M18 9a9 9 0 0 1-9 9"></path></symbol><symbol id="log-in" class="icon" viewBox="0 0 24 24"><path d="M15 3H19A2 2 0 0 1 21 5V19A2 2 0 0 1 19 21H15"></path><polyline points="10 17 15 12 10 7"></polyline><line x1="15" y1="12" x2="3" y2="12"></line></symbol><symbol id="maximize" class="icon" viewBox="0 0 24 24"><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path></symbol><symbol id="maximize-2" class="icon" viewBox="0 0 24 24"><polyline points="15 3 21 3 21 9"></polyline><polyline points="9 21 3 21 3 15"></polyline><line x1="21" y1="3" x2="14" y2="10"></line><line x1="3" y1="21" x2="10" y2="14"></line></symbol><symbol id="menu" class="icon" viewBox="0 0 24 24"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></symbol><symbol id="message-square" class="icon" viewBox="0 0 24 24"><g transform="translate(0, 1)"><path d="M16.5 19H11V15H18V11H22V19H19.5L18 20.5L16.5 19Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2 3H18V15H8.5L6.5 17L4.5 15H2V3Z" fill="currentColor" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M6 11H9" stroke="white" stroke-width="1.5" stroke-linecap="round"></path><path d="M6 7H12" stroke="white" stroke-width="1.5" stroke-linecap="round"></path></g></symbol><symbol id="minus" class="icon" viewBox="0 0 24 24"><line x1="5" y1="12" x2="19" y2="12"></line></symbol><symbol id="plus" class="icon" viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></symbol><symbol id="save" class="icon" viewBox="0 0 24 24"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></symbol><symbol id="link" class="icon" viewBox="0 0 24 24"><path d="M9,7L6,7A2 2 0 0 0 6,17L9,17"></path><path d="M15,7L18,7A2 2 0 0 1 18,17L15,17"></path><path d="M7,12L17,12"></path></symbol><symbol id="chevron" class="icon" viewBox="0 0 24 24"><path d="M2,7 L12,17 L20,7"></path></symbol><symbol id="delete" class="icon" viewBox="0 0 24 24"><path fill="currentColor" stroke="none" d="M22 4.2h-5.6L15 1.6c-.1-.2-.4-.4-.7-.4H9.6c-.2 0-.5.2-.6.4L7.6 4.2H2c-.4 0-.8.4-.8.8s.4.8.8.8h1.8V22c0 .4.3.8.8.8h15c.4 0 .8-.3.8-.8V5.8H22c.4 0 .8-.3.8-.8s-.4-.8-.8-.8zM10.8 16.5c0 .4-.3.8-.8.8s-.8-.3-.8-.8V10c0-.4.3-.8.8-.8s.8.3.8.8v6.5zm4 0c0 .4-.3.8-.8.8s-.8-.3-.8-.8V10c0-.4.3-.8.8-.8s.8.3.8.8v6.5z"></path></symbol></svg></div>



<a href="#main" class="svelte-1rscj97">Skip to main content</a>





<nav aria-label="Primary" class="svelte-173nfcg visible"><a href="/" class="nav-spot home svelte-173nfcg" title="Homepage" style="background-image: url(/_app/immutable/assets/svelte-logo.5c5d7d20.svg)">Home</a>

	<button aria-label="Toggle menu" aria-expanded="false" class="menu-toggle svelte-173nfcg">


<svg class="icon svelte-5yec89" width="1em" height="1em"><use xlink:href="#menu"></use></svg></button>

	<ul class="svelte-173nfcg">
			<li class="svelte-tdqbhp"><form class="search-container svelte-9kfram" action="/search"><input value="" type="search" name="q" placeholder="Search" aria-label="Search" spellcheck="false" class="svelte-9kfram">

	
</form></li></ul>

	<ul class="external svelte-173nfcg"><li><a aria-current="true" href="/docs" class="svelte-1iex17r">Docs</a></li>
		<li><a href="/faq" class="svelte-1iex17r">FAQ</a></li>

		<li aria-hidden="true" class="svelte-tdqbhp"><span class="separator svelte-tdqbhp"></span></li>

		<li><a href="https://svelte.dev" rel="external" class="svelte-1iex17r">Svelte</a></li>

		<li><a href="https://svelte.dev/chat" title="Discord Chat" rel="external" class="svelte-1iex17r"><span class="small svelte-tdqbhp">Discord</span>
			<span class="large svelte-tdqbhp">


<svg class="icon svelte-5yec89" width="20" height="20"><use xlink:href="#message-square"></use></svg></span></a></li>

		<li><a href="https://github.com/sveltejs/kit" title="GitHub Repo" rel="external" class="svelte-1iex17r"><span class="small svelte-tdqbhp">GitHub</span>
			<span class="large svelte-tdqbhp">


<svg class="icon svelte-5yec89" width="20" height="20"><use xlink:href="#github"></use></svg></span></a></li>
	</ul>
</nav>

<main id="main" class="svelte-tdqbhp" style="--banner-footer-height: 48px;"><div class="container svelte-1rc2dnd"><div class="page svelte-1rc2dnd">

<div class="text content svelte-zelrq3"><h1>Node servers</h1>

	<a class="edit svelte-zelrq3" href="https://github.com/sveltejs/kit/edit/master/documentation/docs/25-build-and-deploy/40-adapter-node.md">


<svg class="icon svelte-5yec89" width="50" height="50"><use xlink:href="#edit"></use></svg> Edit this page on GitHub
	</a>

	<section><!-- HTML_TAG_START --><p>To generate a standalone Node server, use <a href="https://github.com/sveltejs/kit/tree/master/packages/adapter-node"><code>adapter-node</code></a>.</p>
<h2 id="usage">Usage<a href="#usage" class="permalink"><span class="visually-hidden">permalink</span></a></h2><p>Install with <code>npm i -D @sveltejs/adapter-node</code>, then add the adapter to your <code>svelte.config.js</code>:</p>
<div class="code-block"><span class="filename">svelte.config.js</span><pre class="shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> <data-lsp lsp='import adapter' >adapter</data-lsp> </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)"><data-err>&apos;@sveltejs/adapter-node&apos;</data-err></span><span style="color: var(--shiki-color-text)">;</span></div><span class="error"><span>Cannot find module '@sveltejs/adapter-node' or its corresponding type declarations.</span><span class="code">2307</span></span><span class="error-behind">Cannot find module '@sveltejs/adapter-node' or its corresponding type declarations.</span><div class='line'>&nbsp;</div><div class='line'><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">default</span><span style="color: var(--shiki-color-text)"> {</span></div><div class='line'><span style="color: var(--shiki-color-text)">  <data-lsp lsp='(property) kit: {&amp;#10;    adapter: any;&amp;#10;}' >kit</data-lsp></span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> {</span></div><div class='line'><span style="color: var(--shiki-color-text)">    <data-lsp lsp='(property) adapter: any' >adapter</data-lsp></span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)"><data-lsp lsp='import adapter' >adapter</data-lsp></span><span style="color: var(--shiki-color-text)">()</span></div><div class='line'><span style="color: var(--shiki-color-text)">  }</span></div><div class='line'><span style="color: var(--shiki-color-text)">};</span></div></code></div></pre></div><h2 id="deploying">Deploying<a href="#deploying" class="permalink"><span class="visually-hidden">permalink</span></a></h2><p>First, build your app with <code>npm run build</code>. This will create the production server in the output directory specified in the adapter options, defaulting to <code>build</code>.</p>
<p>You will need the output directory, the project&#39;s <code>package.json</code>, and the production dependencies in <code>node_modules</code> to run the application. Production dependencies can be generated by copying the <code>package.json</code> and <code>package-lock.json</code> and then running <code>npm ci --omit dev</code> (you can skip this step if your app doesn&#39;t have any dependencies). You can then start your app with this command:</p>
<pre class='language-bash'><code><span class="token function">node</span> build</code></pre><p>Development dependencies will be bundled into your app using <a href="https://rollupjs.org">Rollup</a>. To control whether a given package is bundled or externalised, place it in <code>devDependencies</code> or <code>dependencies</code> respectively in your <code>package.json</code>.</p>
<h2 id="environment-variables">Environment variables<a href="#environment-variables" class="permalink"><span class="visually-hidden">permalink</span></a></h2><p>In <code>dev</code> and <code>preview</code>, SvelteKit will read environment variables from your <code>.env</code> file (or <code>.env.local</code>, or <code>.env.[mode]</code>, <a href="https://vitejs.dev/guide/env-and-mode.html#env-files">as determined by Vite</a>.)</p>
<p>In production, <code>.env</code> files are <em>not</em> automatically loaded. To do so, install <code>dotenv</code> in your project...</p>
<pre class='language-bash'><code><span class="token function">npm</span> <span class="token function">install</span> dotenv</code></pre><p>...and invoke it before running the built app:</p>
<pre class="language-diff"><code><span class="deleted">node build
</span><span class="inserted">node -r dotenv/config build
</span></code></pre><h3 id="environment-variables-port-and-host"><code>PORT</code> and <code>HOST</code><a href="#environment-variables-port-and-host" class="permalink"><span class="visually-hidden">permalink</span></a></h3><p>By default, the server will accept connections on <code>0.0.0.0</code> using port 3000. These can be customised with the <code>PORT</code> and <code>HOST</code> environment variables:</p>
<pre class='language-'><code>HOST=127.0.0.1 PORT=4000 node build</code></pre><h3 id="environment-variables-origin-protocol-header-and-host-header"><code>ORIGIN</code>, <code>PROTOCOL_HEADER</code> and <code>HOST_HEADER</code><a href="#environment-variables-origin-protocol-header-and-host-header" class="permalink"><span class="visually-hidden">permalink</span></a></h3><p>HTTP doesn&#39;t give SvelteKit a reliable way to know the URL that is currently being requested. The simplest way to tell SvelteKit where the app is being served is to set the <code>ORIGIN</code> environment variable:</p>
<pre class='language-'><code>ORIGIN=https://my.site node build

# or e.g. for local previewing and testing
ORIGIN=http://localhost:3000 node build</code></pre><p>With this, a request for the <code>/stuff</code> pathname will correctly resolve to <code>https://my.site/stuff</code>. Alternatively, you can specify headers that tell SvelteKit about the request protocol and host, from which it can construct the origin URL:</p>
<pre class='language-'><code>PROTOCOL_HEADER=x-forwarded-proto HOST_HEADER=x-forwarded-host node build</code></pre><blockquote>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Forwarded-Proto"><code>x-forwarded-proto</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Forwarded-Host"><code>x-forwarded-host</code></a> are de facto standard headers that forward the original protocol and host if you&#39;re using a reverse proxy (think load balancers and CDNs). You should only set these variables if your server is behind a trusted reverse proxy; otherwise, it&#39;d be possible for clients to spoof these headers.</p>
</blockquote>
<p>If <code>adapter-node</code> can&#39;t correctly determine the URL of your deployment, you may experience this error when using <a href="form-actions">form actions</a>:</p>
<blockquote>
<p>Cross-site POST form submissions are forbidden</p>
</blockquote>
<h3 id="environment-variables-address-header-and-xff-depth"><code>ADDRESS_HEADER</code> and <code>XFF_DEPTH</code><a href="#environment-variables-address-header-and-xff-depth" class="permalink"><span class="visually-hidden">permalink</span></a></h3><p>The <a href="types#public-types-requestevent">RequestEvent</a> object passed to hooks and endpoints includes an <code>event.getClientAddress()</code> function that returns the client&#39;s IP address. By default this is the connecting <code>remoteAddress</code>. If your server is behind one or more proxies (such as a load balancer), this value will contain the innermost proxy&#39;s IP address rather than the client&#39;s, so we need to specify an <code>ADDRESS_HEADER</code> to read the address from:</p>
<pre class='language-'><code>ADDRESS_HEADER=True-Client-IP node build</code></pre><blockquote>
<p>Headers can easily be spoofed. As with <code>PROTOCOL_HEADER</code> and <code>HOST_HEADER</code>, you should <a href="https://adam-p.ca/blog/2022/03/x-forwarded-for/">know what you&#39;re doing</a> before setting these.</p>
</blockquote>
<p>If the <code>ADDRESS_HEADER</code> is <code>X-Forwarded-For</code>, the header value will contain a comma-separated list of IP addresses. The <code>XFF_DEPTH</code> environment variable should specify how many trusted proxies sit in front of your server. E.g. if there are three trusted proxies, proxy 3 will forward the addresses of the original connection and the first two proxies:</p>
<pre class='language-'><code>&lt;client address&gt;, &lt;proxy 1 address&gt;, &lt;proxy 2 address&gt;</code></pre><p>Some guides will tell you to read the left-most address, but this leaves you <a href="https://adam-p.ca/blog/2022/03/x-forwarded-for/">vulnerable to spoofing</a>:</p>
<pre class='language-'><code>&lt;spoofed address&gt;, &lt;client address&gt;, &lt;proxy 1 address&gt;, &lt;proxy 2 address&gt;</code></pre><p>We instead read from the <em>right</em>, accounting for the number of trusted proxies. In this case, we would use <code>XFF_DEPTH=3</code>.</p>
<blockquote>
<p>If you need to read the left-most address instead (and don&#39;t care about spoofing) — for example, to offer a geolocation service, where it&#39;s more important for the IP address to be <em>real</em> than <em>trusted</em>, you can do so by inspecting the <code>x-forwarded-for</code> header within your app.</p>
</blockquote>
<h3 id="environment-variables-body-size-limit"><code>BODY_SIZE_LIMIT</code><a href="#environment-variables-body-size-limit" class="permalink"><span class="visually-hidden">permalink</span></a></h3><p>The maximum request body size to accept in bytes including while streaming. Defaults to 512kb. You can disable this option with a value of 0 and implement a custom check in <a href="hooks#server-hooks-handle"><code>handle</code></a> if you need something more advanced.</p>
<h2 id="options">Options<a href="#options" class="permalink"><span class="visually-hidden">permalink</span></a></h2><p>The adapter can be configured with various options:</p>
<div class="code-block"><span class="filename">svelte.config.js</span><pre class="shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> <data-lsp lsp='import adapter' >adapter</data-lsp> </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)"><data-err>&apos;@sveltejs/adapter-node&apos;</data-err></span><span style="color: var(--shiki-color-text)">;</span></div><span class="error"><span>Cannot find module '@sveltejs/adapter-node' or its corresponding type declarations.</span><span class="code">2307</span></span><span class="error-behind">Cannot find module '@sveltejs/adapter-node' or its corresponding type declarations.</span><div class='line'>&nbsp;</div><div class='line'><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">default</span><span style="color: var(--shiki-color-text)"> {</span></div><div class='line'><span style="color: var(--shiki-color-text)">  <data-lsp lsp='(property) kit: {&amp;#10;    adapter: any;&amp;#10;}' >kit</data-lsp></span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> {</span></div><div class='line'><span style="color: var(--shiki-color-text)">    <data-lsp lsp='(property) adapter: any' >adapter</data-lsp></span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)"><data-lsp lsp='import adapter' >adapter</data-lsp></span><span style="color: var(--shiki-color-text)">({</span></div><div class='line'><span style="color: var(--shiki-color-text)">      </span><span style="color: var(--shiki-token-comment)">// default options are shown</span></div><div class='line'><span style="color: var(--shiki-color-text)">      <data-lsp lsp='(property) out: string' >out</data-lsp></span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&apos;build&apos;</span><span style="color: var(--shiki-token-punctuation)">,</span></div><div class='line'><span style="color: var(--shiki-color-text)">      <data-lsp lsp='(property) precompress: boolean' >precompress</data-lsp></span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">false</span><span style="color: var(--shiki-token-punctuation)">,</span></div><div class='line'><span style="color: var(--shiki-color-text)">      <data-lsp lsp='(property) envPrefix: string' >envPrefix</data-lsp></span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&apos;&apos;</span><span style="color: var(--shiki-token-punctuation)">,</span></div><div class='line'><span style="color: var(--shiki-color-text)">      <data-lsp lsp='(property) polyfill: boolean' >polyfill</data-lsp></span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">true</span></div><div class='line'><span style="color: var(--shiki-color-text)">    })</span></div><div class='line'><span style="color: var(--shiki-color-text)">  }</span></div><div class='line'><span style="color: var(--shiki-color-text)">};</span></div></code></div></pre></div><h3 id="options-out">out<a href="#options-out" class="permalink"><span class="visually-hidden">permalink</span></a></h3><p>The directory to build the server to. It defaults to <code>build</code> — i.e. <code>node build</code> would start the server locally after it has been created.</p>
<h3 id="options-precompress">precompress<a href="#options-precompress" class="permalink"><span class="visually-hidden">permalink</span></a></h3><p>Enables precompressing using gzip and brotli for assets and prerendered pages. It defaults to <code>false</code>.</p>
<h3 id="options-envprefix">envPrefix<a href="#options-envprefix" class="permalink"><span class="visually-hidden">permalink</span></a></h3><p>If you need to change the name of the environment variables used to configure the deployment (for example, to deconflict with environment variables you don&#39;t control), you can specify a prefix:</p>
<pre class="shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: var(--shiki-color-text)">envPrefix</span><span style="color: var(--shiki-token-punctuation)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&apos;MY_CUSTOM_&apos;</span><span style="color: var(--shiki-color-text)">;</span></div></code></div></pre><pre class='language-undefined'><code>MY_CUSTOM_HOST=127.0.0.1 \
MY_CUSTOM_PORT=4000 \
MY_CUSTOM_ORIGIN=https://my.site \
node build</code></pre><h3 id="options-polyfill">polyfill<a href="#options-polyfill" class="permalink"><span class="visually-hidden">permalink</span></a></h3><p>Controls whether your build will load polyfills for missing modules. It defaults to <code>true</code>, and should only be disabled when using Node 18.11 or greater.</p>
<h2 id="custom-server">Custom server<a href="#custom-server" class="permalink"><span class="visually-hidden">permalink</span></a></h2><p>The adapter creates two files in your build directory — <code>index.js</code> and <code>handler.js</code>. Running <code>index.js</code> — e.g. <code>node build</code>, if you use the default build directory — will start a server on the configured port.</p>
<p>Alternatively, you can import the <code>handler.js</code> file, which exports a handler suitable for use with <a href="https://github.com/expressjs/expressjs.com">Express</a>, <a href="https://github.com/senchalabs/connect">Connect</a> or <a href="https://github.com/lukeed/polka">Polka</a> (or even just the built-in <a href="https://nodejs.org/dist/latest/docs/api/http.html#httpcreateserveroptions-requestlistener"><code>http.createServer</code></a>) and set up your own server:</p>
<div class="code-block"><span class="filename">my-server.js</span><pre class="shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> { <data-lsp lsp='import handler' >handler</data-lsp> } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)"><data-err>&apos;./build/handler.js&apos;</data-err></span><span style="color: var(--shiki-color-text)">;</span></div><span class="error"><span>Cannot find module './build/handler.js' or its corresponding type declarations.</span><span class="code">2307</span></span><span class="error-behind">Cannot find module './build/handler.js' or its corresponding type declarations.</span><div class='line'><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> <data-lsp lsp='import express' >express</data-lsp> </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)"><data-err>&apos;express&apos;</data-err></span><span style="color: var(--shiki-color-text)">;</span></div><span class="error"><span>Cannot find module 'express' or its corresponding type declarations.</span><span class="code">2307</span></span><span class="error-behind">Cannot find module 'express' or its corresponding type declarations.</span><div class='line'>&nbsp;</div><div class='line'><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const app: any' >app</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)"><data-lsp lsp='import express' >express</data-lsp></span><span style="color: var(--shiki-color-text)">();</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: var(--shiki-token-comment)">// add a route that lives separately from the SvelteKit app</span></div><div class='line'><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const app: any' >app</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='any' >get</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&apos;/healthcheck&apos;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> (<data-err><data-lsp lsp='(parameter) req: any' >req</data-lsp></data-err></span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> <data-err><data-lsp lsp='(parameter) res: any' >res</data-lsp></data-err>) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></div><span class="error"><span>Parameter 'req' implicitly has an 'any' type.</br>Parameter 'res' implicitly has an 'any' type.</span><span class="code">7006<br/>7006</span></span><span class="error-behind">Parameter 'req' implicitly has an 'any' type.</br>Parameter 'res' implicitly has an 'any' type.</span><div class='line'><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(parameter) res: any' >res</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='any' >end</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&apos;ok&apos;</span><span style="color: var(--shiki-color-text)">);</span></div><div class='line'><span style="color: var(--shiki-color-text)">});</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: var(--shiki-token-comment)">// let SvelteKit handle everything else, including serving prerendered pages and static assets</span></div><div class='line'><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const app: any' >app</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='any' >use</data-lsp></span><span style="color: var(--shiki-color-text)">(<data-lsp lsp='import handler' >handler</data-lsp>);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const app: any' >app</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='any' >listen</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)">3000</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> () </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></div><div class='line'><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='var console: Console' >console</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='(method) Console.log(...data: any[]): void' >log</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&apos;listening on port 3000&apos;</span><span style="color: var(--shiki-color-text)">);</span></div><div class='line'><span style="color: var(--shiki-color-text)">});</span></div></code></div></pre></div><h2 id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="permalink"><span class="visually-hidden">permalink</span></a></h2><h3 id="troubleshooting-is-there-a-hook-for-cleaning-up-before-the-server-exits">Is there a hook for cleaning up before the server exits?<a href="#troubleshooting-is-there-a-hook-for-cleaning-up-before-the-server-exits" class="permalink"><span class="visually-hidden">permalink</span></a></h3><p>There&#39;s nothing built-in to SvelteKit for this, because such a cleanup hook depends highly on the execution environment you&#39;re on. For Node, you can use its built-in <code>process.on(..)</code> to implement a callback that runs before the server exits:</p>
<pre class="shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)"><data-lsp lsp='function shutdownGracefully(): void' >shutdownGracefully</data-lsp></span><span style="color: var(--shiki-color-text)">() {</span></div><div class='line'><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// anything you need to clean up manually goes in here</span></div><div class='line'><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)"><data-err><data-lsp lsp='any' >db</data-lsp></data-err></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='any' >shutdown</data-lsp></span><span style="color: var(--shiki-color-text)">();</span></div><span class="error"><span>Cannot find name 'db'.</span><span class="code">2304</span></span><span class="error-behind">Cannot find name 'db'.</span><div class='line'><span style="color: var(--shiki-color-text)">}</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: var(--shiki-token-constant)"><data-err><data-lsp lsp='any' >process</data-lsp></data-err></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='any' >on</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&apos;SIGINT&apos;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> <data-lsp lsp='function shutdownGracefully(): void' >shutdownGracefully</data-lsp>);</span></div><span class="error"><span>Cannot find name 'process'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.</span><span class="code">2580</span></span><span class="error-behind">Cannot find name 'process'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.</span><div class='line'><span style="color: var(--shiki-token-constant)"><data-err><data-lsp lsp='any' >process</data-lsp></data-err></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='any' >on</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&apos;SIGTERM&apos;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> <data-lsp lsp='function shutdownGracefully(): void' >shutdownGracefully</data-lsp>);</span></div><span class="error"><span>Cannot find name 'process'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.</span><span class="code">2580</span></span><span class="error-behind">Cannot find name 'process'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.</span></code></div></pre><!-- HTML_TAG_END --></section>

	<div class="controls svelte-zelrq3"><div class="svelte-zelrq3"><span class="svelte-zelrq3">previous</span>
			<a href="/docs/adapter-auto">Zero-config deployments</a></div>

		<div class="svelte-zelrq3"><span class="svelte-zelrq3">next</span>
			<a href="/docs/adapter-static">Static site generation</a></div></div></div>



<aside class="on-this-page svelte-tsiaal"><h2 class="svelte-tsiaal">On this page</h2>
	<nav><ul class="svelte-tsiaal"><li><a href="/docs/adapter-node" class="svelte-tsiaal active">Node servers</a></li>
			<li><a href="#usage" class="svelte-tsiaal">Usage</a></li><li><a href="#deploying" class="svelte-tsiaal">Deploying</a></li><li><a href="#environment-variables" class="svelte-tsiaal">Environment variables</a></li><li><a href="#options" class="svelte-tsiaal">Options</a></li><li><a href="#custom-server" class="svelte-tsiaal">Custom server</a></li><li><a href="#troubleshooting" class="svelte-tsiaal">Troubleshooting</a></li></ul></nav>
</aside></div>

	<div class="toc-container svelte-1rc2dnd"><nav aria-label="Docs" class="svelte-1izbfc5"><ul class="sidebar svelte-1izbfc5"><li class="svelte-1izbfc5"><span class="section svelte-1izbfc5">Getting started</span>

				<ul class="svelte-1izbfc5"><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/introduction">Introduction</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/creating-a-project">Creating a project</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/project-structure">Project structure</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/web-standards">Web standards</a>
						</li></ul>
			</li><li class="svelte-1izbfc5"><span class="section svelte-1izbfc5">Core concepts</span>

				<ul class="svelte-1izbfc5"><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/routing">Routing</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/load">Loading data</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/form-actions">Form actions</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/page-options">Page options</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/state-management">State management</a>
						</li></ul>
			</li><li class="svelte-1izbfc5"><span class="section svelte-1izbfc5">Build and deploy</span>

				<ul class="svelte-1izbfc5"><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/building-your-app">Building your app</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/adapters">Adapters</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/adapter-auto">Zero-config deployments</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5 active" href="/docs/adapter-node">Node servers</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/adapter-static">Static site generation</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/single-page-apps">Single-page apps</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/adapter-cloudflare">Cloudflare Pages</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/adapter-cloudflare-workers">Cloudflare Workers</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/adapter-netlify">Netlify</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/adapter-vercel">Vercel</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/writing-adapters">Writing adapters</a>
						</li></ul>
			</li><li class="svelte-1izbfc5"><span class="section svelte-1izbfc5">Advanced</span>

				<ul class="svelte-1izbfc5"><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/advanced-routing">Advanced routing</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/hooks">Hooks</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/errors">Errors</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/link-options">Link options</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/service-workers">Service workers</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/server-only-modules">Server-only modules</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/assets">Asset handling</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/snapshots">Snapshots</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/packaging">Packaging</a>
						</li></ul>
			</li><li class="svelte-1izbfc5"><span class="section svelte-1izbfc5">Best practices</span>

				<ul class="svelte-1izbfc5"><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/accessibility">Accessibility</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/seo">SEO</a>
						</li></ul>
			</li><li class="svelte-1izbfc5"><span class="section svelte-1izbfc5">Reference</span>

				<ul class="svelte-1izbfc5"><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/configuration">Configuration</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/cli">Command Line Interface</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/modules">Modules</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/types">Types</a>
						</li></ul>
			</li><li class="svelte-1izbfc5"><span class="section svelte-1izbfc5">Appendix</span>

				<ul class="svelte-1izbfc5"><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/integrations">Integrations</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/migrating">Migrating from Sapper</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/additional-resources">Additional resources</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/glossary">Glossary</a>
						</li></ul>
			</li></ul>
</nav></div>

	<div class="ts-toggle svelte-1rc2dnd"><div class="input-output-toggle svelte-1ev6lam"><span aria-hidden="true">JavaScript</span> <button aria-pressed="false" class="svelte-1c3yzdv"><span class="visually-hidden">TypeScript code examples</span>
</button> <span aria-hidden="true">TypeScript</span>
</div></div>
</div></main>

<div class="banner svelte-tdqbhp" style="--banner-footer-height: 48px;"><a target="_blank" rel="noopener noreferrer" href="https://hack.sveltesociety.dev/"><span class="small svelte-tdqbhp"><strong class="svelte-tdqbhp">Announcing SvelteHack</strong> Participate →
			</span>
			<span class="large svelte-tdqbhp"><strong class="svelte-tdqbhp">Announcing SvelteHack</strong> Our first hackathon with over $12,000 in prizes →
			</span></a>
		<button class="svelte-tdqbhp">✕ </button></div>




			
			<script>
				{
					__sveltekit_duwvm8 = {
						env: {},
						base: new URL("..", location).pathname.slice(0, -1),
						element: document.currentScript.parentElement
					};

					const data = [null,{"type":"data","data":{sections:[{title:"Getting started",pages:[{title:"Introduction",path:"\u002Fdocs\u002Fintroduction"},{title:"Creating a project",path:"\u002Fdocs\u002Fcreating-a-project"},{title:"Project structure",path:"\u002Fdocs\u002Fproject-structure"},{title:"Web standards",path:"\u002Fdocs\u002Fweb-standards"}]},{title:"Core concepts",pages:[{title:"Routing",path:"\u002Fdocs\u002Frouting"},{title:"Loading data",path:"\u002Fdocs\u002Fload"},{title:"Form actions",path:"\u002Fdocs\u002Fform-actions"},{title:"Page options",path:"\u002Fdocs\u002Fpage-options"},{title:"State management",path:"\u002Fdocs\u002Fstate-management"}]},{title:"Build and deploy",pages:[{title:"Building your app",path:"\u002Fdocs\u002Fbuilding-your-app"},{title:"Adapters",path:"\u002Fdocs\u002Fadapters"},{title:"Zero-config deployments",path:"\u002Fdocs\u002Fadapter-auto"},{title:"Node servers",path:"\u002Fdocs\u002Fadapter-node"},{title:"Static site generation",path:"\u002Fdocs\u002Fadapter-static"},{title:"Single-page apps",path:"\u002Fdocs\u002Fsingle-page-apps"},{title:"Cloudflare Pages",path:"\u002Fdocs\u002Fadapter-cloudflare"},{title:"Cloudflare Workers",path:"\u002Fdocs\u002Fadapter-cloudflare-workers"},{title:"Netlify",path:"\u002Fdocs\u002Fadapter-netlify"},{title:"Vercel",path:"\u002Fdocs\u002Fadapter-vercel"},{title:"Writing adapters",path:"\u002Fdocs\u002Fwriting-adapters"}]},{title:"Advanced",pages:[{title:"Advanced routing",path:"\u002Fdocs\u002Fadvanced-routing"},{title:"Hooks",path:"\u002Fdocs\u002Fhooks"},{title:"Errors",path:"\u002Fdocs\u002Ferrors"},{title:"Link options",path:"\u002Fdocs\u002Flink-options"},{title:"Service workers",path:"\u002Fdocs\u002Fservice-workers"},{title:"Server-only modules",path:"\u002Fdocs\u002Fserver-only-modules"},{title:"Asset handling",path:"\u002Fdocs\u002Fassets"},{title:"Snapshots",path:"\u002Fdocs\u002Fsnapshots"},{title:"Packaging",path:"\u002Fdocs\u002Fpackaging"}]},{title:"Best practices",pages:[{title:"Accessibility",path:"\u002Fdocs\u002Faccessibility"},{title:"SEO",path:"\u002Fdocs\u002Fseo"}]},{title:"Reference",pages:[{title:"Configuration",path:"\u002Fdocs\u002Fconfiguration"},{title:"Command Line Interface",path:"\u002Fdocs\u002Fcli"},{title:"Modules",path:"\u002Fdocs\u002Fmodules"},{title:"Types",path:"\u002Fdocs\u002Ftypes"}]},{title:"Appendix",pages:[{title:"Integrations",path:"\u002Fdocs\u002Fintegrations"},{title:"Migrating from Sapper",path:"\u002Fdocs\u002Fmigrating"},{title:"Additional resources",path:"\u002Fdocs\u002Fadditional-resources"},{title:"Glossary",path:"\u002Fdocs\u002Fglossary"}]}]},"uses":{}},{"type":"data","data":{page:{file:"docs\u002F25-build-and-deploy\u002F40-adapter-node.md",slug:"adapter-node",title:"Node servers",content:"\u003Cp\u003ETo generate a standalone Node server, use \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fsveltejs\u002Fkit\u002Ftree\u002Fmaster\u002Fpackages\u002Fadapter-node\"\u003E\u003Ccode\u003Eadapter-node\u003C\u002Fcode\u003E\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003Ch2 id=\"usage\"\u003EUsage\u003Ca href=\"#usage\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh2\u003E\u003Cp\u003EInstall with \u003Ccode\u003Enpm i -D @sveltejs\u002Fadapter-node\u003C\u002Fcode\u003E, then add the adapter to your \u003Ccode\u003Esvelte.config.js\u003C\u002Fcode\u003E:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block\"\u003E\u003Cspan class=\"filename\"\u003Esvelte.config.js\u003C\u002Fspan\u003E\u003Cpre class=\"shiki twoslash lsp\" style=\"background-color: var(--shiki-color-background); color: var(--shiki-color-text)\"\u003E\u003Cdiv class=\"language-id\"\u003Ets\u003C\u002Fdiv\u003E\u003Cdiv class='code-container'\u003E\u003Ccode\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eimport\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003Cdata-lsp lsp='import adapter' \u003Eadapter\u003C\u002Fdata-lsp\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E\u003Cdata-err\u003E&apos;@sveltejs\u002Fadapter-node&apos;\u003C\u002Fdata-err\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cspan class=\"error\"\u003E\u003Cspan\u003ECannot find module '@sveltejs\u002Fadapter-node' or its corresponding type declarations.\u003C\u002Fspan\u003E\u003Cspan class=\"code\"\u003E2307\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"error-behind\"\u003ECannot find module '@sveltejs\u002Fadapter-node' or its corresponding type declarations.\u003C\u002Fspan\u003E\u003Cdiv class='line'\u003E&nbsp;\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eexport\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Edefault\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  \u003Cdata-lsp lsp='(property) kit: {&amp;#10;    adapter: any;&amp;#10;}' \u003Ekit\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E    \u003Cdata-lsp lsp='(property) adapter: any' \u003Eadapter\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E\u003Cdata-lsp lsp='import adapter' \u003Eadapter\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E()\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  }\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E};\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003C\u002Fcode\u003E\u003C\u002Fdiv\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Ch2 id=\"deploying\"\u003EDeploying\u003Ca href=\"#deploying\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh2\u003E\u003Cp\u003EFirst, build your app with \u003Ccode\u003Enpm run build\u003C\u002Fcode\u003E. This will create the production server in the output directory specified in the adapter options, defaulting to \u003Ccode\u003Ebuild\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003EYou will need the output directory, the project&#39;s \u003Ccode\u003Epackage.json\u003C\u002Fcode\u003E, and the production dependencies in \u003Ccode\u003Enode_modules\u003C\u002Fcode\u003E to run the application. Production dependencies can be generated by copying the \u003Ccode\u003Epackage.json\u003C\u002Fcode\u003E and \u003Ccode\u003Epackage-lock.json\u003C\u002Fcode\u003E and then running \u003Ccode\u003Enpm ci --omit dev\u003C\u002Fcode\u003E (you can skip this step if your app doesn&#39;t have any dependencies). You can then start your app with this command:\u003C\u002Fp\u003E\n\u003Cpre class='language-bash'\u003E\u003Ccode\u003E\u003Cspan class=\"token function\"\u003Enode\u003C\u002Fspan\u003E build\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EDevelopment dependencies will be bundled into your app using \u003Ca href=\"https:\u002F\u002Frollupjs.org\"\u003ERollup\u003C\u002Fa\u003E. To control whether a given package is bundled or externalised, place it in \u003Ccode\u003EdevDependencies\u003C\u002Fcode\u003E or \u003Ccode\u003Edependencies\u003C\u002Fcode\u003E respectively in your \u003Ccode\u003Epackage.json\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Ch2 id=\"environment-variables\"\u003EEnvironment variables\u003Ca href=\"#environment-variables\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh2\u003E\u003Cp\u003EIn \u003Ccode\u003Edev\u003C\u002Fcode\u003E and \u003Ccode\u003Epreview\u003C\u002Fcode\u003E, SvelteKit will read environment variables from your \u003Ccode\u003E.env\u003C\u002Fcode\u003E file (or \u003Ccode\u003E.env.local\u003C\u002Fcode\u003E, or \u003Ccode\u003E.env.[mode]\u003C\u002Fcode\u003E, \u003Ca href=\"https:\u002F\u002Fvitejs.dev\u002Fguide\u002Fenv-and-mode.html#env-files\"\u003Eas determined by Vite\u003C\u002Fa\u003E.)\u003C\u002Fp\u003E\n\u003Cp\u003EIn production, \u003Ccode\u003E.env\u003C\u002Fcode\u003E files are \u003Cem\u003Enot\u003C\u002Fem\u003E automatically loaded. To do so, install \u003Ccode\u003Edotenv\u003C\u002Fcode\u003E in your project...\u003C\u002Fp\u003E\n\u003Cpre class='language-bash'\u003E\u003Ccode\u003E\u003Cspan class=\"token function\"\u003Enpm\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Einstall\u003C\u002Fspan\u003E dotenv\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003E...and invoke it before running the built app:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-diff\"\u003E\u003Ccode\u003E\u003Cspan class=\"deleted\"\u003Enode build\n\u003C\u002Fspan\u003E\u003Cspan class=\"inserted\"\u003Enode -r dotenv\u002Fconfig build\n\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 id=\"environment-variables-port-and-host\"\u003E\u003Ccode\u003EPORT\u003C\u002Fcode\u003E and \u003Ccode\u003EHOST\u003C\u002Fcode\u003E\u003Ca href=\"#environment-variables-port-and-host\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh3\u003E\u003Cp\u003EBy default, the server will accept connections on \u003Ccode\u003E0.0.0.0\u003C\u002Fcode\u003E using port 3000. These can be customised with the \u003Ccode\u003EPORT\u003C\u002Fcode\u003E and \u003Ccode\u003EHOST\u003C\u002Fcode\u003E environment variables:\u003C\u002Fp\u003E\n\u003Cpre class='language-'\u003E\u003Ccode\u003EHOST=127.0.0.1 PORT=4000 node build\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 id=\"environment-variables-origin-protocol-header-and-host-header\"\u003E\u003Ccode\u003EORIGIN\u003C\u002Fcode\u003E, \u003Ccode\u003EPROTOCOL_HEADER\u003C\u002Fcode\u003E and \u003Ccode\u003EHOST_HEADER\u003C\u002Fcode\u003E\u003Ca href=\"#environment-variables-origin-protocol-header-and-host-header\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh3\u003E\u003Cp\u003EHTTP doesn&#39;t give SvelteKit a reliable way to know the URL that is currently being requested. The simplest way to tell SvelteKit where the app is being served is to set the \u003Ccode\u003EORIGIN\u003C\u002Fcode\u003E environment variable:\u003C\u002Fp\u003E\n\u003Cpre class='language-'\u003E\u003Ccode\u003EORIGIN=https:\u002F\u002Fmy.site node build\n\n# or e.g. for local previewing and testing\nORIGIN=http:\u002F\u002Flocalhost:3000 node build\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EWith this, a request for the \u003Ccode\u003E\u002Fstuff\u003C\u002Fcode\u003E pathname will correctly resolve to \u003Ccode\u003Ehttps:\u002F\u002Fmy.site\u002Fstuff\u003C\u002Fcode\u003E. Alternatively, you can specify headers that tell SvelteKit about the request protocol and host, from which it can construct the origin URL:\u003C\u002Fp\u003E\n\u003Cpre class='language-'\u003E\u003Ccode\u003EPROTOCOL_HEADER=x-forwarded-proto HOST_HEADER=x-forwarded-host node build\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cblockquote\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FWeb\u002FHTTP\u002FHeaders\u002FX-Forwarded-Proto\"\u003E\u003Ccode\u003Ex-forwarded-proto\u003C\u002Fcode\u003E\u003C\u002Fa\u003E and \u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FWeb\u002FHTTP\u002FHeaders\u002FX-Forwarded-Host\"\u003E\u003Ccode\u003Ex-forwarded-host\u003C\u002Fcode\u003E\u003C\u002Fa\u003E are de facto standard headers that forward the original protocol and host if you&#39;re using a reverse proxy (think load balancers and CDNs). You should only set these variables if your server is behind a trusted reverse proxy; otherwise, it&#39;d be possible for clients to spoof these headers.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003EIf \u003Ccode\u003Eadapter-node\u003C\u002Fcode\u003E can&#39;t correctly determine the URL of your deployment, you may experience this error when using \u003Ca href=\"form-actions\"\u003Eform actions\u003C\u002Fa\u003E:\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003ECross-site POST form submissions are forbidden\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Ch3 id=\"environment-variables-address-header-and-xff-depth\"\u003E\u003Ccode\u003EADDRESS_HEADER\u003C\u002Fcode\u003E and \u003Ccode\u003EXFF_DEPTH\u003C\u002Fcode\u003E\u003Ca href=\"#environment-variables-address-header-and-xff-depth\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh3\u003E\u003Cp\u003EThe \u003Ca href=\"types#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E object passed to hooks and endpoints includes an \u003Ccode\u003Eevent.getClientAddress()\u003C\u002Fcode\u003E function that returns the client&#39;s IP address. By default this is the connecting \u003Ccode\u003EremoteAddress\u003C\u002Fcode\u003E. If your server is behind one or more proxies (such as a load balancer), this value will contain the innermost proxy&#39;s IP address rather than the client&#39;s, so we need to specify an \u003Ccode\u003EADDRESS_HEADER\u003C\u002Fcode\u003E to read the address from:\u003C\u002Fp\u003E\n\u003Cpre class='language-'\u003E\u003Ccode\u003EADDRESS_HEADER=True-Client-IP node build\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cblockquote\u003E\n\u003Cp\u003EHeaders can easily be spoofed. As with \u003Ccode\u003EPROTOCOL_HEADER\u003C\u002Fcode\u003E and \u003Ccode\u003EHOST_HEADER\u003C\u002Fcode\u003E, you should \u003Ca href=\"https:\u002F\u002Fadam-p.ca\u002Fblog\u002F2022\u002F03\u002Fx-forwarded-for\u002F\"\u003Eknow what you&#39;re doing\u003C\u002Fa\u003E before setting these.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003EIf the \u003Ccode\u003EADDRESS_HEADER\u003C\u002Fcode\u003E is \u003Ccode\u003EX-Forwarded-For\u003C\u002Fcode\u003E, the header value will contain a comma-separated list of IP addresses. The \u003Ccode\u003EXFF_DEPTH\u003C\u002Fcode\u003E environment variable should specify how many trusted proxies sit in front of your server. E.g. if there are three trusted proxies, proxy 3 will forward the addresses of the original connection and the first two proxies:\u003C\u002Fp\u003E\n\u003Cpre class='language-'\u003E\u003Ccode\u003E&lt;client address&gt;, &lt;proxy 1 address&gt;, &lt;proxy 2 address&gt;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003ESome guides will tell you to read the left-most address, but this leaves you \u003Ca href=\"https:\u002F\u002Fadam-p.ca\u002Fblog\u002F2022\u002F03\u002Fx-forwarded-for\u002F\"\u003Evulnerable to spoofing\u003C\u002Fa\u003E:\u003C\u002Fp\u003E\n\u003Cpre class='language-'\u003E\u003Ccode\u003E&lt;spoofed address&gt;, &lt;client address&gt;, &lt;proxy 1 address&gt;, &lt;proxy 2 address&gt;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EWe instead read from the \u003Cem\u003Eright\u003C\u002Fem\u003E, accounting for the number of trusted proxies. In this case, we would use \u003Ccode\u003EXFF_DEPTH=3\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003EIf you need to read the left-most address instead (and don&#39;t care about spoofing) — for example, to offer a geolocation service, where it&#39;s more important for the IP address to be \u003Cem\u003Ereal\u003C\u002Fem\u003E than \u003Cem\u003Etrusted\u003C\u002Fem\u003E, you can do so by inspecting the \u003Ccode\u003Ex-forwarded-for\u003C\u002Fcode\u003E header within your app.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Ch3 id=\"environment-variables-body-size-limit\"\u003E\u003Ccode\u003EBODY_SIZE_LIMIT\u003C\u002Fcode\u003E\u003Ca href=\"#environment-variables-body-size-limit\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh3\u003E\u003Cp\u003EThe maximum request body size to accept in bytes including while streaming. Defaults to 512kb. You can disable this option with a value of 0 and implement a custom check in \u003Ca href=\"hooks#server-hooks-handle\"\u003E\u003Ccode\u003Ehandle\u003C\u002Fcode\u003E\u003C\u002Fa\u003E if you need something more advanced.\u003C\u002Fp\u003E\n\u003Ch2 id=\"options\"\u003EOptions\u003Ca href=\"#options\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh2\u003E\u003Cp\u003EThe adapter can be configured with various options:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block\"\u003E\u003Cspan class=\"filename\"\u003Esvelte.config.js\u003C\u002Fspan\u003E\u003Cpre class=\"shiki twoslash lsp\" style=\"background-color: var(--shiki-color-background); color: var(--shiki-color-text)\"\u003E\u003Cdiv class=\"language-id\"\u003Ets\u003C\u002Fdiv\u003E\u003Cdiv class='code-container'\u003E\u003Ccode\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eimport\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003Cdata-lsp lsp='import adapter' \u003Eadapter\u003C\u002Fdata-lsp\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E\u003Cdata-err\u003E&apos;@sveltejs\u002Fadapter-node&apos;\u003C\u002Fdata-err\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cspan class=\"error\"\u003E\u003Cspan\u003ECannot find module '@sveltejs\u002Fadapter-node' or its corresponding type declarations.\u003C\u002Fspan\u003E\u003Cspan class=\"code\"\u003E2307\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"error-behind\"\u003ECannot find module '@sveltejs\u002Fadapter-node' or its corresponding type declarations.\u003C\u002Fspan\u003E\u003Cdiv class='line'\u003E&nbsp;\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eexport\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Edefault\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  \u003Cdata-lsp lsp='(property) kit: {&amp;#10;    adapter: any;&amp;#10;}' \u003Ekit\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E    \u003Cdata-lsp lsp='(property) adapter: any' \u003Eadapter\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E\u003Cdata-lsp lsp='import adapter' \u003Eadapter\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E({\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E      \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E\u002F\u002F default options are shown\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E      \u003Cdata-lsp lsp='(property) out: string' \u003Eout\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E&apos;build&apos;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-punctuation)\"\u003E,\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E      \u003Cdata-lsp lsp='(property) precompress: boolean' \u003Eprecompress\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003Efalse\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-punctuation)\"\u003E,\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E      \u003Cdata-lsp lsp='(property) envPrefix: string' \u003EenvPrefix\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E&apos;&apos;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-punctuation)\"\u003E,\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E      \u003Cdata-lsp lsp='(property) polyfill: boolean' \u003Epolyfill\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003Etrue\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E    })\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  }\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E};\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003C\u002Fcode\u003E\u003C\u002Fdiv\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Ch3 id=\"options-out\"\u003Eout\u003Ca href=\"#options-out\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh3\u003E\u003Cp\u003EThe directory to build the server to. It defaults to \u003Ccode\u003Ebuild\u003C\u002Fcode\u003E — i.e. \u003Ccode\u003Enode build\u003C\u002Fcode\u003E would start the server locally after it has been created.\u003C\u002Fp\u003E\n\u003Ch3 id=\"options-precompress\"\u003Eprecompress\u003Ca href=\"#options-precompress\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh3\u003E\u003Cp\u003EEnables precompressing using gzip and brotli for assets and prerendered pages. It defaults to \u003Ccode\u003Efalse\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Ch3 id=\"options-envprefix\"\u003EenvPrefix\u003Ca href=\"#options-envprefix\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh3\u003E\u003Cp\u003EIf you need to change the name of the environment variables used to configure the deployment (for example, to deconflict with environment variables you don&#39;t control), you can specify a prefix:\u003C\u002Fp\u003E\n\u003Cpre class=\"shiki twoslash lsp\" style=\"background-color: var(--shiki-color-background); color: var(--shiki-color-text)\"\u003E\u003Cdiv class=\"language-id\"\u003Ets\u003C\u002Fdiv\u003E\u003Cdiv class='code-container'\u003E\u003Ccode\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003EenvPrefix\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-punctuation)\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E&apos;MY_CUSTOM_&apos;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003C\u002Fcode\u003E\u003C\u002Fdiv\u003E\u003C\u002Fpre\u003E\u003Cpre class='language-undefined'\u003E\u003Ccode\u003EMY_CUSTOM_HOST=127.0.0.1 \\\nMY_CUSTOM_PORT=4000 \\\nMY_CUSTOM_ORIGIN=https:\u002F\u002Fmy.site \\\nnode build\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 id=\"options-polyfill\"\u003Epolyfill\u003Ca href=\"#options-polyfill\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh3\u003E\u003Cp\u003EControls whether your build will load polyfills for missing modules. It defaults to \u003Ccode\u003Etrue\u003C\u002Fcode\u003E, and should only be disabled when using Node 18.11 or greater.\u003C\u002Fp\u003E\n\u003Ch2 id=\"custom-server\"\u003ECustom server\u003Ca href=\"#custom-server\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh2\u003E\u003Cp\u003EThe adapter creates two files in your build directory — \u003Ccode\u003Eindex.js\u003C\u002Fcode\u003E and \u003Ccode\u003Ehandler.js\u003C\u002Fcode\u003E. Running \u003Ccode\u003Eindex.js\u003C\u002Fcode\u003E — e.g. \u003Ccode\u003Enode build\u003C\u002Fcode\u003E, if you use the default build directory — will start a server on the configured port.\u003C\u002Fp\u003E\n\u003Cp\u003EAlternatively, you can import the \u003Ccode\u003Ehandler.js\u003C\u002Fcode\u003E file, which exports a handler suitable for use with \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fexpressjs\u002Fexpressjs.com\"\u003EExpress\u003C\u002Fa\u003E, \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fsenchalabs\u002Fconnect\"\u003EConnect\u003C\u002Fa\u003E or \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Flukeed\u002Fpolka\"\u003EPolka\u003C\u002Fa\u003E (or even just the built-in \u003Ca href=\"https:\u002F\u002Fnodejs.org\u002Fdist\u002Flatest\u002Fdocs\u002Fapi\u002Fhttp.html#httpcreateserveroptions-requestlistener\"\u003E\u003Ccode\u003Ehttp.createServer\u003C\u002Fcode\u003E\u003C\u002Fa\u003E) and set up your own server:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block\"\u003E\u003Cspan class=\"filename\"\u003Emy-server.js\u003C\u002Fspan\u003E\u003Cpre class=\"shiki twoslash lsp\" style=\"background-color: var(--shiki-color-background); color: var(--shiki-color-text)\"\u003E\u003Cdiv class=\"language-id\"\u003Ets\u003C\u002Fdiv\u003E\u003Cdiv class='code-container'\u003E\u003Ccode\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eimport\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E { \u003Cdata-lsp lsp='import handler' \u003Ehandler\u003C\u002Fdata-lsp\u003E } \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E\u003Cdata-err\u003E&apos;.\u002Fbuild\u002Fhandler.js&apos;\u003C\u002Fdata-err\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cspan class=\"error\"\u003E\u003Cspan\u003ECannot find module '.\u002Fbuild\u002Fhandler.js' or its corresponding type declarations.\u003C\u002Fspan\u003E\u003Cspan class=\"code\"\u003E2307\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"error-behind\"\u003ECannot find module '.\u002Fbuild\u002Fhandler.js' or its corresponding type declarations.\u003C\u002Fspan\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eimport\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003Cdata-lsp lsp='import express' \u003Eexpress\u003C\u002Fdata-lsp\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E\u003Cdata-err\u003E&apos;express&apos;\u003C\u002Fdata-err\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cspan class=\"error\"\u003E\u003Cspan\u003ECannot find module 'express' or its corresponding type declarations.\u003C\u002Fspan\u003E\u003Cspan class=\"code\"\u003E2307\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"error-behind\"\u003ECannot find module 'express' or its corresponding type declarations.\u003C\u002Fspan\u003E\u003Cdiv class='line'\u003E&nbsp;\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Econst\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='const app: any' \u003Eapp\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E\u003Cdata-lsp lsp='import express' \u003Eexpress\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E();\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E&nbsp;\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E\u002F\u002F add a route that lives separately from the SvelteKit app\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='const app: any' \u003Eapp\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003Cdata-lsp lsp='any' \u003Eget\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E&apos;\u002Fhealthcheck&apos;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-punctuation)\"\u003E,\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E (\u003Cdata-err\u003E\u003Cdata-lsp lsp='(parameter) req: any' \u003Ereq\u003C\u002Fdata-lsp\u003E\u003C\u002Fdata-err\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-punctuation)\"\u003E,\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003Cdata-err\u003E\u003Cdata-lsp lsp='(parameter) res: any' \u003Eres\u003C\u002Fdata-lsp\u003E\u003C\u002Fdata-err\u003E) \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cspan class=\"error\"\u003E\u003Cspan\u003EParameter 'req' implicitly has an 'any' type.\u003C\u002Fbr\u003EParameter 'res' implicitly has an 'any' type.\u003C\u002Fspan\u003E\u003Cspan class=\"code\"\u003E7006\u003Cbr\u002F\u003E7006\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"error-behind\"\u003EParameter 'req' implicitly has an 'any' type.\u003C\u002Fbr\u003EParameter 'res' implicitly has an 'any' type.\u003C\u002Fspan\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='(parameter) res: any' \u003Eres\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003Cdata-lsp lsp='any' \u003Eend\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E&apos;ok&apos;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E);\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E});\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E&nbsp;\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E\u002F\u002F let SvelteKit handle everything else, including serving prerendered pages and static assets\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='const app: any' \u003Eapp\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003Cdata-lsp lsp='any' \u003Euse\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003Cdata-lsp lsp='import handler' \u003Ehandler\u003C\u002Fdata-lsp\u003E);\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E&nbsp;\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='const app: any' \u003Eapp\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003Cdata-lsp lsp='any' \u003Elisten\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E3000\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-punctuation)\"\u003E,\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E () \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='var console: Console' \u003Econsole\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003Cdata-lsp lsp='(method) Console.log(...data: any[]): void' \u003Elog\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E&apos;listening on port 3000&apos;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E);\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E});\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003C\u002Fcode\u003E\u003C\u002Fdiv\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Ch2 id=\"troubleshooting\"\u003ETroubleshooting\u003Ca href=\"#troubleshooting\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh2\u003E\u003Ch3 id=\"troubleshooting-is-there-a-hook-for-cleaning-up-before-the-server-exits\"\u003EIs there a hook for cleaning up before the server exits?\u003Ca href=\"#troubleshooting-is-there-a-hook-for-cleaning-up-before-the-server-exits\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh3\u003E\u003Cp\u003EThere&#39;s nothing built-in to SvelteKit for this, because such a cleanup hook depends highly on the execution environment you&#39;re on. For Node, you can use its built-in \u003Ccode\u003Eprocess.on(..)\u003C\u002Fcode\u003E to implement a callback that runs before the server exits:\u003C\u002Fp\u003E\n\u003Cpre class=\"shiki twoslash lsp\" style=\"background-color: var(--shiki-color-background); color: var(--shiki-color-text)\"\u003E\u003Cdiv class=\"language-id\"\u003Ets\u003C\u002Fdiv\u003E\u003Cdiv class='code-container'\u003E\u003Ccode\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E\u003Cdata-lsp lsp='function shutdownGracefully(): void' \u003EshutdownGracefully\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E() {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E\u002F\u002F anything you need to clean up manually goes in here\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-err\u003E\u003Cdata-lsp lsp='any' \u003Edb\u003C\u002Fdata-lsp\u003E\u003C\u002Fdata-err\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003Cdata-lsp lsp='any' \u003Eshutdown\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E();\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cspan class=\"error\"\u003E\u003Cspan\u003ECannot find name 'db'.\u003C\u002Fspan\u003E\u003Cspan class=\"code\"\u003E2304\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"error-behind\"\u003ECannot find name 'db'.\u003C\u002Fspan\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E&nbsp;\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-err\u003E\u003Cdata-lsp lsp='any' \u003Eprocess\u003C\u002Fdata-lsp\u003E\u003C\u002Fdata-err\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003Cdata-lsp lsp='any' \u003Eon\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E&apos;SIGINT&apos;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-punctuation)\"\u003E,\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003Cdata-lsp lsp='function shutdownGracefully(): void' \u003EshutdownGracefully\u003C\u002Fdata-lsp\u003E);\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cspan class=\"error\"\u003E\u003Cspan\u003ECannot find name 'process'. Do you need to install type definitions for node? Try `npm i --save-dev @types\u002Fnode`.\u003C\u002Fspan\u003E\u003Cspan class=\"code\"\u003E2580\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"error-behind\"\u003ECannot find name 'process'. Do you need to install type definitions for node? Try `npm i --save-dev @types\u002Fnode`.\u003C\u002Fspan\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-err\u003E\u003Cdata-lsp lsp='any' \u003Eprocess\u003C\u002Fdata-lsp\u003E\u003C\u002Fdata-err\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003Cdata-lsp lsp='any' \u003Eon\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E&apos;SIGTERM&apos;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-punctuation)\"\u003E,\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003Cdata-lsp lsp='function shutdownGracefully(): void' \u003EshutdownGracefully\u003C\u002Fdata-lsp\u003E);\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cspan class=\"error\"\u003E\u003Cspan\u003ECannot find name 'process'. Do you need to install type definitions for node? Try `npm i --save-dev @types\u002Fnode`.\u003C\u002Fspan\u003E\u003Cspan class=\"code\"\u003E2580\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"error-behind\"\u003ECannot find name 'process'. Do you need to install type definitions for node? Try `npm i --save-dev @types\u002Fnode`.\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fdiv\u003E\u003C\u002Fpre\u003E",sections:[{title:"Usage",slug:"usage",sections:[]},{title:"Deploying",slug:"deploying",sections:[]},{title:"Environment variables",slug:"environment-variables",sections:[{title:"PORT and HOST",slug:"environment-variables-port-and-host"},{title:"ORIGIN, PROTOCOL_HEADER and HOST_HEADER",slug:"environment-variables-origin-protocol-header-and-host-header"},{title:"ADDRESS_HEADER and XFF_DEPTH",slug:"environment-variables-address-header-and-xff-depth"},{title:"BODY_SIZE_LIMIT",slug:"environment-variables-body-size-limit"}]},{title:"Options",slug:"options",sections:[{title:"out",slug:"options-out"},{title:"precompress",slug:"options-precompress"},{title:"envPrefix",slug:"options-envprefix"},{title:"polyfill",slug:"options-polyfill"}]},{title:"Custom server",slug:"custom-server",sections:[]},{title:"Troubleshooting",slug:"troubleshooting",sections:[{title:"Is there a hook for cleaning up before the server exits?",slug:"troubleshooting-is-there-a-hook-for-cleaning-up-before-the-server-exits"}]}]}},"uses":{"params":["slug"]}}];

					Promise.all([
						import("../_app/immutable/entry/start.bc2154d3.js"),
						import("../_app/immutable/entry/app.6b34a82d.js")
					]).then(([kit, app]) => {
						kit.start(app, __sveltekit_duwvm8.element, {
							node_ids: [0, 2, 5],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
