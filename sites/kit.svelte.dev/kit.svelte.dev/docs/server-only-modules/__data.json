{"type":"data","nodes":[null,{"type":"data","data":[{"sections":1},[2,17,35,71,101,110,125],{"title":3,"pages":4},"Getting started",[5,8,11,14],{"title":6,"path":7},"Introduction","\u002Fdocs\u002Fintroduction",{"title":9,"path":10},"Creating a project","\u002Fdocs\u002Fcreating-a-project",{"title":12,"path":13},"Project structure","\u002Fdocs\u002Fproject-structure",{"title":15,"path":16},"Web standards","\u002Fdocs\u002Fweb-standards",{"title":18,"pages":19},"Core concepts",[20,23,26,29,32],{"title":21,"path":22},"Routing","\u002Fdocs\u002Frouting",{"title":24,"path":25},"Loading data","\u002Fdocs\u002Fload",{"title":27,"path":28},"Form actions","\u002Fdocs\u002Fform-actions",{"title":30,"path":31},"Page options","\u002Fdocs\u002Fpage-options",{"title":33,"path":34},"State management","\u002Fdocs\u002Fstate-management",{"title":36,"pages":37},"Build and deploy",[38,41,44,47,50,53,56,59,62,65,68],{"title":39,"path":40},"Building your app","\u002Fdocs\u002Fbuilding-your-app",{"title":42,"path":43},"Adapters","\u002Fdocs\u002Fadapters",{"title":45,"path":46},"Zero-config deployments","\u002Fdocs\u002Fadapter-auto",{"title":48,"path":49},"Node servers","\u002Fdocs\u002Fadapter-node",{"title":51,"path":52},"Static site generation","\u002Fdocs\u002Fadapter-static",{"title":54,"path":55},"Single-page apps","\u002Fdocs\u002Fsingle-page-apps",{"title":57,"path":58},"Cloudflare Pages","\u002Fdocs\u002Fadapter-cloudflare",{"title":60,"path":61},"Cloudflare Workers","\u002Fdocs\u002Fadapter-cloudflare-workers",{"title":63,"path":64},"Netlify","\u002Fdocs\u002Fadapter-netlify",{"title":66,"path":67},"Vercel","\u002Fdocs\u002Fadapter-vercel",{"title":69,"path":70},"Writing adapters","\u002Fdocs\u002Fwriting-adapters",{"title":72,"pages":73},"Advanced",[74,77,80,83,86,89,92,95,98],{"title":75,"path":76},"Advanced routing","\u002Fdocs\u002Fadvanced-routing",{"title":78,"path":79},"Hooks","\u002Fdocs\u002Fhooks",{"title":81,"path":82},"Errors","\u002Fdocs\u002Ferrors",{"title":84,"path":85},"Link options","\u002Fdocs\u002Flink-options",{"title":87,"path":88},"Service workers","\u002Fdocs\u002Fservice-workers",{"title":90,"path":91},"Server-only modules","\u002Fdocs\u002Fserver-only-modules",{"title":93,"path":94},"Asset handling","\u002Fdocs\u002Fassets",{"title":96,"path":97},"Snapshots","\u002Fdocs\u002Fsnapshots",{"title":99,"path":100},"Packaging","\u002Fdocs\u002Fpackaging",{"title":102,"pages":103},"Best practices",[104,107],{"title":105,"path":106},"Accessibility","\u002Fdocs\u002Faccessibility",{"title":108,"path":109},"SEO","\u002Fdocs\u002Fseo",{"title":111,"pages":112},"Reference",[113,116,119,122],{"title":114,"path":115},"Configuration","\u002Fdocs\u002Fconfiguration",{"title":117,"path":118},"Command Line Interface","\u002Fdocs\u002Fcli",{"title":120,"path":121},"Modules","\u002Fdocs\u002Fmodules",{"title":123,"path":124},"Types","\u002Fdocs\u002Ftypes",{"title":126,"pages":127},"Appendix",[128,131,134,137],{"title":129,"path":130},"Integrations","\u002Fdocs\u002Fintegrations",{"title":132,"path":133},"Migrating from Sapper","\u002Fdocs\u002Fmigrating",{"title":135,"path":136},"Additional resources","\u002Fdocs\u002Fadditional-resources",{"title":138,"path":139},"Glossary","\u002Fdocs\u002Fglossary"],"uses":{}},{"type":"data","data":[{"page":1},{"file":2,"slug":3,"title":4,"content":5,"sections":6},"docs\u002F30-advanced\u002F50-server-only-modules.md","server-only-modules","Server-only modules","\u003Cp\u003ELike a good friend, SvelteKit keeps your secrets. When writing your backend and frontend in the same repository, it can be easy to accidentally import sensitive data into your front-end code (environment variables containing API keys, for example). SvelteKit provides a way to prevent this entirely: server-only modules.\u003C\u002Fp\u003E\n\u003Ch2 id=\"private-environment-variables\"\u003EPrivate environment variables\u003Ca href=\"#private-environment-variables\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh2\u003E\u003Cp\u003EThe \u003Ccode\u003E$env\u002Fstatic\u002Fprivate\u003C\u002Fcode\u003E and \u003Ccode\u003E$env\u002Fdynamic\u002Fprivate\u003C\u002Fcode\u003E modules, which are covered in the \u003Ca href=\"modules\"\u003Emodules\u003C\u002Fa\u003E section, can only be imported into modules that only run on the server, such as \u003Ca href=\"hooks#server-hooks\"\u003E\u003Ccode\u003Ehooks.server.js\u003C\u002Fcode\u003E\u003C\u002Fa\u003E or \u003Ca href=\"routing#page-page-server-js\"\u003E\u003Ccode\u003E+page.server.js\u003C\u002Fcode\u003E\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003Ch2 id=\"your-modules\"\u003EYour modules\u003Ca href=\"#your-modules\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh2\u003E\u003Cp\u003EYou can make your own modules server-only in two ways:\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003Eadding \u003Ccode\u003E.server\u003C\u002Fcode\u003E to the filename, e.g. \u003Ccode\u003Esecrets.server.js\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003Eplacing them in \u003Ccode\u003E$lib\u002Fserver\u003C\u002Fcode\u003E, e.g. \u003Ccode\u003E$lib\u002Fserver\u002Fsecrets.js\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2 id=\"how-it-works\"\u003EHow it works\u003Ca href=\"#how-it-works\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh2\u003E\u003Cp\u003EAny time you have public-facing code that imports server-only code (whether directly or indirectly)...\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block\"\u003E\u003Cspan class=\"filename\"\u003E$lib\u002Fserver\u002Fsecrets.js\u003C\u002Fspan\u003E\u003Cpre class=\"shiki twoslash lsp\" style=\"background-color: var(--shiki-color-background); color: var(--shiki-color-text)\"\u003E\u003Cdiv class=\"language-id\"\u003Ets\u003C\u002Fdiv\u003E\u003Cdiv class='code-container'\u003E\u003Ccode\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eexport\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Econst\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-err\u003E\u003Cdata-lsp lsp='const atlantisCoordinates: any[]' \u003EatlantisCoordinates\u003C\u002Fdata-lsp\u003E\u003C\u002Fdata-err\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E [\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E\u002F* redacted *\u002F\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E];\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cspan class=\"error\"\u003E\u003Cspan\u003EVariable 'atlantisCoordinates' implicitly has an 'any[]' type.\u003C\u002Fspan\u003E\u003Cspan class=\"code\"\u003E7005\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"error-behind\"\u003EVariable 'atlantisCoordinates' implicitly has an 'any[]' type.\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fdiv\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"code-block\"\u003E\u003Cspan class=\"filename\"\u003Esrc\u002Froutes\u002Futils.js\u003C\u002Fspan\u003E\u003Cpre class=\"shiki twoslash lsp\" style=\"background-color: var(--shiki-color-background); color: var(--shiki-color-text)\"\u003E\u003Cdiv class=\"language-id\"\u003Ets\u003C\u002Fdiv\u003E\u003Cdiv class='code-container'\u003E\u003Ccode\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eexport\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E { \u003Cdata-lsp lsp='export atlantisCoordinates' \u003EatlantisCoordinates\u003C\u002Fdata-lsp\u003E } \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E\u003Cdata-err\u003E&apos;$lib\u002Fserver\u002Fsecrets.js&apos;\u003C\u002Fdata-err\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cspan class=\"error\"\u003E\u003Cspan\u003ECannot find module '$lib\u002Fserver\u002Fsecrets.js' or its corresponding type declarations.\u003C\u002Fspan\u003E\u003Cspan class=\"code\"\u003E2307\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"error-behind\"\u003ECannot find module '$lib\u002Fserver\u002Fsecrets.js' or its corresponding type declarations.\u003C\u002Fspan\u003E\u003Cdiv class='line'\u003E&nbsp;\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eexport\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Econst\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E\u003Cdata-lsp lsp='const add: (a: any, b: any) =\u003E any' \u003Eadd\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E (\u003Cdata-err\u003E\u003Cdata-lsp lsp='(parameter) a: any' \u003Ea\u003C\u002Fdata-lsp\u003E\u003C\u002Fdata-err\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-punctuation)\"\u003E,\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003Cdata-err\u003E\u003Cdata-lsp lsp='(parameter) b: any' \u003Eb\u003C\u002Fdata-lsp\u003E\u003C\u002Fdata-err\u003E) \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003Cdata-lsp lsp='(parameter) a: any' \u003Ea\u003C\u002Fdata-lsp\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E+\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003Cdata-lsp lsp='(parameter) b: any' \u003Eb\u003C\u002Fdata-lsp\u003E;\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cspan class=\"error\"\u003E\u003Cspan\u003EParameter 'a' implicitly has an 'any' type.\u003C\u002Fbr\u003EParameter 'b' implicitly has an 'any' type.\u003C\u002Fspan\u003E\u003Cspan class=\"code\"\u003E7006\u003Cbr\u002F\u003E7006\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"error-behind\"\u003EParameter 'a' implicitly has an 'any' type.\u003C\u002Fbr\u003EParameter 'b' implicitly has an 'any' type.\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fdiv\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"code-block\"\u003E\u003Cspan class=\"filename\"\u003Esrc\u002Froutes\u002F+page.svelte\u003C\u002Fspan\u003E\u003Cpre class='language-markup'\u003E\u003Ccode\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003Escript\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token script\"\u003E\u003Cspan class=\"token language-javascript\"\u003E\n  \u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E add \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'.\u002Futils.js'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u002F\u003C\u002Fspan\u003Escript\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp\u003E...SvelteKit will error:\u003C\u002Fp\u003E\n\u003Cpre class='language-'\u003E\u003Ccode\u003ECannot import $lib\u002Fserver\u002Fsecrets.js into public-facing code:\n- src\u002Froutes\u002F+page.svelte\n  - src\u002Froutes\u002Futils.js\n    - $lib\u002Fserver\u002Fsecrets.js\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EEven though the public-facing code — \u003Ccode\u003Esrc\u002Froutes\u002F+page.svelte\u003C\u002Fcode\u003E — only uses the \u003Ccode\u003Eadd\u003C\u002Fcode\u003E export and not the secret \u003Ccode\u003EatlantisCoordinates\u003C\u002Fcode\u003E export, the secret code could end up in JavaScript that the browser downloads, and so the import chain is considered unsafe.\u003C\u002Fp\u003E\n\u003Cp\u003EThis feature also works with dynamic imports, even interpolated ones like \u003Ccode\u003Eawait import(`.\u002F${foo}.js`)\u003C\u002Fcode\u003E, with one small caveat: during development, if there are two or more dynamic imports between the public-facing code and the server-only module, the illegal import will not be detected the first time the code is loaded.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003EUnit testing frameworks like Vitest do not distinguish between server-only and public-facing code. For this reason, illegal import detection is disabled when running tests, as determined by \u003Ccode\u003Eprocess.env.TEST === &#39;true&#39;\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Ch2 id=\"further-reading\"\u003EFurther reading\u003Ca href=\"#further-reading\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh2\u003E\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Flearn.svelte.dev\u002Ftutorial\u002Fenv-static-private\"\u003ETutorial: Environment variables\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n",[7,11,15,19],{"title":8,"slug":9,"sections":10},"Private environment variables","private-environment-variables",[],{"title":12,"slug":13,"sections":14},"Your modules","your-modules",[],{"title":16,"slug":17,"sections":18},"How it works","how-it-works",[],{"title":20,"slug":21,"sections":22},"Further reading","further-reading",[]],"uses":{"params":["slug"]}}]}
