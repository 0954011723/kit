<!DOCTYPE html>
<html lang="en" class="no-js">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />
		<meta name="theme-color" content="#ff3e00" />
		<meta name="color-scheme" content="dark light" />

		<link rel="manifest" href="/manifest.json" />
		<link rel="icon" type="image/png" href="/favicon.png" />

		<meta name="twitter:card" content="summary" />
		<meta name="twitter:site" content="@sveltejs" />
		<meta name="twitter:creator" content="@sveltejs" />
		<meta name="twitter:image" content="/images/twitter-thumbnail.jpg" />
		<meta name="og:image" content="/images/twitter-thumbnail.jpg" />

		<!-- add inline style and blocking script to prevent content flash/jump -->
		<style>
			.ts-version {
				display: none;
			}
			.prefers-ts .js-version {
				display: none;
			}
			.prefers-ts .ts-version {
				display: block;
			}
			.no-js .ts-toggle {
				display: none;
			}
		</style>
		<script>
			document.getElementsByTagName('html')[0].classList.remove('no-js');
			localStorage.getItem('prefers-ts') === 'true' &&
				document.documentElement.classList.add('prefers-ts');
		</script>

		<meta http-equiv="content-security-policy" content="">
		<link href="../_app/immutable/assets/_layout.4a4977ec.css" rel="stylesheet">
		<link href="../_app/immutable/assets/navigation.24972d74.css" rel="stylesheet">
		<link href="../_app/immutable/assets/SearchResults.fb8f4adf.css" rel="stylesheet">
		<link href="../_app/immutable/assets/_layout.8f434bed.css" rel="stylesheet">
		<link href="../_app/immutable/assets/_page.b054ce5e.css" rel="stylesheet">
		<link href="../_app/immutable/assets/hovers.7cc24a08.css" rel="stylesheet">
		<link rel="preload" as="font" type="font/woff2" href="../_app/immutable/assets/overpass-latin-300.3782c01a.woff2" crossorigin>
		<link rel="preload" as="font" type="font/woff2" href="../_app/immutable/assets/overpass-latin-600.0ca25556.woff2" crossorigin>
		<link rel="preload" as="font" type="font/woff2" href="../_app/immutable/assets/fira-mono-latin-400.8d4e0c52.woff2" crossorigin>
		<link rel="modulepreload" href="../_app/immutable/entry/start.bc2154d3.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/index.1cc2e0ff.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/singletons.3ca5ba59.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/paths.8c4e863e.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/control.e7f5239e.js">
		<link rel="modulepreload" href="../_app/immutable/entry/app.6b34a82d.js">
		<link rel="modulepreload" href="../_app/immutable/entry/_layout.svelte.c9a87e1c.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/stores.c28f0607.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/navigation.ad4a0c68.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/SearchResults.ee33e9c4.js">
		<link rel="modulepreload" href="../_app/immutable/entry/_layout.js.984db11e.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/_layout.da46b06b.js">
		<link rel="modulepreload" href="../_app/immutable/entry/docs-layout.svelte.7d27cb05.js">
		<link rel="modulepreload" href="../_app/immutable/entry/docs-_slug_-page.svelte.42d084fc.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/hovers.010bb342.js"><title>Form actions • Docs • SvelteKit</title><!-- HEAD_svelte-18gm73m_START --><meta name="twitter:title" content="SvelteKit docs"><meta name="twitter:description" content="Form actions • SvelteKit documentation"><meta name="Description" content="Form actions • SvelteKit documentation"><!-- HEAD_svelte-18gm73m_END -->
	</head>
	<body>
		<div>


<div style="display: none">
	<svg><symbol id="arrow-left" class="icon" viewBox="0 0 24 24"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></symbol><symbol id="arrow-right" class="icon" viewBox="0 0 24 24"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></symbol><symbol id="arrow-up" class="icon" viewBox="0 0 24 24"><line x1="12" y1="19" x2="12" y2="5"></line><polyline points="5 12 12 5 19 12"></polyline></symbol><symbol id="arrow-down" class="icon" viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"></line><polyline points="19 12 12 19 5 12"></polyline></symbol><symbol id="check" class="icon" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"></polyline></symbol><symbol id="close" class="icon" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></symbol><symbol id="download" class="icon" viewBox="0 0 24 24"><path d="M21 15V19A2 2 0 0 1 19 21H5A2 2 0 0 1 3 19V15"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></symbol><symbol id="edit" class="icon" viewBox="0 0 24 24"><path d="M20 14.66V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5.34"></path><polygon points="18 2 22 6 12 16 8 16 8 12 18 2"></polygon></symbol><symbol id="github" class="icon" viewBox="0 0 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.47715 2 2 6.47715 2 12C2 17.5229 6.47715 22 12 22C17.5229 22 22 17.5229 22 12C22 6.47715 17.5229 2 12 2ZM0 12C0 5.3726 5.3726 0 12 0C18.6274 0 24 5.3726 24 12C24 18.6274 18.6274 24 12 24C5.3726 24 0 18.6274 0 12Z" fill="currentColor" stroke="none"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M9.59162 22.7357C9.49492 22.6109 9.49492 21.4986 9.59162 19.399C8.55572 19.4347 7.90122 19.3628 7.62812 19.1833C7.21852 18.9139 6.80842 18.0833 6.44457 17.4979C6.08072 16.9125 5.27312 16.8199 4.94702 16.6891C4.62091 16.5582 4.53905 16.0247 5.84562 16.4282C7.15222 16.8316 7.21592 17.9303 7.62812 18.1872C8.04032 18.4441 9.02572 18.3317 9.47242 18.1259C9.91907 17.9201 9.88622 17.1538 9.96587 16.8503C10.0666 16.5669 9.71162 16.5041 9.70382 16.5018C9.26777 16.5018 6.97697 16.0036 6.34772 13.7852C5.71852 11.5669 6.52907 10.117 6.96147 9.49369C7.24972 9.07814 7.22422 8.19254 6.88497 6.83679C8.11677 6.67939 9.06732 7.06709 9.73672 7.99999C9.73737 8.00534 10.6143 7.47854 12.0001 7.47854C13.386 7.47854 13.8777 7.90764 14.2571 7.99999C14.6365 8.09234 14.94 6.36699 17.2834 6.83679C16.7942 7.79839 16.3844 8.99999 16.6972 9.49369C17.0099 9.98739 18.2372 11.5573 17.4833 13.7852C16.9807 15.2706 15.9927 16.1761 14.5192 16.5018C14.3502 16.5557 14.2658 16.6427 14.2658 16.7627C14.2658 16.9427 14.4942 16.9624 14.8233 17.8058C15.0426 18.368 15.0585 19.9739 14.8708 22.6234C14.3953 22.7445 14.0254 22.8257 13.7611 22.8673C13.2924 22.9409 12.7835 22.9822 12.2834 22.9982C11.7834 23.0141 11.6098 23.0123 10.9185 22.948C10.4577 22.9051 10.0154 22.8343 9.59162 22.7357Z" fill="currentColor" stroke="none"></path></symbol><symbol id="git-branch" class="icon" viewBox="0 0 24 24"><line x1="6" y1="3" x2="6" y2="15"></line><circle cx="18" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><path d="M18 9a9 9 0 0 1-9 9"></path></symbol><symbol id="log-in" class="icon" viewBox="0 0 24 24"><path d="M15 3H19A2 2 0 0 1 21 5V19A2 2 0 0 1 19 21H15"></path><polyline points="10 17 15 12 10 7"></polyline><line x1="15" y1="12" x2="3" y2="12"></line></symbol><symbol id="maximize" class="icon" viewBox="0 0 24 24"><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path></symbol><symbol id="maximize-2" class="icon" viewBox="0 0 24 24"><polyline points="15 3 21 3 21 9"></polyline><polyline points="9 21 3 21 3 15"></polyline><line x1="21" y1="3" x2="14" y2="10"></line><line x1="3" y1="21" x2="10" y2="14"></line></symbol><symbol id="menu" class="icon" viewBox="0 0 24 24"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></symbol><symbol id="message-square" class="icon" viewBox="0 0 24 24"><g transform="translate(0, 1)"><path d="M16.5 19H11V15H18V11H22V19H19.5L18 20.5L16.5 19Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2 3H18V15H8.5L6.5 17L4.5 15H2V3Z" fill="currentColor" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M6 11H9" stroke="white" stroke-width="1.5" stroke-linecap="round"></path><path d="M6 7H12" stroke="white" stroke-width="1.5" stroke-linecap="round"></path></g></symbol><symbol id="minus" class="icon" viewBox="0 0 24 24"><line x1="5" y1="12" x2="19" y2="12"></line></symbol><symbol id="plus" class="icon" viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></symbol><symbol id="save" class="icon" viewBox="0 0 24 24"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></symbol><symbol id="link" class="icon" viewBox="0 0 24 24"><path d="M9,7L6,7A2 2 0 0 0 6,17L9,17"></path><path d="M15,7L18,7A2 2 0 0 1 18,17L15,17"></path><path d="M7,12L17,12"></path></symbol><symbol id="chevron" class="icon" viewBox="0 0 24 24"><path d="M2,7 L12,17 L20,7"></path></symbol><symbol id="delete" class="icon" viewBox="0 0 24 24"><path fill="currentColor" stroke="none" d="M22 4.2h-5.6L15 1.6c-.1-.2-.4-.4-.7-.4H9.6c-.2 0-.5.2-.6.4L7.6 4.2H2c-.4 0-.8.4-.8.8s.4.8.8.8h1.8V22c0 .4.3.8.8.8h15c.4 0 .8-.3.8-.8V5.8H22c.4 0 .8-.3.8-.8s-.4-.8-.8-.8zM10.8 16.5c0 .4-.3.8-.8.8s-.8-.3-.8-.8V10c0-.4.3-.8.8-.8s.8.3.8.8v6.5zm4 0c0 .4-.3.8-.8.8s-.8-.3-.8-.8V10c0-.4.3-.8.8-.8s.8.3.8.8v6.5z"></path></symbol></svg></div>



<a href="#main" class="svelte-1rscj97">Skip to main content</a>





<nav aria-label="Primary" class="svelte-173nfcg visible"><a href="/" class="nav-spot home svelte-173nfcg" title="Homepage" style="background-image: url(/_app/immutable/assets/svelte-logo.5c5d7d20.svg)">Home</a>

	<button aria-label="Toggle menu" aria-expanded="false" class="menu-toggle svelte-173nfcg">


<svg class="icon svelte-5yec89" width="1em" height="1em"><use xlink:href="#menu"></use></svg></button>

	<ul class="svelte-173nfcg">
			<li class="svelte-tdqbhp"><form class="search-container svelte-9kfram" action="/search"><input value="" type="search" name="q" placeholder="Search" aria-label="Search" spellcheck="false" class="svelte-9kfram">

	
</form></li></ul>

	<ul class="external svelte-173nfcg"><li><a aria-current="true" href="/docs" class="svelte-1iex17r">Docs</a></li>
		<li><a href="/faq" class="svelte-1iex17r">FAQ</a></li>

		<li aria-hidden="true" class="svelte-tdqbhp"><span class="separator svelte-tdqbhp"></span></li>

		<li><a href="https://svelte.dev" rel="external" class="svelte-1iex17r">Svelte</a></li>

		<li><a href="https://svelte.dev/chat" title="Discord Chat" rel="external" class="svelte-1iex17r"><span class="small svelte-tdqbhp">Discord</span>
			<span class="large svelte-tdqbhp">


<svg class="icon svelte-5yec89" width="20" height="20"><use xlink:href="#message-square"></use></svg></span></a></li>

		<li><a href="https://github.com/sveltejs/kit" title="GitHub Repo" rel="external" class="svelte-1iex17r"><span class="small svelte-tdqbhp">GitHub</span>
			<span class="large svelte-tdqbhp">


<svg class="icon svelte-5yec89" width="20" height="20"><use xlink:href="#github"></use></svg></span></a></li>
	</ul>
</nav>

<main id="main" class="svelte-tdqbhp" style="--banner-footer-height: 48px;"><div class="container svelte-1rc2dnd"><div class="page svelte-1rc2dnd">

<div class="text content svelte-zelrq3"><h1>Form actions</h1>

	<a class="edit svelte-zelrq3" href="https://github.com/sveltejs/kit/edit/master/documentation/docs/20-core-concepts/30-form-actions.md">


<svg class="icon svelte-5yec89" width="50" height="50"><use xlink:href="#edit"></use></svg> Edit this page on GitHub
	</a>

	<section><!-- HTML_TAG_START --><p>A <code>+page.server.js</code> file can export <em>actions</em>, which allow you to <code>POST</code> data to the server using the <code>&lt;form&gt;</code> element.</p>
<p>When using <code>&lt;form&gt;</code>, client-side JavaScript is optional, but you can easily <em>progressively enhance</em> your form interactions with JavaScript to provide the best user experience.</p>
<h2 id="default-actions">Default actions<a href="#default-actions" class="permalink"><span class="visually-hidden">permalink</span></a></h2><p>In the simplest case, a page declares a <code>default</code> action:</p>
<div class="js-version code-block"><span class="filename">src/routes/login/+page.server.js</span><pre class="shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: var(--shiki-token-comment)">/** </span><span style="color: var(--shiki-token-keyword)">@type</span><span style="color: var(--shiki-token-comment)"> </span><span style="color: var(--shiki-token-function)">{import(&apos;./$types&apos;).<a href="/docs/types#public-types-actions">Actions</a>}</span><span style="color: var(--shiki-token-comment)"> */</span></div><div class='line'><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const actions: <a href="/docs/types#public-types-actions">Actions</a>' >actions</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> {</span></div><div class='line'><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)"><data-lsp lsp='(property) default: (event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;{}, string | null>) => Promise&amp;lt;void>' >default</data-lsp></span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">async</span><span style="color: var(--shiki-color-text)"> (<data-lsp lsp='(parameter) event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;{}, string | null>' >event</data-lsp>) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></div><div class='line'><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// TODO log the user in</span></div><div class='line'><span style="color: var(--shiki-color-text)">  }</span></div><div class='line'><span style="color: var(--shiki-color-text)">};</span></div></code></div></pre></div><div class="ts-version code-block"><span class="filename">src/routes/login/+page.server.ts</span><pre class="shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">type</span><span style="color: var(--shiki-color-text)"> { <data-lsp lsp='(alias) type <a href="/docs/types#public-types-actions">Actions</a> = {&amp;#10;    [x: string]: Kit.<a href="/docs/types#public-types-action">Action</a>&amp;lt;{}, void | Record&amp;lt;string, any>, string | null>;&amp;#10;}&amp;#10;import <a href="/docs/types#public-types-actions">Actions</a>' ><a href="/docs/types#public-types-actions">Actions</a></data-lsp> } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&apos;./$types&apos;</span><span style="color: var(--shiki-color-text)">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const actions: {&amp;#10;    default: (event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;{}, string | null>) => Promise&amp;lt;void>;&amp;#10;}' >actions</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> {</span></div><div class='line'><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)"><data-lsp lsp='(property) default: (event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;{}, string | null>) => Promise&amp;lt;void>' >default</data-lsp></span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">async</span><span style="color: var(--shiki-color-text)"> (<data-lsp lsp='(parameter) event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;{}, string | null>' >event</data-lsp>) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></div><div class='line'><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// TODO log the user in</span></div><div class='line'><span style="color: var(--shiki-color-text)">  }</span></div><div class='line'><span style="color: var(--shiki-color-text)">} satisfies <data-lsp lsp='(alias) type <a href="/docs/types#public-types-actions">Actions</a> = {&amp;#10;    [x: string]: Kit.<a href="/docs/types#public-types-action">Action</a>&amp;lt;{}, void | Record&amp;lt;string, any>, string | null>;&amp;#10;}&amp;#10;import <a href="/docs/types#public-types-actions">Actions</a>' ><a href="/docs/types#public-types-actions">Actions</a></data-lsp>;</span></div></code></div></pre></div><p>To invoke this action from the <code>/login</code> page, just add a <code>&lt;form&gt;</code> — no JavaScript needed:</p>
<div class="code-block"><span class="filename">src/routes/login/+page.svelte</span><pre class='language-svelte'><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>POST<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">></span></span>
    Email
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">></span></span>
    Password
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>Log in<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></code></pre></div><p>If someone were to click the button, the browser would send the form data via <code>POST</code> request to the server, running the default action.</p>
<blockquote>
<p>Actions always use <code>POST</code> requests, since <code>GET</code> requests should never have side-effects.</p>
</blockquote>
<p>We can also invoke the action from other pages (for example if there&#39;s a login widget in the nav in the root layout) by adding the <code>action</code> attribute, pointing to the page:</p>
<div class="code-block"><span class="filename">src/routes/+layout.svelte</span><pre class='language-markup'><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>POST<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/login<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token comment wrapped" style="--indent: 2ch">  &lt;!-- content --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></code></pre></div><h2 id="named-actions">Named actions<a href="#named-actions" class="permalink"><span class="visually-hidden">permalink</span></a></h2><p>Instead of one <code>default</code> action, a page can have as many named actions as it needs:</p>
<div class="code-block"><span class="filename">src/routes/login/+page.server.js</span><pre class="language-diff"><code>/** @type {import(&#39;./$types&#39;).<a href="/docs/types#public-types-actions">Actions</a>} */
export const actions = {
<span class="deleted">	default: async (event) =&gt; {
</span><span class="inserted">	login: async (event) =&gt; {
</span>    // TODO log the user in
  },
<span class="inserted">	register: async (event) =&gt; {
</span><span class="inserted">		// TODO register the user
</span><span class="inserted">	}
</span>};
</code></pre></div><p>To invoke a named action, add a query parameter with the name prefixed by a <code>/</code> character:</p>
<div class="code-block"><span class="filename">src/routes/login/+page.svelte</span><pre class='language-svelte'><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>POST<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>?/register<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></code></pre></div><div class="code-block"><span class="filename">src/routes/+layout.svelte</span><pre class='language-svelte'><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>POST<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/login?/register<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></code></pre></div><p>As well as the <code>action</code> attribute, we can use the <code>formaction</code> attribute on a button to <code>POST</code> the same form data to a different action than the parent <code>&lt;form&gt;</code>:</p>
<div class="code-block"><span class="filename">src/routes/login/+page.svelte</span><pre class="language-diff"><code><span class="deleted">&lt;form method=&quot;POST&quot;&gt;
</span><span class="inserted">&lt;form method=&quot;POST&quot; action=&quot;?/login&quot;&gt;
</span>  &lt;label&gt;
    Email
    &lt;input name=&quot;email&quot; type=&quot;email&quot;&gt;
  &lt;/label&gt;
  &lt;label&gt;
    Password
    &lt;input name=&quot;password&quot; type=&quot;password&quot;&gt;
  &lt;/label&gt;
  &lt;button&gt;Log in&lt;/button&gt;
<span class="inserted">	&lt;button formaction=&quot;?/register&quot;&gt;Register&lt;/button&gt;
</span>&lt;/form&gt;
</code></pre></div><blockquote>
<p>We can&#39;t have default actions next to named actions, because if you POST to a named action without a redirect, the query parameter is persisted in the URL, which means the next default POST would go through the named action from before.</p>
</blockquote>
<h2 id="anatomy-of-an-action">Anatomy of an action<a href="#anatomy-of-an-action" class="permalink"><span class="visually-hidden">permalink</span></a></h2><p>Each action receives a <code><a href="/docs/types#public-types-requestevent">RequestEvent</a></code> object, allowing you to read the data with <code>request.formData()</code>. After processing the request (for example, logging the user in by setting a cookie), the action can respond with data that will be available through the <code>form</code> property on the corresponding page and through <code>$page.form</code> app-wide until the next update.</p>
<div class="js-version code-block"><span class="filename">src/routes/login/+page.server.js</span><pre class="shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: var(--shiki-token-comment)">/** </span><span style="color: var(--shiki-token-keyword)">@type</span><span style="color: var(--shiki-token-comment)"> </span><span style="color: var(--shiki-token-function)">{import(&apos;./$types&apos;).PageServerLoad}</span><span style="color: var(--shiki-token-comment)"> */</span></div><div class='line'><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">async</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)"><data-lsp lsp='function load(event: <a href="/docs/types#public-types-serverloadevent">ServerLoadEvent</a>&amp;lt;{}, Record&amp;lt;string, any>, string | null>): <a href="/docs/types#private-types-maybepromise">MaybePromise</a>&amp;lt;void | Record&amp;lt;string, any>>' >load</data-lsp></span><span style="color: var(--shiki-color-text)">({ <data-lsp lsp='(parameter) cookies: <a href="/docs/types#public-types-cookies">Cookies</a>' >cookies</data-lsp> }) {</span></div><div class='line'><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const user: any' >user</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='any' >db</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='any' >getUserFromSession</data-lsp><data-err></data-err></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(parameter) cookies: <a href="/docs/types#public-types-cookies">Cookies</a>' >cookies</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='(method) <a href="/docs/types#public-types-cookies">Cookies</a>.get(name: string, opts?: CookieParseOptions | undefined): string | undefined' >get</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&apos;sessionid&apos;</span><span style="color: var(--shiki-color-text)">));</span></div><span class="error"><span>Cannot find name 'db'.</span><span class="code">2304</span></span><span class="error-behind">Cannot find name 'db'.</span><div class='line'><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> { <data-lsp lsp='(property) user: any' >user</data-lsp> };</span></div><span class="error"><span>Cannot find name 'db'.</span><span class="code">2304</span></span><span class="error-behind">Cannot find name 'db'.</span><div class='line'><span style="color: var(--shiki-color-text)">}</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: var(--shiki-token-comment)">/** </span><span style="color: var(--shiki-token-keyword)">@type</span><span style="color: var(--shiki-token-comment)"> </span><span style="color: var(--shiki-token-function)">{import(&apos;./$types&apos;).<a href="/docs/types#public-types-actions">Actions</a>}</span><span style="color: var(--shiki-token-comment)"> */</span></div><div class='line'><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const actions: <a href="/docs/types#public-types-actions">Actions</a>' >actions</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> {</span></div><div class='line'><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)"><data-lsp lsp='(property) login: ({ cookies, request }: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;{}, string | null>) => Promise&amp;lt;{&amp;#10;    success: boolean;&amp;#10;}>' >login</data-lsp></span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">async</span><span style="color: var(--shiki-color-text)"> ({ <data-lsp lsp='(parameter) cookies: <a href="/docs/types#public-types-cookies">Cookies</a>' >cookies</data-lsp></span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> <data-lsp lsp='(parameter) request: Request' >request</data-lsp> }) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></div><div class='line'><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const data: FormData' >data</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(parameter) request: Request' >request</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='(method) Body.formData(): Promise&amp;lt;FormData>' >formData</data-lsp></span><span style="color: var(--shiki-color-text)">();</span></div><div class='line'><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const email: FormDataEntryValue | null' >email</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const data: FormData' >data</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='(method) FormData.get(name: string): FormDataEntryValue | null' >get</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&apos;email&apos;</span><span style="color: var(--shiki-color-text)">);</span></div><div class='line'><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const password: FormDataEntryValue | null' >password</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const data: FormData' >data</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='(method) FormData.get(name: string): FormDataEntryValue | null' >get</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&apos;password&apos;</span><span style="color: var(--shiki-color-text)">);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const user: any' >user</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='any' >db</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='any' >getUser</data-lsp></span><span style="color: var(--shiki-color-text)">(<data-lsp lsp='const email: FormDataEntryValue | null' >email</data-lsp>);</span></div><div class='line'><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(parameter) cookies: <a href="/docs/types#public-types-cookies">Cookies</a>' >cookies</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='(method) <a href="/docs/types#public-types-cookies">Cookies</a>.set(name: string, value: string, opts?: CookieSerializeOptions | undefined): void' >set</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&apos;sessionid&apos;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='any' >db</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='any' >createSession</data-lsp></span><span style="color: var(--shiki-color-text)">(<data-lsp lsp='const user: any' >user</data-lsp>));</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> { <data-lsp lsp='(property) success: boolean' >success</data-lsp></span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">true</span><span style="color: var(--shiki-color-text)"> };</span></div><div class='line'><span style="color: var(--shiki-color-text)">  }</span><span style="color: var(--shiki-token-punctuation)">,</span></div><div class='line'><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)"><data-lsp lsp='(property) register: (event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;{}, string | null>) => Promise&amp;lt;void>' >register</data-lsp></span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">async</span><span style="color: var(--shiki-color-text)"> (<data-lsp lsp='(parameter) event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;{}, string | null>' >event</data-lsp>) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></div><div class='line'><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// TODO register the user</span></div><div class='line'><span style="color: var(--shiki-color-text)">  }</span></div><div class='line'><span style="color: var(--shiki-color-text)">};</span></div></code></div></pre></div><div class="ts-version code-block"><span class="filename">src/routes/login/+page.server.ts</span><pre class="shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">type</span><span style="color: var(--shiki-color-text)"> { <data-lsp lsp='(alias) type PageServerLoad = Kit.<a href="/docs/types#public-types-serverload">ServerLoad</a>&amp;lt;{}, Record&amp;lt;string, any>, void | Record&amp;lt;string, any>, string | null>&amp;#10;import PageServerLoad' >PageServerLoad</data-lsp></span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> <data-lsp lsp='(alias) type <a href="/docs/types#public-types-actions">Actions</a> = {&amp;#10;    [x: string]: Kit.<a href="/docs/types#public-types-action">Action</a>&amp;lt;{}, void | Record&amp;lt;string, any>, string | null>;&amp;#10;}&amp;#10;import <a href="/docs/types#public-types-actions">Actions</a>' ><a href="/docs/types#public-types-actions">Actions</a></data-lsp> } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&apos;./$types&apos;</span><span style="color: var(--shiki-color-text)">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const load: ({ cookies }: <a href="/docs/types#public-types-serverloadevent">ServerLoadEvent</a>&amp;lt;{}, Record&amp;lt;string, any>, string | null>) => Promise&amp;lt;{&amp;#10;    user: any;&amp;#10;}>' >load</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-keyword)">async<data-err></data-err></span><span style="color: var(--shiki-color-text)"> ({ <data-lsp lsp='(parameter) cookies: <a href="/docs/types#public-types-cookies">Cookies</a>' >cookies</data-lsp> }) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></div><span class="error"><span>Cannot find name 'db'.</span><span class="code">2304</span></span><span class="error-behind">Cannot find name 'db'.</span><div class='line'><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const user: any' >user</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='any' >db</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='any' >getUserFromSession</data-lsp><data-err></data-err></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(parameter) cookies: <a href="/docs/types#public-types-cookies">Cookies</a>' >cookies</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='(method) <a href="/docs/types#public-types-cookies">Cookies</a>.get(name: string, opts?: CookieParseOptions | undefined): string | undefined' >get</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&apos;sessionid&apos;</span><span style="color: var(--shiki-color-text)">));</span></div><span class="error"><span>Cannot find name 'db'.</span><span class="code">2304</span></span><span class="error-behind">Cannot find name 'db'.</span><div class='line'><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> { <data-lsp lsp='(property) user: any' >user</data-lsp> };</span></div><div class='line'><span style="color: var(--shiki-color-text)">}) satisfies <data-lsp lsp='(alias) type PageServerLoad = Kit.<a href="/docs/types#public-types-serverload">ServerLoad</a>&amp;lt;{}, Record&amp;lt;string, any>, void | Record&amp;lt;string, any>, string | null>&amp;#10;import PageServerLoad' >PageServerLoad</data-lsp>;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const actions: {&amp;#10;    login: ({ cookies, request }: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;{}, string | null>) => Promise&amp;lt;{&amp;#10;        success: boolean;&amp;#10;    }>;&amp;#10;    register: (event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;{}, string | null>) => Promise&amp;lt;...>;&amp;#10;}' >actions</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> {</span></div><div class='line'><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)"><data-lsp lsp='(property) login: ({ cookies, request }: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;{}, string | null>) => Promise&amp;lt;{&amp;#10;    success: boolean;&amp;#10;}>' >login</data-lsp></span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">async</span><span style="color: var(--shiki-color-text)"> ({ <data-lsp lsp='(parameter) cookies: <a href="/docs/types#public-types-cookies">Cookies</a>' >cookies</data-lsp></span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> <data-lsp lsp='(parameter) request: Request' >request</data-lsp> }) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></div><div class='line'><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const data: FormData' >data</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(parameter) request: Request' >request</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='(method) Body.formData(): Promise&amp;lt;FormData>' >formData</data-lsp></span><span style="color: var(--shiki-color-text)">();</span></div><div class='line'><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const email: FormDataEntryValue | null' >email</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const data: FormData' >data</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='(method) FormData.get(name: string): FormDataEntryValue | null' >get</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&apos;email&apos;</span><span style="color: var(--shiki-color-text)">);</span></div><div class='line'><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const password: FormDataEntryValue | null' >password</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const data: FormData' >data</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='(method) FormData.get(name: string): FormDataEntryValue | null' >get</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&apos;password&apos;</span><span style="color: var(--shiki-color-text)">);</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const user: any' >user</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='any' >db</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='any' >getUser</data-lsp></span><span style="color: var(--shiki-color-text)">(<data-lsp lsp='const email: FormDataEntryValue | null' >email</data-lsp>);</span></div><div class='line'><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(parameter) cookies: <a href="/docs/types#public-types-cookies">Cookies</a>' >cookies</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='(method) <a href="/docs/types#public-types-cookies">Cookies</a>.set(name: string, value: string, opts?: CookieSerializeOptions | undefined): void' >set</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&apos;sessionid&apos;</span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='any' >db</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='any' >createSession</data-lsp></span><span style="color: var(--shiki-color-text)">(<data-lsp lsp='const user: any' >user</data-lsp>));</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> { <data-lsp lsp='(property) success: boolean' >success</data-lsp></span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">true</span><span style="color: var(--shiki-color-text)"> };</span></div><div class='line'><span style="color: var(--shiki-color-text)">  }</span><span style="color: var(--shiki-token-punctuation)">,</span></div><div class='line'><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)"><data-lsp lsp='(property) register: (event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;{}, string | null>) => Promise&amp;lt;void>' >register</data-lsp></span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">async</span><span style="color: var(--shiki-color-text)"> (<data-lsp lsp='(parameter) event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;{}, string | null>' >event</data-lsp>) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></div><div class='line'><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-comment)">// TODO register the user</span></div><div class='line'><span style="color: var(--shiki-color-text)">  }</span></div><div class='line'><span style="color: var(--shiki-color-text)">} satisfies <data-lsp lsp='(alias) type <a href="/docs/types#public-types-actions">Actions</a> = {&amp;#10;    [x: string]: Kit.<a href="/docs/types#public-types-action">Action</a>&amp;lt;{}, void | Record&amp;lt;string, any>, string | null>;&amp;#10;}&amp;#10;import <a href="/docs/types#public-types-actions">Actions</a>' ><a href="/docs/types#public-types-actions">Actions</a></data-lsp>;</span></div></code></div></pre></div><div class="js-version code-block"><span class="filename">src/routes/login/+page.svelte</span><pre class='language-svelte'><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token comment wrapped" style="--indent: 2ch">  /** @type {import('./$types').<a href="/docs/types#app-pagedata">PageData</a>} */</span>  <span class="token keyword">export</span> <span class="token keyword">let</span> data<span class="token punctuation">;</span>
<span class="token comment wrapped" style="--indent: 0ch"></span><span class="token comment wrapped" style="--indent: 2ch">  /** @type {import('./$types').ActionData} */</span>  <span class="token keyword">export</span> <span class="token keyword">let</span> form<span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token language-javascript"><span class="token punctuation">{</span>#<span class="token keyword">if</span> form<span class="token operator">?.</span>success<span class="token punctuation">}</span></span>
<span class="token comment wrapped" style="--indent: 2ch">  &lt;!-- this message is ephemeral; it exists because the page was rendered in</span><span class="token comment wrapped" style="--indent: 7ch">       response to a form submission. it will vanish if the user reloads --></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Successfully logged in! Welcome back, <span class="token language-javascript"><span class="token punctuation">{</span>data<span class="token punctuation">.</span>user<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token language-javascript"><span class="token punctuation">{</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token punctuation">}</span></span></code></pre></div><div class="ts-version code-block"><span class="filename">src/routes/login/+page.svelte</span><pre class='language-svelte'><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> type <span class="token punctuation">{</span> <a href="/docs/types#app-pagedata">PageData</a><span class="token punctuation">,</span> ActionData <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./$types'</span><span class="token punctuation">;</span>

  <span class="token keyword">export</span> <span class="token keyword">let</span> <span class="token literal-property property">data</span><span class="token operator">:</span> <a href="/docs/types#app-pagedata">PageData</a><span class="token punctuation">;</span>

  <span class="token keyword">export</span> <span class="token keyword">let</span> <span class="token literal-property property">form</span><span class="token operator">:</span> ActionData<span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token language-javascript"><span class="token punctuation">{</span>#<span class="token keyword">if</span> form<span class="token operator">?.</span>success<span class="token punctuation">}</span></span>
<span class="token comment wrapped" style="--indent: 2ch">  &lt;!-- this message is ephemeral; it exists because the page was rendered in</span><span class="token comment wrapped" style="--indent: 7ch">       response to a form submission. it will vanish if the user reloads --></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Successfully logged in! Welcome back, <span class="token language-javascript"><span class="token punctuation">{</span>data<span class="token punctuation">.</span>user<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token language-javascript"><span class="token punctuation">{</span><span class="token operator">/</span><span class="token keyword">if</span><span class="token punctuation">}</span></span></code></pre></div><h3 id="anatomy-of-an-action-validation-errors">Validation errors<a href="#anatomy-of-an-action-validation-errors" class="permalink"><span class="visually-hidden">permalink</span></a></h3><p>If the request couldn&#39;t be processed because of invalid data, you can return validation errors — along with the previously submitted form values — back to the user so that they can try again. The <code>fail</code> function lets you return an HTTP status code (typically 400 or 422, in the case of validation errors) along with the data. The status code is available through <code>$page.status</code> and the data through <code>form</code>:</p>
<div class="code-block"><span class="filename">src/routes/login/+page.server.js</span><pre class="language-diff"><code><span class="inserted">import { fail } from &#39;@sveltejs/kit&#39;;
</span>
/** @type {import(&#39;./$types&#39;).<a href="/docs/types#public-types-actions">Actions</a>} */
export const actions = {
  login: async ({ cookies, request }) =&gt; {
    const data = await request.formData();
    const email = data.get(&#39;email&#39;);
    const password = data.get(&#39;password&#39;);

<span class="inserted">		if (!email) {
</span><span class="inserted">			return fail(400, { email, missing: true });
</span><span class="inserted">		}
</span>
    const user = await db.getUser(email);

<span class="inserted">		if (!user || user.password !== hash(password)) {
</span><span class="inserted">			return fail(400, { email, incorrect: true });
</span><span class="inserted">		}
</span>
    cookies.set(&#39;sessionid&#39;, await db.createSession(user));

    return { success: true };
  },
  register: async (event) =&gt; {
    // TODO register the user
  }
};
</code></pre></div><blockquote>
<p>Note that as a precaution, we only return the email back to the page — not the password.</p>
</blockquote>
<div class="code-block"><span class="filename">src/routes/login/+page.svelte</span><pre class="language-diff"><code>&lt;form method=&quot;POST&quot; action=&quot;?/login&quot;&gt;
<span class="inserted">	{#if form?.missing}&lt;p class=&quot;error&quot;&gt;The email field is required&lt;/p&gt;{/if}
</span><span class="inserted">	{#if form?.incorrect}&lt;p class=&quot;error&quot;&gt;Invalid credentials!&lt;/p&gt;{/if}
</span>  &lt;label&gt;
    Email
<span class="deleted">		&lt;input name=&quot;email&quot; type=&quot;email&quot;&gt;
</span><span class="inserted">		&lt;input name=&quot;email&quot; type=&quot;email&quot; value={form?.email ?? &#39;&#39;}&gt;
</span>  &lt;/label&gt;
  &lt;label&gt;
    Password
    &lt;input name=&quot;password&quot; type=&quot;password&quot;&gt;
  &lt;/label&gt;
  &lt;button&gt;Log in&lt;/button&gt;
  &lt;button formaction=&quot;?/register&quot;&gt;Register&lt;/button&gt;
&lt;/form&gt;
</code></pre></div><p>The returned data must be serializable as JSON. Beyond that, the structure is entirely up to you. For example, if you had multiple forms on the page, you could distinguish which <code>&lt;form&gt;</code> the returned <code>form</code> data referred to with an <code>id</code> property or similar.</p>
<h3 id="anatomy-of-an-action-redirects">Redirects<a href="#anatomy-of-an-action-redirects" class="permalink"><span class="visually-hidden">permalink</span></a></h3><p>Redirects (and errors) work exactly the same as in <a href="load#redirects"><code>load</code></a>:</p>
<div class="code-block"><span class="filename">src/routes/login/+page.server.js</span><pre class="language-diff"><code><span class="inserted">import { fail, redirect } from &#39;@sveltejs/kit&#39;;
</span>
/** @type {import(&#39;./$types&#39;).<a href="/docs/types#public-types-actions">Actions</a>} */
export const actions = {
<span class="inserted">	login: async ({ cookies, request, url }) =&gt; {
</span>    const data = await request.formData();
    const email = data.get(&#39;email&#39;);
    const password = data.get(&#39;password&#39;);

    const user = await db.getUser(email);
    if (!user) {
      return fail(400, { email, missing: true });
    }

    if (user.password !== hash(password)) {
      return fail(400, { email, incorrect: true });
    }

    cookies.set(&#39;sessionid&#39;, await db.createSession(user));

<span class="inserted">		if (url.searchParams.has(&#39;redirectTo&#39;)) {
</span><span class="inserted">			throw redirect(303, url.searchParams.get(&#39;redirectTo&#39;));
</span><span class="inserted">		}
</span>
    return { success: true };
  },
  register: async (event) =&gt; {
    // TODO register the user
  }
};
</code></pre></div><h2 id="loading-data">Loading data<a href="#loading-data" class="permalink"><span class="visually-hidden">permalink</span></a></h2><p>After an action runs, the page will be re-rendered (unless a redirect or an unexpected error occurs), with the action&#39;s return value available to the page as the <code>form</code> prop. This means that your page&#39;s <code>load</code> functions will run after the action completes.</p>
<p>Note that <code>handle</code> runs before the action is invoked, and does not re-run before the <code>load</code> functions. This means that if, for example, you use <code>handle</code> to populate <code>event.locals</code> based on a cookie, you must update <code>event.locals</code> when you set or delete the cookie in an action:</p>
<div class="js-version code-block"><span class="filename">src/hooks.server.js</span><pre class="shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: var(--shiki-token-comment)">/** </span><span style="color: var(--shiki-token-keyword)">@type</span><span style="color: var(--shiki-token-comment)"> </span><span style="color: var(--shiki-token-function)">{import(&apos;@sveltejs/kit&apos;).<a href="/docs/types#public-types-handle">Handle</a>}</span><span style="color: var(--shiki-token-comment)"> */</span></div><div class='line'><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">async</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)"><data-lsp lsp='function handle(input: {&amp;#10;    event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;Partial&amp;lt;Record&amp;lt;string, string>>, string | null>;&amp;#10;    resolve(event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;Partial&amp;lt;Record&amp;lt;string, string>>, string | null>, opts?: <a href="/docs/types#public-types-resolveoptions">ResolveOptions</a> | undefined): <a href="/docs/types#private-types-maybepromise">MaybePromise</a>&amp;lt;...>;&amp;#10;}): <a href="/docs/types#private-types-maybepromise">MaybePromise</a>&amp;lt;...>' >handle</data-lsp></span><span style="color: var(--shiki-color-text)">({ <data-lsp lsp='(parameter) event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;Partial&amp;lt;Record&amp;lt;string, string>>, string | null>' >event</data-lsp></span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> <data-lsp lsp='(parameter) resolve: (event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;Partial&amp;lt;Record&amp;lt;string, string>>, string | null>, opts?: <a href="/docs/types#public-types-resolveoptions">ResolveOptions</a> | undefined) => <a href="/docs/types#private-types-maybepromise">MaybePromise</a>&amp;lt;Response>' >resolve</data-lsp> }) {</span></div><div class='line'><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(parameter) event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;Partial&amp;lt;Record&amp;lt;string, string>>, string | null>' >event</data-lsp></span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(property) <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;Partial&amp;lt;Record&amp;lt;string, string>>, string | null>.locals: App.<a href="/docs/types#app-locals">Locals</a>' >locals</data-lsp></span><span style="color: var(--shiki-color-text)">.<data-lsp lsp='(property) App.<a href="/docs/types#app-locals">Locals</a>.user: {&amp;#10;    name: string;&amp;#10;} | null' >user</data-lsp> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)"><data-lsp lsp='function getUser(sessionid: string | undefined): {&amp;#10;    name: string;&amp;#10;}' >getUser</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(parameter) event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;Partial&amp;lt;Record&amp;lt;string, string>>, string | null>' >event</data-lsp></span><span style="color: var(--shiki-token-function)">.</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(property) <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;Partial&amp;lt;Record&amp;lt;string, string>>, string | null>.cookies: <a href="/docs/types#public-types-cookies">Cookies</a>' >cookies</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='(method) <a href="/docs/types#public-types-cookies">Cookies</a>.get(name: string, opts?: CookieParseOptions | undefined): string | undefined' >get</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&apos;sessionid&apos;</span><span style="color: var(--shiki-color-text)">));</span></div><div class='line'><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)"><data-lsp lsp='(parameter) resolve: (event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;Partial&amp;lt;Record&amp;lt;string, string>>, string | null>, opts?: <a href="/docs/types#public-types-resolveoptions">ResolveOptions</a> | undefined) => <a href="/docs/types#private-types-maybepromise">MaybePromise</a>&amp;lt;Response>' >resolve</data-lsp></span><span style="color: var(--shiki-color-text)">(<data-lsp lsp='(parameter) event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;Partial&amp;lt;Record&amp;lt;string, string>>, string | null>' >event</data-lsp>);</span></div><div class='line'><span style="color: var(--shiki-color-text)">}</span></div></code></div></pre></div><div class="ts-version code-block"><span class="filename">src/hooks.server.ts</span><pre class="shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">type</span><span style="color: var(--shiki-color-text)"> { <data-lsp lsp='(alias) interface <a href="/docs/types#public-types-handle">Handle</a>&amp;#10;import <a href="/docs/types#public-types-handle">Handle</a>' ><a href="/docs/types#public-types-handle">Handle</a></data-lsp> } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&apos;@sveltejs/kit&apos;</span><span style="color: var(--shiki-color-text)">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const handle: ({ event, resolve }: {&amp;#10;    event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;Partial&amp;lt;Record&amp;lt;string, string>>, string | null>;&amp;#10;    resolve(event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;Partial&amp;lt;Record&amp;lt;string, string>>, string | null>, opts?: <a href="/docs/types#public-types-resolveoptions">ResolveOptions</a> | undefined): <a href="/docs/types#private-types-maybepromise">MaybePromise</a>&amp;lt;...>;&amp;#10;}) => Promise&amp;lt;...>' >handle</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> (</span><span style="color: var(--shiki-token-keyword)">async</span><span style="color: var(--shiki-color-text)"> ({ <data-lsp lsp='(parameter) event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;Partial&amp;lt;Record&amp;lt;string, string>>, string | null>' >event</data-lsp></span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> <data-lsp lsp='(parameter) resolve: (event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;Partial&amp;lt;Record&amp;lt;string, string>>, string | null>, opts?: <a href="/docs/types#public-types-resolveoptions">ResolveOptions</a> | undefined) => <a href="/docs/types#private-types-maybepromise">MaybePromise</a>&amp;lt;Response>' >resolve</data-lsp> }) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></div><div class='line'><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(parameter) event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;Partial&amp;lt;Record&amp;lt;string, string>>, string | null>' >event</data-lsp></span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(property) <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;Partial&amp;lt;Record&amp;lt;string, string>>, string | null>.locals: App.<a href="/docs/types#app-locals">Locals</a>' >locals</data-lsp></span><span style="color: var(--shiki-color-text)">.<data-lsp lsp='(property) App.<a href="/docs/types#app-locals">Locals</a>.user: {&amp;#10;    name: string;&amp;#10;} | null' >user</data-lsp> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">await</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)"><data-lsp lsp='function getUser(sessionid: string | undefined): {&amp;#10;    name: string;&amp;#10;}' >getUser</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(parameter) event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;Partial&amp;lt;Record&amp;lt;string, string>>, string | null>' >event</data-lsp></span><span style="color: var(--shiki-token-function)">.</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(property) <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;Partial&amp;lt;Record&amp;lt;string, string>>, string | null>.cookies: <a href="/docs/types#public-types-cookies">Cookies</a>' >cookies</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='(method) <a href="/docs/types#public-types-cookies">Cookies</a>.get(name: string, opts?: CookieParseOptions | undefined): string | undefined' >get</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&apos;sessionid&apos;</span><span style="color: var(--shiki-color-text)">));</span></div><div class='line'><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)"><data-lsp lsp='(parameter) resolve: (event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;Partial&amp;lt;Record&amp;lt;string, string>>, string | null>, opts?: <a href="/docs/types#public-types-resolveoptions">ResolveOptions</a> | undefined) => <a href="/docs/types#private-types-maybepromise">MaybePromise</a>&amp;lt;Response>' >resolve</data-lsp></span><span style="color: var(--shiki-color-text)">(<data-lsp lsp='(parameter) event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;Partial&amp;lt;Record&amp;lt;string, string>>, string | null>' >event</data-lsp>);</span></div><div class='line'><span style="color: var(--shiki-color-text)">}) satisfies <data-lsp lsp='(alias) interface <a href="/docs/types#public-types-handle">Handle</a>&amp;#10;import <a href="/docs/types#public-types-handle">Handle</a>' ><a href="/docs/types#public-types-handle">Handle</a></data-lsp>;</span></div></code></div></pre></div><div class="js-version code-block"><span class="filename">src/routes/account/+page.server.js</span><pre class="shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: var(--shiki-token-comment)">/** </span><span style="color: var(--shiki-token-keyword)">@type</span><span style="color: var(--shiki-token-comment)"> </span><span style="color: var(--shiki-token-function)">{import(&apos;./$types&apos;).PageServerLoad}</span><span style="color: var(--shiki-token-comment)"> */</span></div><div class='line'><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)"><data-lsp lsp='function load(event: <a href="/docs/types#public-types-serverloadevent">ServerLoadEvent</a>&amp;lt;{}, Record&amp;lt;string, any>, string | null>): <a href="/docs/types#private-types-maybepromise">MaybePromise</a>&amp;lt;void | Record&amp;lt;string, any>>' >load</data-lsp></span><span style="color: var(--shiki-color-text)">(<data-lsp lsp='(parameter) event: <a href="/docs/types#public-types-serverloadevent">ServerLoadEvent</a>&amp;lt;{}, Record&amp;lt;string, any>, string | null>' >event</data-lsp>) {</span></div><div class='line'><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> {</span></div><div class='line'><span style="color: var(--shiki-color-text)">    <data-lsp lsp='(property) user: {&amp;#10;    name: string;&amp;#10;} | null' >user</data-lsp></span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(parameter) event: <a href="/docs/types#public-types-serverloadevent">ServerLoadEvent</a>&amp;lt;{}, Record&amp;lt;string, any>, string | null>' >event</data-lsp></span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(property) <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;{}, string | null>.locals: App.<a href="/docs/types#app-locals">Locals</a>' >locals</data-lsp></span><span style="color: var(--shiki-color-text)">.<data-lsp lsp='(property) App.<a href="/docs/types#app-locals">Locals</a>.user: {&amp;#10;    name: string;&amp;#10;} | null' >user</data-lsp></span></div><div class='line'><span style="color: var(--shiki-color-text)">  };</span></div><div class='line'><span style="color: var(--shiki-color-text)">}</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: var(--shiki-token-comment)">/** </span><span style="color: var(--shiki-token-keyword)">@type</span><span style="color: var(--shiki-token-comment)"> </span><span style="color: var(--shiki-token-function)">{import(&apos;./$types&apos;).<a href="/docs/types#public-types-actions">Actions</a>}</span><span style="color: var(--shiki-token-comment)"> */</span></div><div class='line'><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const actions: <a href="/docs/types#public-types-actions">Actions</a>' >actions</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> {</span></div><div class='line'><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)"><data-lsp lsp='(property) logout: (event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;{}, string | null>) => Promise&amp;lt;void>' >logout</data-lsp></span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">async</span><span style="color: var(--shiki-color-text)"> (<data-lsp lsp='(parameter) event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;{}, string | null>' >event</data-lsp>) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></div><div class='line'><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(parameter) event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;{}, string | null>' >event</data-lsp></span><span style="color: var(--shiki-token-function)">.</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(property) <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;{}, string | null>.cookies: <a href="/docs/types#public-types-cookies">Cookies</a>' >cookies</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='(method) <a href="/docs/types#public-types-cookies">Cookies</a>.delete(name: string, opts?: CookieSerializeOptions | undefined): void' >delete</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&apos;sessionid&apos;</span><span style="color: var(--shiki-color-text)">);</span></div><div class='line'><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(parameter) event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;{}, string | null>' >event</data-lsp></span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(property) <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;Params extends Partial&amp;lt;Record&amp;lt;string, string>> = Partial&amp;lt;Record&amp;lt;string, string>>, RouteId extends string | null = string | null>.locals: App.<a href="/docs/types#app-locals">Locals</a>' >locals</data-lsp></span><span style="color: var(--shiki-color-text)">.<data-lsp lsp='(property) App.<a href="/docs/types#app-locals">Locals</a>.user: {&amp;#10;    name: string;&amp;#10;} | null' >user</data-lsp> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">null</span><span style="color: var(--shiki-color-text)">;</span></div><div class='line'><span style="color: var(--shiki-color-text)">  }</span></div><div class='line'><span style="color: var(--shiki-color-text)">};</span></div></code></div></pre></div><div class="ts-version code-block"><span class="filename">src/routes/account/+page.server.ts</span><pre class="shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">type</span><span style="color: var(--shiki-color-text)"> { <data-lsp lsp='(alias) type PageServerLoad = Kit.<a href="/docs/types#public-types-serverload">ServerLoad</a>&amp;lt;{}, Record&amp;lt;string, any>, void | Record&amp;lt;string, any>, string | null>&amp;#10;import PageServerLoad' >PageServerLoad</data-lsp></span><span style="color: var(--shiki-token-punctuation)">,</span><span style="color: var(--shiki-color-text)"> <data-lsp lsp='(alias) type <a href="/docs/types#public-types-actions">Actions</a> = {&amp;#10;    [x: string]: Kit.<a href="/docs/types#public-types-action">Action</a>&amp;lt;{}, void | Record&amp;lt;string, any>, string | null>;&amp;#10;}&amp;#10;import <a href="/docs/types#public-types-actions">Actions</a>' ><a href="/docs/types#public-types-actions">Actions</a></data-lsp> } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&apos;./$types&apos;</span><span style="color: var(--shiki-color-text)">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const load: (event: <a href="/docs/types#public-types-serverloadevent">ServerLoadEvent</a>&amp;lt;{}, Record&amp;lt;string, any>, string | null>) => {&amp;#10;    user: {&amp;#10;        name: string;&amp;#10;    } | null;&amp;#10;}' >load</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> ((<data-lsp lsp='(parameter) event: <a href="/docs/types#public-types-serverloadevent">ServerLoadEvent</a>&amp;lt;{}, Record&amp;lt;string, any>, string | null>' >event</data-lsp>) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></div><div class='line'><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-keyword)">return</span><span style="color: var(--shiki-color-text)"> {</span></div><div class='line'><span style="color: var(--shiki-color-text)">    <data-lsp lsp='(property) user: {&amp;#10;    name: string;&amp;#10;} | null' >user</data-lsp></span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(parameter) event: <a href="/docs/types#public-types-serverloadevent">ServerLoadEvent</a>&amp;lt;{}, Record&amp;lt;string, any>, string | null>' >event</data-lsp></span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(property) <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;{}, string | null>.locals: App.<a href="/docs/types#app-locals">Locals</a>' >locals</data-lsp></span><span style="color: var(--shiki-color-text)">.<data-lsp lsp='(property) App.<a href="/docs/types#app-locals">Locals</a>.user: {&amp;#10;    name: string;&amp;#10;} | null' >user</data-lsp></span></div><div class='line'><span style="color: var(--shiki-color-text)">  };</span></div><div class='line'><span style="color: var(--shiki-color-text)">}) satisfies <data-lsp lsp='(alias) type PageServerLoad = Kit.<a href="/docs/types#public-types-serverload">ServerLoad</a>&amp;lt;{}, Record&amp;lt;string, any>, void | Record&amp;lt;string, any>, string | null>&amp;#10;import PageServerLoad' >PageServerLoad</data-lsp>;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const actions: {&amp;#10;    logout: (event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;{}, string | null>) => Promise&amp;lt;void>;&amp;#10;}' >actions</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> {</span></div><div class='line'><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-function)"><data-lsp lsp='(property) logout: (event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;{}, string | null>) => Promise&amp;lt;void>' >logout</data-lsp></span><span style="color: var(--shiki-token-keyword)">:</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">async</span><span style="color: var(--shiki-color-text)"> (<data-lsp lsp='(parameter) event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;{}, string | null>' >event</data-lsp>) </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></div><div class='line'><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(parameter) event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;{}, string | null>' >event</data-lsp></span><span style="color: var(--shiki-token-function)">.</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(property) <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;{}, string | null>.cookies: <a href="/docs/types#public-types-cookies">Cookies</a>' >cookies</data-lsp></span><span style="color: var(--shiki-token-function)">.<data-lsp lsp='(method) <a href="/docs/types#public-types-cookies">Cookies</a>.delete(name: string, opts?: CookieSerializeOptions | undefined): void' >delete</data-lsp></span><span style="color: var(--shiki-color-text)">(</span><span style="color: var(--shiki-token-string-expression)">&apos;sessionid&apos;</span><span style="color: var(--shiki-color-text)">);</span></div><div class='line'><span style="color: var(--shiki-color-text)">    </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(parameter) event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;{}, string | null>' >event</data-lsp></span><span style="color: var(--shiki-color-text)">.</span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='(property) <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;Params extends Partial&amp;lt;Record&amp;lt;string, string>> = Partial&amp;lt;Record&amp;lt;string, string>>, RouteId extends string | null = string | null>.locals: App.<a href="/docs/types#app-locals">Locals</a>' >locals</data-lsp></span><span style="color: var(--shiki-color-text)">.<data-lsp lsp='(property) App.<a href="/docs/types#app-locals">Locals</a>.user: {&amp;#10;    name: string;&amp;#10;} | null' >user</data-lsp> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)">null</span><span style="color: var(--shiki-color-text)">;</span></div><div class='line'><span style="color: var(--shiki-color-text)">  }</span></div><div class='line'><span style="color: var(--shiki-color-text)">} satisfies <data-lsp lsp='(alias) type <a href="/docs/types#public-types-actions">Actions</a> = {&amp;#10;    [x: string]: Kit.<a href="/docs/types#public-types-action">Action</a>&amp;lt;{}, void | Record&amp;lt;string, any>, string | null>;&amp;#10;}&amp;#10;import <a href="/docs/types#public-types-actions">Actions</a>' ><a href="/docs/types#public-types-actions">Actions</a></data-lsp>;</span></div></code></div></pre></div><h2 id="progressive-enhancement">Progressive enhancement<a href="#progressive-enhancement" class="permalink"><span class="visually-hidden">permalink</span></a></h2><p>In the preceding sections we built a <code>/login</code> action that <a href="https://kryogenix.org/code/browser/everyonehasjs.html">works without client-side JavaScript</a> — not a <code>fetch</code> in sight. That&#39;s great, but when JavaScript <em>is</em> available we can progressively enhance our form interactions to provide a better user experience.</p>
<h3 id="progressive-enhancement-use-enhance">use:enhance<a href="#progressive-enhancement-use-enhance" class="permalink"><span class="visually-hidden">permalink</span></a></h3><p>The easiest way to progressively enhance a form is to add the <code>use:enhance</code> action:</p>
<div class="code-block"><span class="filename">src/routes/login/+page.svelte</span><pre class="language-diff"><code>&lt;script&gt;
<span class="inserted">	import { enhance } from &#39;$app/forms&#39;;
</span>
  /** @type {import(&#39;./$types&#39;).ActionData} */
  export let form;
&lt;/script&gt;

<span class="inserted">&lt;form method=&quot;POST&quot; use:enhance&gt;
</span></code></pre></div><blockquote>
<p>Yes, it&#39;s a little confusing that the <code>enhance</code> action and <code>&lt;form action&gt;</code> are both called &#39;action&#39;. These docs are action-packed. Sorry.</p>
</blockquote>
<p>Without an argument, <code>use:enhance</code> will emulate the browser-native behaviour, just without the full-page reloads. It will:</p>
<ul>
<li>update the <code>form</code> property, <code>$page.form</code> and <code>$page.status</code> on a successful or invalid response, but only if the action is on the same page you&#39;re submitting from. So for example if your form looks like <code>&lt;form action=&quot;/somewhere/else&quot; ..&gt;</code>, <code>form</code> and <code>$page</code> will <em>not</em> be updated. This is because in the native form submission case you would be redirected to the page the action is on. If you want to have them updated either way, use <a href="#progressive-enhancement-applyaction"><code>applyAction</code></a></li>
<li>reset the <code>&lt;form&gt;</code> element and invalidate all data using <code>invalidateAll</code> on a successful response</li>
<li>call <code>goto</code> on a redirect response</li>
<li>render the nearest <code>+error</code> boundary if an error occurs</li>
<li><a href="accessibility#focus-management">reset focus</a> to the appropriate element</li>
</ul>
<p>To customise the behaviour, you can provide a <code><a href="/docs/types#public-types-submitfunction">SubmitFunction</a></code> that runs immediately before the form is submitted, and (optionally) returns a callback that runs with the <code><a href="/docs/types#public-types-actionresult">ActionResult</a></code>. Note that if you return a callback, the default behavior mentioned above is not triggered. To get it back, call <code>update</code>.</p>
<pre class='language-svelte'><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span>
  <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>POST<span class="token punctuation">"</span></span>
  <span class="token attr-name"><span class="token namespace">use:</span>enhance=</span><span class="token language-javascript"><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> form<span class="token punctuation">,</span> data<span class="token punctuation">,</span> action<span class="token punctuation">,</span> cancel<span class="token punctuation">,</span> submitter <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="token comment wrapped" style="--indent: 4ch">    // `form` is the `&lt;form>` element</span><span class="token comment wrapped" style="--indent: 4ch">    // `data` is its `FormData` object</span><span class="token comment wrapped" style="--indent: 4ch">    // `action` is the URL to which the form is posted</span><span class="token comment wrapped" style="--indent: 4ch">    // `cancel()` will prevent the submission</span><span class="token comment wrapped" style="--indent: 4ch">    // `submitter` is the `HTMLElement` that caused the form to be submitted</span>
    <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> result<span class="token punctuation">,</span> update <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="token comment wrapped" style="--indent: 6ch">      // `result` is an `<a href="/docs/types#public-types-actionresult">ActionResult</a>` object</span><span class="token comment wrapped" style="--indent: 6ch">      // `update` is a function which triggers the logic that would be triggered if this callback wasn't set</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="token punctuation">></span></span></code></pre><p>You can use these functions to show and hide loading UI, and so on.</p>
<h3 id="progressive-enhancement-applyaction">applyAction<a href="#progressive-enhancement-applyaction" class="permalink"><span class="visually-hidden">permalink</span></a></h3><p>If you provide your own callbacks, you may need to reproduce part of the default <code>use:enhance</code> behaviour, such as showing the nearest <code>+error</code> boundary. Most of the time, calling <code>update</code> passed to the callback is enough. If you need more customization you can do so with <code>applyAction</code>:</p>
<div class="code-block"><span class="filename">src/routes/login/+page.svelte</span><pre class="language-diff"><code>&lt;script&gt;
<span class="inserted">	import { enhance, applyAction } from &#39;$app/forms&#39;;
</span>
  /** @type {import(&#39;./$types&#39;).ActionData} */
  export let form;
&lt;/script&gt;

&lt;form
  method=&quot;POST&quot;
  use:enhance={({ form, data, action, cancel }) =&gt; {
    // `form` is the `&lt;form&gt;` element
    // `data` is its `FormData` object
    // `action` is the URL to which the form is posted
    // `cancel()` will prevent the submission

    return async ({ result }) =&gt; {
      // `result` is an `<a href="/docs/types#public-types-actionresult">ActionResult</a>` object
<span class="inserted">			if (result.type === &#39;error&#39;) {
</span><span class="inserted">				await applyAction(result);
</span><span class="inserted">			}
</span>    };
  }}
&gt;
</code></pre></div><p>The behaviour of <code>applyAction(result)</code> depends on <code>result.type</code>:</p>
<ul>
<li><code>success</code>, <code>failure</code> — sets <code>$page.status</code> to <code>result.status</code> and updates <code>form</code> and <code>$page.form</code> to <code>result.data</code> (regardless of where you are submitting from, in contrast to <code>update</code> from <code>enhance</code>)</li>
<li><code>redirect</code> — calls <code>goto(result.location)</code></li>
<li><code>error</code> — renders the nearest <code>+error</code> boundary with <code>result.error</code></li>
</ul>
<p>In all cases, <a href="accessibility#focus-management">focus will be reset</a>.</p>
<h3 id="progressive-enhancement-custom-event-listener">Custom event listener<a href="#progressive-enhancement-custom-event-listener" class="permalink"><span class="visually-hidden">permalink</span></a></h3><p>We can also implement progressive enhancement ourselves, without <code>use:enhance</code>, with a normal event listener on the <code>&lt;form&gt;</code>:</p>
<div class="js-version code-block"><span class="filename">src/routes/login/+page.svelte</span><pre class='language-svelte'><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> invalidateAll<span class="token punctuation">,</span> goto <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'$app/navigation'</span><span class="token punctuation">;</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span> applyAction<span class="token punctuation">,</span> deserialize <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'$app/forms'</span><span class="token punctuation">;</span>
<span class="token comment wrapped" style="--indent: 0ch"></span><span class="token comment wrapped" style="--indent: 2ch">  /** @type {import('./$types').ActionData} */</span>  <span class="token keyword">export</span> <span class="token keyword">let</span> form<span class="token punctuation">;</span>
<span class="token comment wrapped" style="--indent: 0ch"></span><span class="token comment wrapped" style="--indent: 2ch">  /** @type {any} */</span>  <span class="token keyword">let</span> error<span class="token punctuation">;</span>

  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">handleSubmit</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>action<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">body</span><span class="token operator">:</span> data
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment wrapped" style="--indent: 0ch"></span><span class="token comment wrapped" style="--indent: 4ch">    /** @type {import('@sveltejs/kit').<a href="/docs/types#public-types-actionresult">ActionResult</a>} */</span>    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">deserialize</span><span class="token punctuation">(</span><span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'success'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment wrapped" style="--indent: 6ch">      // re-run all `load` functions, following the successful update</span>      <span class="token keyword">await</span> <span class="token function">invalidateAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">applyAction</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>POST<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">on:</span>submit|preventDefault=</span><span class="token language-javascript"><span class="token punctuation">{</span>handleSubmit<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
<span class="token comment wrapped" style="--indent: 2ch">  &lt;!-- content --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></code></pre></div><div class="ts-version code-block"><span class="filename">src/routes/login/+page.svelte</span><pre class='language-svelte'><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> invalidateAll<span class="token punctuation">,</span> goto <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'$app/navigation'</span><span class="token punctuation">;</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span> applyAction<span class="token punctuation">,</span> deserialize <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'$app/forms'</span><span class="token punctuation">;</span>

  <span class="token keyword">import</span> type <span class="token punctuation">{</span> ActionData <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./$types'</span><span class="token punctuation">;</span>
  <span class="token keyword">import</span> type <span class="token punctuation">{</span> <a href="/docs/types#public-types-actionresult">ActionResult</a> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@sveltejs/kit'</span><span class="token punctuation">;</span>

  <span class="token keyword">export</span> <span class="token keyword">let</span> <span class="token literal-property property">form</span><span class="token operator">:</span> ActionData<span class="token punctuation">;</span>

  <span class="token keyword">let</span> <span class="token literal-property property">error</span><span class="token operator">:</span> any<span class="token punctuation">;</span>

  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">handleSubmit</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>action<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">body</span><span class="token operator">:</span> data
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token literal-property property">result</span><span class="token operator">:</span> <a href="/docs/types#public-types-actionresult">ActionResult</a> <span class="token operator">=</span> <span class="token function">deserialize</span><span class="token punctuation">(</span><span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'success'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment wrapped" style="--indent: 6ch">      // re-run all `load` functions, following the successful update</span>      <span class="token keyword">await</span> <span class="token function">invalidateAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">applyAction</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>POST<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">on:</span>submit|preventDefault=</span><span class="token language-javascript"><span class="token punctuation">{</span>handleSubmit<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
<span class="token comment wrapped" style="--indent: 2ch">  &lt;!-- content --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></code></pre></div><p>Note that you need to <code>deserialize</code> the response before processing it further using the corresponding method from <code>$app/forms</code>. <code>JSON.parse()</code> isn&#39;t enough because form actions - like <code>load</code> functions - also support returning <code>Date</code> or <code>BigInt</code> objects.</p>
<p>If you have a <code>+server.js</code> alongside your <code>+page.server.js</code>, <code>fetch</code> requests will be routed there by default. To <code>POST</code> to an action in <code>+page.server.js</code> instead, use the custom <code>x-sveltekit-action</code> header:</p>
<pre class="language-diff"><code>const response = await fetch(this.action, {
  method: &#39;POST&#39;,
  body: data,
<span class="inserted">	headers: {
</span><span class="inserted">		&#39;x-sveltekit-action&#39;: &#39;true&#39;
</span><span class="inserted">	}
</span>});
</code></pre><h2 id="alternatives">Alternatives<a href="#alternatives" class="permalink"><span class="visually-hidden">permalink</span></a></h2><p>Form actions are the preferred way to send data to the server, since they can be progressively enhanced, but you can also use <a href="routing#server"><code>+server.js</code></a> files to expose (for example) a JSON API. Here&#39;s how such an interaction could look like:</p>
<div class="code-block"><span class="filename">send-message/+page.svelte</span><pre class='language-svelte'><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">function</span> <span class="token function">rerun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/api/ci'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name"><span class="token namespace">on:</span>click=</span><span class="token language-javascript"><span class="token punctuation">{</span>rerun<span class="token punctuation">}</span></span><span class="token punctuation">></span></span>Rerun CI<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></code></pre></div><div class="js-version code-block"><span class="filename">api/ci/+server.js</span><pre class="shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: var(--shiki-token-comment)">/** </span><span style="color: var(--shiki-token-keyword)">@type</span><span style="color: var(--shiki-token-comment)"> </span><span style="color: var(--shiki-token-function)">{import(&apos;./$types&apos;).<a href="/docs/types#public-types-requesthandler">RequestHandler</a>}</span><span style="color: var(--shiki-token-comment)"> */</span></div><div class='line'><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">function</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-function)"><data-lsp lsp='function POST(event: <a href="/docs/types#public-types-requestevent">RequestEvent</a>&amp;lt;{}, string | null>): <a href="/docs/types#private-types-maybepromise">MaybePromise</a>&amp;lt;Response>' >POST</data-lsp></span><span style="color: var(--shiki-color-text)">() {</span></div><div class='line'><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// do something</span></div><div class='line'><span style="color: var(--shiki-color-text)">}</span></div></code></div></pre></div><div class="ts-version code-block"><span class="filename">api/ci/+server.ts</span><pre class="shiki twoslash lsp" style="background-color: var(--shiki-color-background); color: var(--shiki-color-text)"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: var(--shiki-token-keyword)">import</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">type</span><span style="color: var(--shiki-color-text)"> { <data-lsp lsp='(alias) type <a href="/docs/types#public-types-requesthandler">RequestHandler</a> = Kit.<a href="/docs/types#public-types-requesthandler">RequestHandler</a>&amp;lt;{}, string | null>&amp;#10;import <a href="/docs/types#public-types-requesthandler">RequestHandler</a>' ><a href="/docs/types#public-types-requesthandler">RequestHandler</a></data-lsp> } </span><span style="color: var(--shiki-token-keyword)">from</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-string-expression)">&apos;./$types&apos;</span><span style="color: var(--shiki-color-text)">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: var(--shiki-token-keyword)">export</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">const</span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-constant)"><data-lsp lsp='const POST: () => void' >POST</data-lsp></span><span style="color: var(--shiki-color-text)"> </span><span style="color: var(--shiki-token-keyword)">=</span><span style="color: var(--shiki-color-text)"> (() </span><span style="color: var(--shiki-token-keyword)">=&gt;</span><span style="color: var(--shiki-color-text)"> {</span></div><div class='line'><span style="color: var(--shiki-color-text)">  </span><span style="color: var(--shiki-token-comment)">// do something</span></div><div class='line'><span style="color: var(--shiki-color-text)">}) satisfies <data-lsp lsp='(alias) type <a href="/docs/types#public-types-requesthandler">RequestHandler</a> = Kit.<a href="/docs/types#public-types-requesthandler">RequestHandler</a>&amp;lt;{}, string | null>&amp;#10;import <a href="/docs/types#public-types-requesthandler">RequestHandler</a>' ><a href="/docs/types#public-types-requesthandler">RequestHandler</a></data-lsp>;</span></div></code></div></pre></div><h2 id="get-vs-post">GET vs POST<a href="#get-vs-post" class="permalink"><span class="visually-hidden">permalink</span></a></h2><p>As we&#39;ve seen, to invoke a form action you must use <code>method=&quot;POST&quot;</code>.</p>
<p>Some forms don&#39;t need to <code>POST</code> data to the server — search inputs, for example. For these you can use <code>method=&quot;GET&quot;</code> (or, equivalently, no <code>method</code> at all), and SvelteKit will treat them like <code>&lt;a&gt;</code> elements, using the client-side router instead of a full page navigation:</p>
<pre class='language-markup'><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/search<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">></span></span>
    Search
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>q<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></code></pre><p>Submitting this form will navigate to <code>/search?q=...</code> and invoke your load function but will not invoke an action. As with <code>&lt;a&gt;</code> elements, you can set the <a href="link-options#data-sveltekit-reload"><code>data-sveltekit-reload</code></a>, <a href="link-options#data-sveltekit-replacestate"><code>data-sveltekit-replacestate</code></a>, <a href="link-options#data-sveltekit-keepfocus"><code>data-sveltekit-keepfocus</code></a> and <a href="link-options#data-sveltekit-noscroll"><code>data-sveltekit-noscroll</code></a> attributes on the <code>&lt;form&gt;</code> to control the router&#39;s behaviour.</p>
<h2 id="further-reading">Further reading<a href="#further-reading" class="permalink"><span class="visually-hidden">permalink</span></a></h2><ul>
<li><a href="https://learn.svelte.dev/tutorial/the-form-element">Tutorial: Forms</a></li>
</ul>
<!-- HTML_TAG_END --></section>

	<div class="controls svelte-zelrq3"><div class="svelte-zelrq3"><span class="svelte-zelrq3">previous</span>
			<a href="/docs/load">Loading data</a></div>

		<div class="svelte-zelrq3"><span class="svelte-zelrq3">next</span>
			<a href="/docs/page-options">Page options</a></div></div></div>



<aside class="on-this-page svelte-tsiaal"><h2 class="svelte-tsiaal">On this page</h2>
	<nav><ul class="svelte-tsiaal"><li><a href="/docs/form-actions" class="svelte-tsiaal active">Form actions</a></li>
			<li><a href="#default-actions" class="svelte-tsiaal">Default actions</a></li><li><a href="#named-actions" class="svelte-tsiaal">Named actions</a></li><li><a href="#anatomy-of-an-action" class="svelte-tsiaal">Anatomy of an action</a></li><li><a href="#loading-data" class="svelte-tsiaal">Loading data</a></li><li><a href="#progressive-enhancement" class="svelte-tsiaal">Progressive enhancement</a></li><li><a href="#alternatives" class="svelte-tsiaal">Alternatives</a></li><li><a href="#get-vs-post" class="svelte-tsiaal">GET vs POST</a></li><li><a href="#further-reading" class="svelte-tsiaal">Further reading</a></li></ul></nav>
</aside></div>

	<div class="toc-container svelte-1rc2dnd"><nav aria-label="Docs" class="svelte-1izbfc5"><ul class="sidebar svelte-1izbfc5"><li class="svelte-1izbfc5"><span class="section svelte-1izbfc5">Getting started</span>

				<ul class="svelte-1izbfc5"><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/introduction">Introduction</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/creating-a-project">Creating a project</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/project-structure">Project structure</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/web-standards">Web standards</a>
						</li></ul>
			</li><li class="svelte-1izbfc5"><span class="section svelte-1izbfc5">Core concepts</span>

				<ul class="svelte-1izbfc5"><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/routing">Routing</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/load">Loading data</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5 active" href="/docs/form-actions">Form actions</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/page-options">Page options</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/state-management">State management</a>
						</li></ul>
			</li><li class="svelte-1izbfc5"><span class="section svelte-1izbfc5">Build and deploy</span>

				<ul class="svelte-1izbfc5"><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/building-your-app">Building your app</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/adapters">Adapters</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/adapter-auto">Zero-config deployments</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/adapter-node">Node servers</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/adapter-static">Static site generation</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/single-page-apps">Single-page apps</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/adapter-cloudflare">Cloudflare Pages</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/adapter-cloudflare-workers">Cloudflare Workers</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/adapter-netlify">Netlify</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/adapter-vercel">Vercel</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/writing-adapters">Writing adapters</a>
						</li></ul>
			</li><li class="svelte-1izbfc5"><span class="section svelte-1izbfc5">Advanced</span>

				<ul class="svelte-1izbfc5"><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/advanced-routing">Advanced routing</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/hooks">Hooks</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/errors">Errors</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/link-options">Link options</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/service-workers">Service workers</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/server-only-modules">Server-only modules</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/assets">Asset handling</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/snapshots">Snapshots</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/packaging">Packaging</a>
						</li></ul>
			</li><li class="svelte-1izbfc5"><span class="section svelte-1izbfc5">Best practices</span>

				<ul class="svelte-1izbfc5"><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/accessibility">Accessibility</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/seo">SEO</a>
						</li></ul>
			</li><li class="svelte-1izbfc5"><span class="section svelte-1izbfc5">Reference</span>

				<ul class="svelte-1izbfc5"><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/configuration">Configuration</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/cli">Command Line Interface</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/modules">Modules</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/types">Types</a>
						</li></ul>
			</li><li class="svelte-1izbfc5"><span class="section svelte-1izbfc5">Appendix</span>

				<ul class="svelte-1izbfc5"><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/integrations">Integrations</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/migrating">Migrating from Sapper</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/additional-resources">Additional resources</a>
						</li><li class="svelte-1izbfc5"><a data-sveltekit-preload-data class="page svelte-1izbfc5" href="/docs/glossary">Glossary</a>
						</li></ul>
			</li></ul>
</nav></div>

	<div class="ts-toggle svelte-1rc2dnd"><div class="input-output-toggle svelte-1ev6lam"><span aria-hidden="true">JavaScript</span> <button aria-pressed="false" class="svelte-1c3yzdv"><span class="visually-hidden">TypeScript code examples</span>
</button> <span aria-hidden="true">TypeScript</span>
</div></div>
</div></main>

<div class="banner svelte-tdqbhp" style="--banner-footer-height: 48px;"><a target="_blank" rel="noopener noreferrer" href="https://hack.sveltesociety.dev/"><span class="small svelte-tdqbhp"><strong class="svelte-tdqbhp">Announcing SvelteHack</strong> Participate →
			</span>
			<span class="large svelte-tdqbhp"><strong class="svelte-tdqbhp">Announcing SvelteHack</strong> Our first hackathon with over $12,000 in prizes →
			</span></a>
		<button class="svelte-tdqbhp">✕ </button></div>




			
			<script>
				{
					__sveltekit_duwvm8 = {
						env: {},
						base: new URL("..", location).pathname.slice(0, -1),
						element: document.currentScript.parentElement
					};

					const data = [null,{"type":"data","data":{sections:[{title:"Getting started",pages:[{title:"Introduction",path:"\u002Fdocs\u002Fintroduction"},{title:"Creating a project",path:"\u002Fdocs\u002Fcreating-a-project"},{title:"Project structure",path:"\u002Fdocs\u002Fproject-structure"},{title:"Web standards",path:"\u002Fdocs\u002Fweb-standards"}]},{title:"Core concepts",pages:[{title:"Routing",path:"\u002Fdocs\u002Frouting"},{title:"Loading data",path:"\u002Fdocs\u002Fload"},{title:"Form actions",path:"\u002Fdocs\u002Fform-actions"},{title:"Page options",path:"\u002Fdocs\u002Fpage-options"},{title:"State management",path:"\u002Fdocs\u002Fstate-management"}]},{title:"Build and deploy",pages:[{title:"Building your app",path:"\u002Fdocs\u002Fbuilding-your-app"},{title:"Adapters",path:"\u002Fdocs\u002Fadapters"},{title:"Zero-config deployments",path:"\u002Fdocs\u002Fadapter-auto"},{title:"Node servers",path:"\u002Fdocs\u002Fadapter-node"},{title:"Static site generation",path:"\u002Fdocs\u002Fadapter-static"},{title:"Single-page apps",path:"\u002Fdocs\u002Fsingle-page-apps"},{title:"Cloudflare Pages",path:"\u002Fdocs\u002Fadapter-cloudflare"},{title:"Cloudflare Workers",path:"\u002Fdocs\u002Fadapter-cloudflare-workers"},{title:"Netlify",path:"\u002Fdocs\u002Fadapter-netlify"},{title:"Vercel",path:"\u002Fdocs\u002Fadapter-vercel"},{title:"Writing adapters",path:"\u002Fdocs\u002Fwriting-adapters"}]},{title:"Advanced",pages:[{title:"Advanced routing",path:"\u002Fdocs\u002Fadvanced-routing"},{title:"Hooks",path:"\u002Fdocs\u002Fhooks"},{title:"Errors",path:"\u002Fdocs\u002Ferrors"},{title:"Link options",path:"\u002Fdocs\u002Flink-options"},{title:"Service workers",path:"\u002Fdocs\u002Fservice-workers"},{title:"Server-only modules",path:"\u002Fdocs\u002Fserver-only-modules"},{title:"Asset handling",path:"\u002Fdocs\u002Fassets"},{title:"Snapshots",path:"\u002Fdocs\u002Fsnapshots"},{title:"Packaging",path:"\u002Fdocs\u002Fpackaging"}]},{title:"Best practices",pages:[{title:"Accessibility",path:"\u002Fdocs\u002Faccessibility"},{title:"SEO",path:"\u002Fdocs\u002Fseo"}]},{title:"Reference",pages:[{title:"Configuration",path:"\u002Fdocs\u002Fconfiguration"},{title:"Command Line Interface",path:"\u002Fdocs\u002Fcli"},{title:"Modules",path:"\u002Fdocs\u002Fmodules"},{title:"Types",path:"\u002Fdocs\u002Ftypes"}]},{title:"Appendix",pages:[{title:"Integrations",path:"\u002Fdocs\u002Fintegrations"},{title:"Migrating from Sapper",path:"\u002Fdocs\u002Fmigrating"},{title:"Additional resources",path:"\u002Fdocs\u002Fadditional-resources"},{title:"Glossary",path:"\u002Fdocs\u002Fglossary"}]}]},"uses":{}},{"type":"data","data":{page:{file:"docs\u002F20-core-concepts\u002F30-form-actions.md",slug:"form-actions",title:"Form actions",content:"\u003Cp\u003EA \u003Ccode\u003E+page.server.js\u003C\u002Fcode\u003E file can export \u003Cem\u003Eactions\u003C\u002Fem\u003E, which allow you to \u003Ccode\u003EPOST\u003C\u002Fcode\u003E data to the server using the \u003Ccode\u003E&lt;form&gt;\u003C\u002Fcode\u003E element.\u003C\u002Fp\u003E\n\u003Cp\u003EWhen using \u003Ccode\u003E&lt;form&gt;\u003C\u002Fcode\u003E, client-side JavaScript is optional, but you can easily \u003Cem\u003Eprogressively enhance\u003C\u002Fem\u003E your form interactions with JavaScript to provide the best user experience.\u003C\u002Fp\u003E\n\u003Ch2 id=\"default-actions\"\u003EDefault actions\u003Ca href=\"#default-actions\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh2\u003E\u003Cp\u003EIn the simplest case, a page declares a \u003Ccode\u003Edefault\u003C\u002Fcode\u003E action:\u003C\u002Fp\u003E\n\u003Cdiv class=\"js-version code-block\"\u003E\u003Cspan class=\"filename\"\u003Esrc\u002Froutes\u002Flogin\u002F+page.server.js\u003C\u002Fspan\u003E\u003Cpre class=\"shiki twoslash lsp\" style=\"background-color: var(--shiki-color-background); color: var(--shiki-color-text)\"\u003E\u003Cdiv class=\"language-id\"\u003Ets\u003C\u002Fdiv\u003E\u003Cdiv class='code-container'\u003E\u003Ccode\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E\u002F** \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E@type\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E{import(&apos;.\u002F$types&apos;).\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actions\"\u003EActions\u003C\u002Fa\u003E}\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E *\u002F\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eexport\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Econst\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='const actions: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actions\"\u003EActions\u003C\u002Fa\u003E' \u003Eactions\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E\u003Cdata-lsp lsp='(property) default: (event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E) =\u003E Promise&amp;lt;void\u003E' \u003Edefault\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Easync\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E (\u003Cdata-lsp lsp='(parameter) event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E' \u003Eevent\u003C\u002Fdata-lsp\u003E) \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E\u002F\u002F TODO log the user in\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  }\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E};\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003C\u002Fcode\u003E\u003C\u002Fdiv\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"ts-version code-block\"\u003E\u003Cspan class=\"filename\"\u003Esrc\u002Froutes\u002Flogin\u002F+page.server.ts\u003C\u002Fspan\u003E\u003Cpre class=\"shiki twoslash lsp\" style=\"background-color: var(--shiki-color-background); color: var(--shiki-color-text)\"\u003E\u003Cdiv class=\"language-id\"\u003Ets\u003C\u002Fdiv\u003E\u003Cdiv class='code-container'\u003E\u003Ccode\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eimport\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Etype\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E { \u003Cdata-lsp lsp='(alias) type \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actions\"\u003EActions\u003C\u002Fa\u003E = {&amp;#10;    [x: string]: Kit.\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-action\"\u003EAction\u003C\u002Fa\u003E&amp;lt;{}, void | Record&amp;lt;string, any\u003E, string | null\u003E;&amp;#10;}&amp;#10;import \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actions\"\u003EActions\u003C\u002Fa\u003E' \u003E\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actions\"\u003EActions\u003C\u002Fa\u003E\u003C\u002Fdata-lsp\u003E } \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E&apos;.\u002F$types&apos;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E&nbsp;\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eexport\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Econst\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='const actions: {&amp;#10;    default: (event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E) =\u003E Promise&amp;lt;void\u003E;&amp;#10;}' \u003Eactions\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E\u003Cdata-lsp lsp='(property) default: (event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E) =\u003E Promise&amp;lt;void\u003E' \u003Edefault\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Easync\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E (\u003Cdata-lsp lsp='(parameter) event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E' \u003Eevent\u003C\u002Fdata-lsp\u003E) \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E\u002F\u002F TODO log the user in\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  }\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E} satisfies \u003Cdata-lsp lsp='(alias) type \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actions\"\u003EActions\u003C\u002Fa\u003E = {&amp;#10;    [x: string]: Kit.\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-action\"\u003EAction\u003C\u002Fa\u003E&amp;lt;{}, void | Record&amp;lt;string, any\u003E, string | null\u003E;&amp;#10;}&amp;#10;import \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actions\"\u003EActions\u003C\u002Fa\u003E' \u003E\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actions\"\u003EActions\u003C\u002Fa\u003E\u003C\u002Fdata-lsp\u003E;\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003C\u002Fcode\u003E\u003C\u002Fdiv\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp\u003ETo invoke this action from the \u003Ccode\u003E\u002Flogin\u003C\u002Fcode\u003E page, just add a \u003Ccode\u003E&lt;form&gt;\u003C\u002Fcode\u003E — no JavaScript needed:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block\"\u003E\u003Cspan class=\"filename\"\u003Esrc\u002Froutes\u002Flogin\u002F+page.svelte\u003C\u002Fspan\u003E\u003Cpre class='language-svelte'\u003E\u003Ccode\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003Eform\u003C\u002Fspan\u003E \u003Cspan class=\"token attr-name\"\u003Emethod\u003C\u002Fspan\u003E\u003Cspan class=\"token attr-value\"\u003E\u003Cspan class=\"token punctuation\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003EPOST\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003Elabel\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n    Email\n    \u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003Einput\u003C\u002Fspan\u003E \u003Cspan class=\"token attr-name\"\u003Ename\u003C\u002Fspan\u003E\u003Cspan class=\"token attr-value\"\u003E\u003Cspan class=\"token punctuation\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003Eemail\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token attr-name\"\u003Etype\u003C\u002Fspan\u003E\u003Cspan class=\"token attr-value\"\u003E\u003Cspan class=\"token punctuation\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003Eemail\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u002F\u003C\u002Fspan\u003Elabel\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003Elabel\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n    Password\n    \u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003Einput\u003C\u002Fspan\u003E \u003Cspan class=\"token attr-name\"\u003Ename\u003C\u002Fspan\u003E\u003Cspan class=\"token attr-value\"\u003E\u003Cspan class=\"token punctuation\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003Epassword\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token attr-name\"\u003Etype\u003C\u002Fspan\u003E\u003Cspan class=\"token attr-value\"\u003E\u003Cspan class=\"token punctuation\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003Epassword\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u002F\u003C\u002Fspan\u003Elabel\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003Ebutton\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003ELog in\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u002F\u003C\u002Fspan\u003Ebutton\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u002F\u003C\u002Fspan\u003Eform\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp\u003EIf someone were to click the button, the browser would send the form data via \u003Ccode\u003EPOST\u003C\u002Fcode\u003E request to the server, running the default action.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003EActions always use \u003Ccode\u003EPOST\u003C\u002Fcode\u003E requests, since \u003Ccode\u003EGET\u003C\u002Fcode\u003E requests should never have side-effects.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003EWe can also invoke the action from other pages (for example if there&#39;s a login widget in the nav in the root layout) by adding the \u003Ccode\u003Eaction\u003C\u002Fcode\u003E attribute, pointing to the page:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block\"\u003E\u003Cspan class=\"filename\"\u003Esrc\u002Froutes\u002F+layout.svelte\u003C\u002Fspan\u003E\u003Cpre class='language-markup'\u003E\u003Ccode\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003Eform\u003C\u002Fspan\u003E \u003Cspan class=\"token attr-name\"\u003Emethod\u003C\u002Fspan\u003E\u003Cspan class=\"token attr-value\"\u003E\u003Cspan class=\"token punctuation attr-equals\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003EPOST\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token attr-name\"\u003Eaction\u003C\u002Fspan\u003E\u003Cspan class=\"token attr-value\"\u003E\u003Cspan class=\"token punctuation attr-equals\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003E\u002Flogin\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment wrapped\" style=\"--indent: 2ch\"\u003E  &lt;!-- content --\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u002F\u003C\u002Fspan\u003Eform\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Ch2 id=\"named-actions\"\u003ENamed actions\u003Ca href=\"#named-actions\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh2\u003E\u003Cp\u003EInstead of one \u003Ccode\u003Edefault\u003C\u002Fcode\u003E action, a page can have as many named actions as it needs:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block\"\u003E\u003Cspan class=\"filename\"\u003Esrc\u002Froutes\u002Flogin\u002F+page.server.js\u003C\u002Fspan\u003E\u003Cpre class=\"language-diff\"\u003E\u003Ccode\u003E\u002F** @type {import(&#39;.\u002F$types&#39;).\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actions\"\u003EActions\u003C\u002Fa\u003E} *\u002F\nexport const actions = {\n\u003Cspan class=\"deleted\"\u003E\tdefault: async (event) =&gt; {\n\u003C\u002Fspan\u003E\u003Cspan class=\"inserted\"\u003E\tlogin: async (event) =&gt; {\n\u003C\u002Fspan\u003E    \u002F\u002F TODO log the user in\n  },\n\u003Cspan class=\"inserted\"\u003E\tregister: async (event) =&gt; {\n\u003C\u002Fspan\u003E\u003Cspan class=\"inserted\"\u003E\t\t\u002F\u002F TODO register the user\n\u003C\u002Fspan\u003E\u003Cspan class=\"inserted\"\u003E\t}\n\u003C\u002Fspan\u003E};\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp\u003ETo invoke a named action, add a query parameter with the name prefixed by a \u003Ccode\u003E\u002F\u003C\u002Fcode\u003E character:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block\"\u003E\u003Cspan class=\"filename\"\u003Esrc\u002Froutes\u002Flogin\u002F+page.svelte\u003C\u002Fspan\u003E\u003Cpre class='language-svelte'\u003E\u003Ccode\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003Eform\u003C\u002Fspan\u003E \u003Cspan class=\"token attr-name\"\u003Emethod\u003C\u002Fspan\u003E\u003Cspan class=\"token attr-value\"\u003E\u003Cspan class=\"token punctuation\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003EPOST\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token attr-name\"\u003Eaction\u003C\u002Fspan\u003E\u003Cspan class=\"token attr-value\"\u003E\u003Cspan class=\"token punctuation\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003E?\u002Fregister\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"code-block\"\u003E\u003Cspan class=\"filename\"\u003Esrc\u002Froutes\u002F+layout.svelte\u003C\u002Fspan\u003E\u003Cpre class='language-svelte'\u003E\u003Ccode\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003Eform\u003C\u002Fspan\u003E \u003Cspan class=\"token attr-name\"\u003Emethod\u003C\u002Fspan\u003E\u003Cspan class=\"token attr-value\"\u003E\u003Cspan class=\"token punctuation\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003EPOST\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token attr-name\"\u003Eaction\u003C\u002Fspan\u003E\u003Cspan class=\"token attr-value\"\u003E\u003Cspan class=\"token punctuation\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003E\u002Flogin?\u002Fregister\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp\u003EAs well as the \u003Ccode\u003Eaction\u003C\u002Fcode\u003E attribute, we can use the \u003Ccode\u003Eformaction\u003C\u002Fcode\u003E attribute on a button to \u003Ccode\u003EPOST\u003C\u002Fcode\u003E the same form data to a different action than the parent \u003Ccode\u003E&lt;form&gt;\u003C\u002Fcode\u003E:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block\"\u003E\u003Cspan class=\"filename\"\u003Esrc\u002Froutes\u002Flogin\u002F+page.svelte\u003C\u002Fspan\u003E\u003Cpre class=\"language-diff\"\u003E\u003Ccode\u003E\u003Cspan class=\"deleted\"\u003E&lt;form method=&quot;POST&quot;&gt;\n\u003C\u002Fspan\u003E\u003Cspan class=\"inserted\"\u003E&lt;form method=&quot;POST&quot; action=&quot;?\u002Flogin&quot;&gt;\n\u003C\u002Fspan\u003E  &lt;label&gt;\n    Email\n    &lt;input name=&quot;email&quot; type=&quot;email&quot;&gt;\n  &lt;\u002Flabel&gt;\n  &lt;label&gt;\n    Password\n    &lt;input name=&quot;password&quot; type=&quot;password&quot;&gt;\n  &lt;\u002Flabel&gt;\n  &lt;button&gt;Log in&lt;\u002Fbutton&gt;\n\u003Cspan class=\"inserted\"\u003E\t&lt;button formaction=&quot;?\u002Fregister&quot;&gt;Register&lt;\u002Fbutton&gt;\n\u003C\u002Fspan\u003E&lt;\u002Fform&gt;\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cblockquote\u003E\n\u003Cp\u003EWe can&#39;t have default actions next to named actions, because if you POST to a named action without a redirect, the query parameter is persisted in the URL, which means the next default POST would go through the named action from before.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Ch2 id=\"anatomy-of-an-action\"\u003EAnatomy of an action\u003Ca href=\"#anatomy-of-an-action\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh2\u003E\u003Cp\u003EEach action receives a \u003Ccode\u003E\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E\u003C\u002Fcode\u003E object, allowing you to read the data with \u003Ccode\u003Erequest.formData()\u003C\u002Fcode\u003E. After processing the request (for example, logging the user in by setting a cookie), the action can respond with data that will be available through the \u003Ccode\u003Eform\u003C\u002Fcode\u003E property on the corresponding page and through \u003Ccode\u003E$page.form\u003C\u002Fcode\u003E app-wide until the next update.\u003C\u002Fp\u003E\n\u003Cdiv class=\"js-version code-block\"\u003E\u003Cspan class=\"filename\"\u003Esrc\u002Froutes\u002Flogin\u002F+page.server.js\u003C\u002Fspan\u003E\u003Cpre class=\"shiki twoslash lsp\" style=\"background-color: var(--shiki-color-background); color: var(--shiki-color-text)\"\u003E\u003Cdiv class=\"language-id\"\u003Ets\u003C\u002Fdiv\u003E\u003Cdiv class='code-container'\u003E\u003Ccode\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E\u002F** \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E@type\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E{import(&apos;.\u002F$types&apos;).PageServerLoad}\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E *\u002F\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eexport\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Easync\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E\u003Cdata-lsp lsp='function load(event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-serverloadevent\"\u003EServerLoadEvent\u003C\u002Fa\u003E&amp;lt;{}, Record&amp;lt;string, any\u003E, string | null\u003E): \u003Ca href=\"\u002Fdocs\u002Ftypes#private-types-maybepromise\"\u003EMaybePromise\u003C\u002Fa\u003E&amp;lt;void | Record&amp;lt;string, any\u003E\u003E' \u003Eload\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E({ \u003Cdata-lsp lsp='(parameter) cookies: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-cookies\"\u003ECookies\u003C\u002Fa\u003E' \u003Ecookies\u003C\u002Fdata-lsp\u003E }) {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Econst\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='const user: any' \u003Euser\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eawait\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='any' \u003Edb\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003Cdata-lsp lsp='any' \u003EgetUserFromSession\u003C\u002Fdata-lsp\u003E\u003Cdata-err\u003E\u003C\u002Fdata-err\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='(parameter) cookies: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-cookies\"\u003ECookies\u003C\u002Fa\u003E' \u003Ecookies\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003Cdata-lsp lsp='(method) \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-cookies\"\u003ECookies\u003C\u002Fa\u003E.get(name: string, opts?: CookieParseOptions | undefined): string | undefined' \u003Eget\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E&apos;sessionid&apos;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E));\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cspan class=\"error\"\u003E\u003Cspan\u003ECannot find name 'db'.\u003C\u002Fspan\u003E\u003Cspan class=\"code\"\u003E2304\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"error-behind\"\u003ECannot find name 'db'.\u003C\u002Fspan\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Ereturn\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E { \u003Cdata-lsp lsp='(property) user: any' \u003Euser\u003C\u002Fdata-lsp\u003E };\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cspan class=\"error\"\u003E\u003Cspan\u003ECannot find name 'db'.\u003C\u002Fspan\u003E\u003Cspan class=\"code\"\u003E2304\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"error-behind\"\u003ECannot find name 'db'.\u003C\u002Fspan\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E&nbsp;\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E\u002F** \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E@type\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E{import(&apos;.\u002F$types&apos;).\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actions\"\u003EActions\u003C\u002Fa\u003E}\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E *\u002F\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eexport\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Econst\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='const actions: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actions\"\u003EActions\u003C\u002Fa\u003E' \u003Eactions\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E\u003Cdata-lsp lsp='(property) login: ({ cookies, request }: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E) =\u003E Promise&amp;lt;{&amp;#10;    success: boolean;&amp;#10;}\u003E' \u003Elogin\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Easync\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E ({ \u003Cdata-lsp lsp='(parameter) cookies: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-cookies\"\u003ECookies\u003C\u002Fa\u003E' \u003Ecookies\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-punctuation)\"\u003E,\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003Cdata-lsp lsp='(parameter) request: Request' \u003Erequest\u003C\u002Fdata-lsp\u003E }) \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Econst\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='const data: FormData' \u003Edata\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eawait\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='(parameter) request: Request' \u003Erequest\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003Cdata-lsp lsp='(method) Body.formData(): Promise&amp;lt;FormData\u003E' \u003EformData\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E();\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Econst\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='const email: FormDataEntryValue | null' \u003Eemail\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='const data: FormData' \u003Edata\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003Cdata-lsp lsp='(method) FormData.get(name: string): FormDataEntryValue | null' \u003Eget\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E&apos;email&apos;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E);\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Econst\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='const password: FormDataEntryValue | null' \u003Epassword\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='const data: FormData' \u003Edata\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003Cdata-lsp lsp='(method) FormData.get(name: string): FormDataEntryValue | null' \u003Eget\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E&apos;password&apos;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E);\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E&nbsp;\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Econst\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='const user: any' \u003Euser\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eawait\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='any' \u003Edb\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003Cdata-lsp lsp='any' \u003EgetUser\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003Cdata-lsp lsp='const email: FormDataEntryValue | null' \u003Eemail\u003C\u002Fdata-lsp\u003E);\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='(parameter) cookies: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-cookies\"\u003ECookies\u003C\u002Fa\u003E' \u003Ecookies\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003Cdata-lsp lsp='(method) \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-cookies\"\u003ECookies\u003C\u002Fa\u003E.set(name: string, value: string, opts?: CookieSerializeOptions | undefined): void' \u003Eset\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E&apos;sessionid&apos;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-punctuation)\"\u003E,\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eawait\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='any' \u003Edb\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003Cdata-lsp lsp='any' \u003EcreateSession\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003Cdata-lsp lsp='const user: any' \u003Euser\u003C\u002Fdata-lsp\u003E));\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E&nbsp;\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Ereturn\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E { \u003Cdata-lsp lsp='(property) success: boolean' \u003Esuccess\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003Etrue\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E };\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  }\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-punctuation)\"\u003E,\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E\u003Cdata-lsp lsp='(property) register: (event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E) =\u003E Promise&amp;lt;void\u003E' \u003Eregister\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Easync\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E (\u003Cdata-lsp lsp='(parameter) event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E' \u003Eevent\u003C\u002Fdata-lsp\u003E) \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E\u002F\u002F TODO register the user\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  }\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E};\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003C\u002Fcode\u003E\u003C\u002Fdiv\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"ts-version code-block\"\u003E\u003Cspan class=\"filename\"\u003Esrc\u002Froutes\u002Flogin\u002F+page.server.ts\u003C\u002Fspan\u003E\u003Cpre class=\"shiki twoslash lsp\" style=\"background-color: var(--shiki-color-background); color: var(--shiki-color-text)\"\u003E\u003Cdiv class=\"language-id\"\u003Ets\u003C\u002Fdiv\u003E\u003Cdiv class='code-container'\u003E\u003Ccode\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eimport\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Etype\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E { \u003Cdata-lsp lsp='(alias) type PageServerLoad = Kit.\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-serverload\"\u003EServerLoad\u003C\u002Fa\u003E&amp;lt;{}, Record&amp;lt;string, any\u003E, void | Record&amp;lt;string, any\u003E, string | null\u003E&amp;#10;import PageServerLoad' \u003EPageServerLoad\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-punctuation)\"\u003E,\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003Cdata-lsp lsp='(alias) type \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actions\"\u003EActions\u003C\u002Fa\u003E = {&amp;#10;    [x: string]: Kit.\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-action\"\u003EAction\u003C\u002Fa\u003E&amp;lt;{}, void | Record&amp;lt;string, any\u003E, string | null\u003E;&amp;#10;}&amp;#10;import \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actions\"\u003EActions\u003C\u002Fa\u003E' \u003E\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actions\"\u003EActions\u003C\u002Fa\u003E\u003C\u002Fdata-lsp\u003E } \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E&apos;.\u002F$types&apos;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E&nbsp;\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eexport\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Econst\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='const load: ({ cookies }: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-serverloadevent\"\u003EServerLoadEvent\u003C\u002Fa\u003E&amp;lt;{}, Record&amp;lt;string, any\u003E, string | null\u003E) =\u003E Promise&amp;lt;{&amp;#10;    user: any;&amp;#10;}\u003E' \u003Eload\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E (\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Easync\u003Cdata-err\u003E\u003C\u002Fdata-err\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E ({ \u003Cdata-lsp lsp='(parameter) cookies: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-cookies\"\u003ECookies\u003C\u002Fa\u003E' \u003Ecookies\u003C\u002Fdata-lsp\u003E }) \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cspan class=\"error\"\u003E\u003Cspan\u003ECannot find name 'db'.\u003C\u002Fspan\u003E\u003Cspan class=\"code\"\u003E2304\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"error-behind\"\u003ECannot find name 'db'.\u003C\u002Fspan\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Econst\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='const user: any' \u003Euser\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eawait\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='any' \u003Edb\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003Cdata-lsp lsp='any' \u003EgetUserFromSession\u003C\u002Fdata-lsp\u003E\u003Cdata-err\u003E\u003C\u002Fdata-err\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='(parameter) cookies: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-cookies\"\u003ECookies\u003C\u002Fa\u003E' \u003Ecookies\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003Cdata-lsp lsp='(method) \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-cookies\"\u003ECookies\u003C\u002Fa\u003E.get(name: string, opts?: CookieParseOptions | undefined): string | undefined' \u003Eget\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E&apos;sessionid&apos;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E));\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cspan class=\"error\"\u003E\u003Cspan\u003ECannot find name 'db'.\u003C\u002Fspan\u003E\u003Cspan class=\"code\"\u003E2304\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"error-behind\"\u003ECannot find name 'db'.\u003C\u002Fspan\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Ereturn\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E { \u003Cdata-lsp lsp='(property) user: any' \u003Euser\u003C\u002Fdata-lsp\u003E };\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E}) satisfies \u003Cdata-lsp lsp='(alias) type PageServerLoad = Kit.\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-serverload\"\u003EServerLoad\u003C\u002Fa\u003E&amp;lt;{}, Record&amp;lt;string, any\u003E, void | Record&amp;lt;string, any\u003E, string | null\u003E&amp;#10;import PageServerLoad' \u003EPageServerLoad\u003C\u002Fdata-lsp\u003E;\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E&nbsp;\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eexport\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Econst\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='const actions: {&amp;#10;    login: ({ cookies, request }: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E) =\u003E Promise&amp;lt;{&amp;#10;        success: boolean;&amp;#10;    }\u003E;&amp;#10;    register: (event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E) =\u003E Promise&amp;lt;...\u003E;&amp;#10;}' \u003Eactions\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E\u003Cdata-lsp lsp='(property) login: ({ cookies, request }: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E) =\u003E Promise&amp;lt;{&amp;#10;    success: boolean;&amp;#10;}\u003E' \u003Elogin\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Easync\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E ({ \u003Cdata-lsp lsp='(parameter) cookies: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-cookies\"\u003ECookies\u003C\u002Fa\u003E' \u003Ecookies\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-punctuation)\"\u003E,\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003Cdata-lsp lsp='(parameter) request: Request' \u003Erequest\u003C\u002Fdata-lsp\u003E }) \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Econst\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='const data: FormData' \u003Edata\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eawait\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='(parameter) request: Request' \u003Erequest\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003Cdata-lsp lsp='(method) Body.formData(): Promise&amp;lt;FormData\u003E' \u003EformData\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E();\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Econst\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='const email: FormDataEntryValue | null' \u003Eemail\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='const data: FormData' \u003Edata\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003Cdata-lsp lsp='(method) FormData.get(name: string): FormDataEntryValue | null' \u003Eget\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E&apos;email&apos;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E);\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Econst\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='const password: FormDataEntryValue | null' \u003Epassword\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='const data: FormData' \u003Edata\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003Cdata-lsp lsp='(method) FormData.get(name: string): FormDataEntryValue | null' \u003Eget\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E&apos;password&apos;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E);\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E&nbsp;\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Econst\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='const user: any' \u003Euser\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eawait\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='any' \u003Edb\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003Cdata-lsp lsp='any' \u003EgetUser\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003Cdata-lsp lsp='const email: FormDataEntryValue | null' \u003Eemail\u003C\u002Fdata-lsp\u003E);\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='(parameter) cookies: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-cookies\"\u003ECookies\u003C\u002Fa\u003E' \u003Ecookies\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003Cdata-lsp lsp='(method) \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-cookies\"\u003ECookies\u003C\u002Fa\u003E.set(name: string, value: string, opts?: CookieSerializeOptions | undefined): void' \u003Eset\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E&apos;sessionid&apos;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-punctuation)\"\u003E,\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eawait\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='any' \u003Edb\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003Cdata-lsp lsp='any' \u003EcreateSession\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003Cdata-lsp lsp='const user: any' \u003Euser\u003C\u002Fdata-lsp\u003E));\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E&nbsp;\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Ereturn\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E { \u003Cdata-lsp lsp='(property) success: boolean' \u003Esuccess\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003Etrue\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E };\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  }\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-punctuation)\"\u003E,\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E\u003Cdata-lsp lsp='(property) register: (event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E) =\u003E Promise&amp;lt;void\u003E' \u003Eregister\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Easync\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E (\u003Cdata-lsp lsp='(parameter) event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E' \u003Eevent\u003C\u002Fdata-lsp\u003E) \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E\u002F\u002F TODO register the user\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  }\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E} satisfies \u003Cdata-lsp lsp='(alias) type \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actions\"\u003EActions\u003C\u002Fa\u003E = {&amp;#10;    [x: string]: Kit.\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-action\"\u003EAction\u003C\u002Fa\u003E&amp;lt;{}, void | Record&amp;lt;string, any\u003E, string | null\u003E;&amp;#10;}&amp;#10;import \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actions\"\u003EActions\u003C\u002Fa\u003E' \u003E\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actions\"\u003EActions\u003C\u002Fa\u003E\u003C\u002Fdata-lsp\u003E;\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003C\u002Fcode\u003E\u003C\u002Fdiv\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"js-version code-block\"\u003E\u003Cspan class=\"filename\"\u003Esrc\u002Froutes\u002Flogin\u002F+page.svelte\u003C\u002Fspan\u003E\u003Cpre class='language-svelte'\u003E\u003Ccode\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003Escript\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token script\"\u003E\u003Cspan class=\"token language-javascript\"\u003E\n\u003Cspan class=\"token comment wrapped\" style=\"--indent: 2ch\"\u003E  \u002F** @type {import('.\u002F$types').\u003Ca href=\"\u002Fdocs\u002Ftypes#app-pagedata\"\u003EPageData\u003C\u002Fa\u003E} *\u002F\u003C\u002Fspan\u003E  \u003Cspan class=\"token keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment wrapped\" style=\"--indent: 0ch\"\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token comment wrapped\" style=\"--indent: 2ch\"\u003E  \u002F** @type {import('.\u002F$types').ActionData} *\u002F\u003C\u002Fspan\u003E  \u003Cspan class=\"token keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E form\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u002F\u003C\u002Fspan\u003Escript\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token language-javascript\"\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E#\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E form\u003Cspan class=\"token operator\"\u003E?.\u003C\u002Fspan\u003Esuccess\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment wrapped\" style=\"--indent: 2ch\"\u003E  &lt;!-- this message is ephemeral; it exists because the page was rendered in\u003C\u002Fspan\u003E\u003Cspan class=\"token comment wrapped\" style=\"--indent: 7ch\"\u003E       response to a form submission. it will vanish if the user reloads --\u003E\u003C\u002Fspan\u003E  \u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003Ep\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003ESuccessfully logged in! Welcome back, \u003Cspan class=\"token language-javascript\"\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Euser\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ename\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u002F\u003C\u002Fspan\u003Ep\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"token language-javascript\"\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"ts-version code-block\"\u003E\u003Cspan class=\"filename\"\u003Esrc\u002Froutes\u002Flogin\u002F+page.svelte\u003C\u002Fspan\u003E\u003Cpre class='language-svelte'\u003E\u003Ccode\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003Escript\u003C\u002Fspan\u003E \u003Cspan class=\"token attr-name\"\u003Elang\u003C\u002Fspan\u003E\u003Cspan class=\"token attr-value\"\u003E\u003Cspan class=\"token punctuation\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003Ets\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token script\"\u003E\u003Cspan class=\"token language-javascript\"\u003E\n  \u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E type \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E \u003Ca href=\"\u002Fdocs\u002Ftypes#app-pagedata\"\u003EPageData\u003C\u002Fa\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E ActionData \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'.\u002F$types'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"token keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E \u003Cspan class=\"token literal-property property\"\u003Edata\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Ca href=\"\u002Fdocs\u002Ftypes#app-pagedata\"\u003EPageData\u003C\u002Fa\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"token keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E \u003Cspan class=\"token literal-property property\"\u003Eform\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E ActionData\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u002F\u003C\u002Fspan\u003Escript\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token language-javascript\"\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E#\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E form\u003Cspan class=\"token operator\"\u003E?.\u003C\u002Fspan\u003Esuccess\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment wrapped\" style=\"--indent: 2ch\"\u003E  &lt;!-- this message is ephemeral; it exists because the page was rendered in\u003C\u002Fspan\u003E\u003Cspan class=\"token comment wrapped\" style=\"--indent: 7ch\"\u003E       response to a form submission. it will vanish if the user reloads --\u003E\u003C\u002Fspan\u003E  \u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003Ep\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003ESuccessfully logged in! Welcome back, \u003Cspan class=\"token language-javascript\"\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Euser\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Ename\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u002F\u003C\u002Fspan\u003Ep\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"token language-javascript\"\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Ch3 id=\"anatomy-of-an-action-validation-errors\"\u003EValidation errors\u003Ca href=\"#anatomy-of-an-action-validation-errors\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh3\u003E\u003Cp\u003EIf the request couldn&#39;t be processed because of invalid data, you can return validation errors — along with the previously submitted form values — back to the user so that they can try again. The \u003Ccode\u003Efail\u003C\u002Fcode\u003E function lets you return an HTTP status code (typically 400 or 422, in the case of validation errors) along with the data. The status code is available through \u003Ccode\u003E$page.status\u003C\u002Fcode\u003E and the data through \u003Ccode\u003Eform\u003C\u002Fcode\u003E:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block\"\u003E\u003Cspan class=\"filename\"\u003Esrc\u002Froutes\u002Flogin\u002F+page.server.js\u003C\u002Fspan\u003E\u003Cpre class=\"language-diff\"\u003E\u003Ccode\u003E\u003Cspan class=\"inserted\"\u003Eimport { fail } from &#39;@sveltejs\u002Fkit&#39;;\n\u003C\u002Fspan\u003E\n\u002F** @type {import(&#39;.\u002F$types&#39;).\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actions\"\u003EActions\u003C\u002Fa\u003E} *\u002F\nexport const actions = {\n  login: async ({ cookies, request }) =&gt; {\n    const data = await request.formData();\n    const email = data.get(&#39;email&#39;);\n    const password = data.get(&#39;password&#39;);\n\n\u003Cspan class=\"inserted\"\u003E\t\tif (!email) {\n\u003C\u002Fspan\u003E\u003Cspan class=\"inserted\"\u003E\t\t\treturn fail(400, { email, missing: true });\n\u003C\u002Fspan\u003E\u003Cspan class=\"inserted\"\u003E\t\t}\n\u003C\u002Fspan\u003E\n    const user = await db.getUser(email);\n\n\u003Cspan class=\"inserted\"\u003E\t\tif (!user || user.password !== hash(password)) {\n\u003C\u002Fspan\u003E\u003Cspan class=\"inserted\"\u003E\t\t\treturn fail(400, { email, incorrect: true });\n\u003C\u002Fspan\u003E\u003Cspan class=\"inserted\"\u003E\t\t}\n\u003C\u002Fspan\u003E\n    cookies.set(&#39;sessionid&#39;, await db.createSession(user));\n\n    return { success: true };\n  },\n  register: async (event) =&gt; {\n    \u002F\u002F TODO register the user\n  }\n};\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cblockquote\u003E\n\u003Cp\u003ENote that as a precaution, we only return the email back to the page — not the password.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cdiv class=\"code-block\"\u003E\u003Cspan class=\"filename\"\u003Esrc\u002Froutes\u002Flogin\u002F+page.svelte\u003C\u002Fspan\u003E\u003Cpre class=\"language-diff\"\u003E\u003Ccode\u003E&lt;form method=&quot;POST&quot; action=&quot;?\u002Flogin&quot;&gt;\n\u003Cspan class=\"inserted\"\u003E\t{#if form?.missing}&lt;p class=&quot;error&quot;&gt;The email field is required&lt;\u002Fp&gt;{\u002Fif}\n\u003C\u002Fspan\u003E\u003Cspan class=\"inserted\"\u003E\t{#if form?.incorrect}&lt;p class=&quot;error&quot;&gt;Invalid credentials!&lt;\u002Fp&gt;{\u002Fif}\n\u003C\u002Fspan\u003E  &lt;label&gt;\n    Email\n\u003Cspan class=\"deleted\"\u003E\t\t&lt;input name=&quot;email&quot; type=&quot;email&quot;&gt;\n\u003C\u002Fspan\u003E\u003Cspan class=\"inserted\"\u003E\t\t&lt;input name=&quot;email&quot; type=&quot;email&quot; value={form?.email ?? &#39;&#39;}&gt;\n\u003C\u002Fspan\u003E  &lt;\u002Flabel&gt;\n  &lt;label&gt;\n    Password\n    &lt;input name=&quot;password&quot; type=&quot;password&quot;&gt;\n  &lt;\u002Flabel&gt;\n  &lt;button&gt;Log in&lt;\u002Fbutton&gt;\n  &lt;button formaction=&quot;?\u002Fregister&quot;&gt;Register&lt;\u002Fbutton&gt;\n&lt;\u002Fform&gt;\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp\u003EThe returned data must be serializable as JSON. Beyond that, the structure is entirely up to you. For example, if you had multiple forms on the page, you could distinguish which \u003Ccode\u003E&lt;form&gt;\u003C\u002Fcode\u003E the returned \u003Ccode\u003Eform\u003C\u002Fcode\u003E data referred to with an \u003Ccode\u003Eid\u003C\u002Fcode\u003E property or similar.\u003C\u002Fp\u003E\n\u003Ch3 id=\"anatomy-of-an-action-redirects\"\u003ERedirects\u003Ca href=\"#anatomy-of-an-action-redirects\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh3\u003E\u003Cp\u003ERedirects (and errors) work exactly the same as in \u003Ca href=\"load#redirects\"\u003E\u003Ccode\u003Eload\u003C\u002Fcode\u003E\u003C\u002Fa\u003E:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block\"\u003E\u003Cspan class=\"filename\"\u003Esrc\u002Froutes\u002Flogin\u002F+page.server.js\u003C\u002Fspan\u003E\u003Cpre class=\"language-diff\"\u003E\u003Ccode\u003E\u003Cspan class=\"inserted\"\u003Eimport { fail, redirect } from &#39;@sveltejs\u002Fkit&#39;;\n\u003C\u002Fspan\u003E\n\u002F** @type {import(&#39;.\u002F$types&#39;).\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actions\"\u003EActions\u003C\u002Fa\u003E} *\u002F\nexport const actions = {\n\u003Cspan class=\"inserted\"\u003E\tlogin: async ({ cookies, request, url }) =&gt; {\n\u003C\u002Fspan\u003E    const data = await request.formData();\n    const email = data.get(&#39;email&#39;);\n    const password = data.get(&#39;password&#39;);\n\n    const user = await db.getUser(email);\n    if (!user) {\n      return fail(400, { email, missing: true });\n    }\n\n    if (user.password !== hash(password)) {\n      return fail(400, { email, incorrect: true });\n    }\n\n    cookies.set(&#39;sessionid&#39;, await db.createSession(user));\n\n\u003Cspan class=\"inserted\"\u003E\t\tif (url.searchParams.has(&#39;redirectTo&#39;)) {\n\u003C\u002Fspan\u003E\u003Cspan class=\"inserted\"\u003E\t\t\tthrow redirect(303, url.searchParams.get(&#39;redirectTo&#39;));\n\u003C\u002Fspan\u003E\u003Cspan class=\"inserted\"\u003E\t\t}\n\u003C\u002Fspan\u003E\n    return { success: true };\n  },\n  register: async (event) =&gt; {\n    \u002F\u002F TODO register the user\n  }\n};\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Ch2 id=\"loading-data\"\u003ELoading data\u003Ca href=\"#loading-data\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh2\u003E\u003Cp\u003EAfter an action runs, the page will be re-rendered (unless a redirect or an unexpected error occurs), with the action&#39;s return value available to the page as the \u003Ccode\u003Eform\u003C\u002Fcode\u003E prop. This means that your page&#39;s \u003Ccode\u003Eload\u003C\u002Fcode\u003E functions will run after the action completes.\u003C\u002Fp\u003E\n\u003Cp\u003ENote that \u003Ccode\u003Ehandle\u003C\u002Fcode\u003E runs before the action is invoked, and does not re-run before the \u003Ccode\u003Eload\u003C\u002Fcode\u003E functions. This means that if, for example, you use \u003Ccode\u003Ehandle\u003C\u002Fcode\u003E to populate \u003Ccode\u003Eevent.locals\u003C\u002Fcode\u003E based on a cookie, you must update \u003Ccode\u003Eevent.locals\u003C\u002Fcode\u003E when you set or delete the cookie in an action:\u003C\u002Fp\u003E\n\u003Cdiv class=\"js-version code-block\"\u003E\u003Cspan class=\"filename\"\u003Esrc\u002Fhooks.server.js\u003C\u002Fspan\u003E\u003Cpre class=\"shiki twoslash lsp\" style=\"background-color: var(--shiki-color-background); color: var(--shiki-color-text)\"\u003E\u003Cdiv class=\"language-id\"\u003Ets\u003C\u002Fdiv\u003E\u003Cdiv class='code-container'\u003E\u003Ccode\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E\u002F** \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E@type\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E{import(&apos;@sveltejs\u002Fkit&apos;).\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-handle\"\u003EHandle\u003C\u002Fa\u003E}\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E *\u002F\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eexport\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Easync\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E\u003Cdata-lsp lsp='function handle(input: {&amp;#10;    event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;Partial&amp;lt;Record&amp;lt;string, string\u003E\u003E, string | null\u003E;&amp;#10;    resolve(event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;Partial&amp;lt;Record&amp;lt;string, string\u003E\u003E, string | null\u003E, opts?: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-resolveoptions\"\u003EResolveOptions\u003C\u002Fa\u003E | undefined): \u003Ca href=\"\u002Fdocs\u002Ftypes#private-types-maybepromise\"\u003EMaybePromise\u003C\u002Fa\u003E&amp;lt;...\u003E;&amp;#10;}): \u003Ca href=\"\u002Fdocs\u002Ftypes#private-types-maybepromise\"\u003EMaybePromise\u003C\u002Fa\u003E&amp;lt;...\u003E' \u003Ehandle\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E({ \u003Cdata-lsp lsp='(parameter) event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;Partial&amp;lt;Record&amp;lt;string, string\u003E\u003E, string | null\u003E' \u003Eevent\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-punctuation)\"\u003E,\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003Cdata-lsp lsp='(parameter) resolve: (event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;Partial&amp;lt;Record&amp;lt;string, string\u003E\u003E, string | null\u003E, opts?: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-resolveoptions\"\u003EResolveOptions\u003C\u002Fa\u003E | undefined) =\u003E \u003Ca href=\"\u002Fdocs\u002Ftypes#private-types-maybepromise\"\u003EMaybePromise\u003C\u002Fa\u003E&amp;lt;Response\u003E' \u003Eresolve\u003C\u002Fdata-lsp\u003E }) {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='(parameter) event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;Partial&amp;lt;Record&amp;lt;string, string\u003E\u003E, string | null\u003E' \u003Eevent\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='(property) \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;Partial&amp;lt;Record&amp;lt;string, string\u003E\u003E, string | null\u003E.locals: App.\u003Ca href=\"\u002Fdocs\u002Ftypes#app-locals\"\u003ELocals\u003C\u002Fa\u003E' \u003Elocals\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E.\u003Cdata-lsp lsp='(property) App.\u003Ca href=\"\u002Fdocs\u002Ftypes#app-locals\"\u003ELocals\u003C\u002Fa\u003E.user: {&amp;#10;    name: string;&amp;#10;} | null' \u003Euser\u003C\u002Fdata-lsp\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eawait\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E\u003Cdata-lsp lsp='function getUser(sessionid: string | undefined): {&amp;#10;    name: string;&amp;#10;}' \u003EgetUser\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='(parameter) event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;Partial&amp;lt;Record&amp;lt;string, string\u003E\u003E, string | null\u003E' \u003Eevent\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='(property) \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;Partial&amp;lt;Record&amp;lt;string, string\u003E\u003E, string | null\u003E.cookies: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-cookies\"\u003ECookies\u003C\u002Fa\u003E' \u003Ecookies\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003Cdata-lsp lsp='(method) \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-cookies\"\u003ECookies\u003C\u002Fa\u003E.get(name: string, opts?: CookieParseOptions | undefined): string | undefined' \u003Eget\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E&apos;sessionid&apos;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E));\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Ereturn\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E\u003Cdata-lsp lsp='(parameter) resolve: (event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;Partial&amp;lt;Record&amp;lt;string, string\u003E\u003E, string | null\u003E, opts?: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-resolveoptions\"\u003EResolveOptions\u003C\u002Fa\u003E | undefined) =\u003E \u003Ca href=\"\u002Fdocs\u002Ftypes#private-types-maybepromise\"\u003EMaybePromise\u003C\u002Fa\u003E&amp;lt;Response\u003E' \u003Eresolve\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003Cdata-lsp lsp='(parameter) event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;Partial&amp;lt;Record&amp;lt;string, string\u003E\u003E, string | null\u003E' \u003Eevent\u003C\u002Fdata-lsp\u003E);\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003C\u002Fcode\u003E\u003C\u002Fdiv\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"ts-version code-block\"\u003E\u003Cspan class=\"filename\"\u003Esrc\u002Fhooks.server.ts\u003C\u002Fspan\u003E\u003Cpre class=\"shiki twoslash lsp\" style=\"background-color: var(--shiki-color-background); color: var(--shiki-color-text)\"\u003E\u003Cdiv class=\"language-id\"\u003Ets\u003C\u002Fdiv\u003E\u003Cdiv class='code-container'\u003E\u003Ccode\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eimport\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Etype\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E { \u003Cdata-lsp lsp='(alias) interface \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-handle\"\u003EHandle\u003C\u002Fa\u003E&amp;#10;import \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-handle\"\u003EHandle\u003C\u002Fa\u003E' \u003E\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-handle\"\u003EHandle\u003C\u002Fa\u003E\u003C\u002Fdata-lsp\u003E } \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E&apos;@sveltejs\u002Fkit&apos;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E&nbsp;\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eexport\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Econst\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='const handle: ({ event, resolve }: {&amp;#10;    event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;Partial&amp;lt;Record&amp;lt;string, string\u003E\u003E, string | null\u003E;&amp;#10;    resolve(event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;Partial&amp;lt;Record&amp;lt;string, string\u003E\u003E, string | null\u003E, opts?: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-resolveoptions\"\u003EResolveOptions\u003C\u002Fa\u003E | undefined): \u003Ca href=\"\u002Fdocs\u002Ftypes#private-types-maybepromise\"\u003EMaybePromise\u003C\u002Fa\u003E&amp;lt;...\u003E;&amp;#10;}) =\u003E Promise&amp;lt;...\u003E' \u003Ehandle\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E (\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Easync\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E ({ \u003Cdata-lsp lsp='(parameter) event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;Partial&amp;lt;Record&amp;lt;string, string\u003E\u003E, string | null\u003E' \u003Eevent\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-punctuation)\"\u003E,\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003Cdata-lsp lsp='(parameter) resolve: (event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;Partial&amp;lt;Record&amp;lt;string, string\u003E\u003E, string | null\u003E, opts?: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-resolveoptions\"\u003EResolveOptions\u003C\u002Fa\u003E | undefined) =\u003E \u003Ca href=\"\u002Fdocs\u002Ftypes#private-types-maybepromise\"\u003EMaybePromise\u003C\u002Fa\u003E&amp;lt;Response\u003E' \u003Eresolve\u003C\u002Fdata-lsp\u003E }) \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='(parameter) event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;Partial&amp;lt;Record&amp;lt;string, string\u003E\u003E, string | null\u003E' \u003Eevent\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='(property) \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;Partial&amp;lt;Record&amp;lt;string, string\u003E\u003E, string | null\u003E.locals: App.\u003Ca href=\"\u002Fdocs\u002Ftypes#app-locals\"\u003ELocals\u003C\u002Fa\u003E' \u003Elocals\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E.\u003Cdata-lsp lsp='(property) App.\u003Ca href=\"\u002Fdocs\u002Ftypes#app-locals\"\u003ELocals\u003C\u002Fa\u003E.user: {&amp;#10;    name: string;&amp;#10;} | null' \u003Euser\u003C\u002Fdata-lsp\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eawait\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E\u003Cdata-lsp lsp='function getUser(sessionid: string | undefined): {&amp;#10;    name: string;&amp;#10;}' \u003EgetUser\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='(parameter) event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;Partial&amp;lt;Record&amp;lt;string, string\u003E\u003E, string | null\u003E' \u003Eevent\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='(property) \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;Partial&amp;lt;Record&amp;lt;string, string\u003E\u003E, string | null\u003E.cookies: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-cookies\"\u003ECookies\u003C\u002Fa\u003E' \u003Ecookies\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003Cdata-lsp lsp='(method) \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-cookies\"\u003ECookies\u003C\u002Fa\u003E.get(name: string, opts?: CookieParseOptions | undefined): string | undefined' \u003Eget\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E&apos;sessionid&apos;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E));\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Ereturn\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E\u003Cdata-lsp lsp='(parameter) resolve: (event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;Partial&amp;lt;Record&amp;lt;string, string\u003E\u003E, string | null\u003E, opts?: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-resolveoptions\"\u003EResolveOptions\u003C\u002Fa\u003E | undefined) =\u003E \u003Ca href=\"\u002Fdocs\u002Ftypes#private-types-maybepromise\"\u003EMaybePromise\u003C\u002Fa\u003E&amp;lt;Response\u003E' \u003Eresolve\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003Cdata-lsp lsp='(parameter) event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;Partial&amp;lt;Record&amp;lt;string, string\u003E\u003E, string | null\u003E' \u003Eevent\u003C\u002Fdata-lsp\u003E);\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E}) satisfies \u003Cdata-lsp lsp='(alias) interface \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-handle\"\u003EHandle\u003C\u002Fa\u003E&amp;#10;import \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-handle\"\u003EHandle\u003C\u002Fa\u003E' \u003E\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-handle\"\u003EHandle\u003C\u002Fa\u003E\u003C\u002Fdata-lsp\u003E;\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003C\u002Fcode\u003E\u003C\u002Fdiv\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"js-version code-block\"\u003E\u003Cspan class=\"filename\"\u003Esrc\u002Froutes\u002Faccount\u002F+page.server.js\u003C\u002Fspan\u003E\u003Cpre class=\"shiki twoslash lsp\" style=\"background-color: var(--shiki-color-background); color: var(--shiki-color-text)\"\u003E\u003Cdiv class=\"language-id\"\u003Ets\u003C\u002Fdiv\u003E\u003Cdiv class='code-container'\u003E\u003Ccode\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E\u002F** \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E@type\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E{import(&apos;.\u002F$types&apos;).PageServerLoad}\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E *\u002F\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eexport\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E\u003Cdata-lsp lsp='function load(event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-serverloadevent\"\u003EServerLoadEvent\u003C\u002Fa\u003E&amp;lt;{}, Record&amp;lt;string, any\u003E, string | null\u003E): \u003Ca href=\"\u002Fdocs\u002Ftypes#private-types-maybepromise\"\u003EMaybePromise\u003C\u002Fa\u003E&amp;lt;void | Record&amp;lt;string, any\u003E\u003E' \u003Eload\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003Cdata-lsp lsp='(parameter) event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-serverloadevent\"\u003EServerLoadEvent\u003C\u002Fa\u003E&amp;lt;{}, Record&amp;lt;string, any\u003E, string | null\u003E' \u003Eevent\u003C\u002Fdata-lsp\u003E) {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Ereturn\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E    \u003Cdata-lsp lsp='(property) user: {&amp;#10;    name: string;&amp;#10;} | null' \u003Euser\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='(parameter) event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-serverloadevent\"\u003EServerLoadEvent\u003C\u002Fa\u003E&amp;lt;{}, Record&amp;lt;string, any\u003E, string | null\u003E' \u003Eevent\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='(property) \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E.locals: App.\u003Ca href=\"\u002Fdocs\u002Ftypes#app-locals\"\u003ELocals\u003C\u002Fa\u003E' \u003Elocals\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E.\u003Cdata-lsp lsp='(property) App.\u003Ca href=\"\u002Fdocs\u002Ftypes#app-locals\"\u003ELocals\u003C\u002Fa\u003E.user: {&amp;#10;    name: string;&amp;#10;} | null' \u003Euser\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  };\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E&nbsp;\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E\u002F** \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E@type\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E{import(&apos;.\u002F$types&apos;).\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actions\"\u003EActions\u003C\u002Fa\u003E}\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E *\u002F\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eexport\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Econst\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='const actions: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actions\"\u003EActions\u003C\u002Fa\u003E' \u003Eactions\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E\u003Cdata-lsp lsp='(property) logout: (event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E) =\u003E Promise&amp;lt;void\u003E' \u003Elogout\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Easync\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E (\u003Cdata-lsp lsp='(parameter) event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E' \u003Eevent\u003C\u002Fdata-lsp\u003E) \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='(parameter) event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E' \u003Eevent\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='(property) \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E.cookies: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-cookies\"\u003ECookies\u003C\u002Fa\u003E' \u003Ecookies\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003Cdata-lsp lsp='(method) \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-cookies\"\u003ECookies\u003C\u002Fa\u003E.delete(name: string, opts?: CookieSerializeOptions | undefined): void' \u003Edelete\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E&apos;sessionid&apos;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E);\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='(parameter) event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E' \u003Eevent\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='(property) \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;Params extends Partial&amp;lt;Record&amp;lt;string, string\u003E\u003E = Partial&amp;lt;Record&amp;lt;string, string\u003E\u003E, RouteId extends string | null = string | null\u003E.locals: App.\u003Ca href=\"\u002Fdocs\u002Ftypes#app-locals\"\u003ELocals\u003C\u002Fa\u003E' \u003Elocals\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E.\u003Cdata-lsp lsp='(property) App.\u003Ca href=\"\u002Fdocs\u002Ftypes#app-locals\"\u003ELocals\u003C\u002Fa\u003E.user: {&amp;#10;    name: string;&amp;#10;} | null' \u003Euser\u003C\u002Fdata-lsp\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  }\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E};\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003C\u002Fcode\u003E\u003C\u002Fdiv\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"ts-version code-block\"\u003E\u003Cspan class=\"filename\"\u003Esrc\u002Froutes\u002Faccount\u002F+page.server.ts\u003C\u002Fspan\u003E\u003Cpre class=\"shiki twoslash lsp\" style=\"background-color: var(--shiki-color-background); color: var(--shiki-color-text)\"\u003E\u003Cdiv class=\"language-id\"\u003Ets\u003C\u002Fdiv\u003E\u003Cdiv class='code-container'\u003E\u003Ccode\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eimport\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Etype\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E { \u003Cdata-lsp lsp='(alias) type PageServerLoad = Kit.\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-serverload\"\u003EServerLoad\u003C\u002Fa\u003E&amp;lt;{}, Record&amp;lt;string, any\u003E, void | Record&amp;lt;string, any\u003E, string | null\u003E&amp;#10;import PageServerLoad' \u003EPageServerLoad\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-punctuation)\"\u003E,\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003Cdata-lsp lsp='(alias) type \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actions\"\u003EActions\u003C\u002Fa\u003E = {&amp;#10;    [x: string]: Kit.\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-action\"\u003EAction\u003C\u002Fa\u003E&amp;lt;{}, void | Record&amp;lt;string, any\u003E, string | null\u003E;&amp;#10;}&amp;#10;import \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actions\"\u003EActions\u003C\u002Fa\u003E' \u003E\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actions\"\u003EActions\u003C\u002Fa\u003E\u003C\u002Fdata-lsp\u003E } \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E&apos;.\u002F$types&apos;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E&nbsp;\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eexport\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Econst\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='const load: (event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-serverloadevent\"\u003EServerLoadEvent\u003C\u002Fa\u003E&amp;lt;{}, Record&amp;lt;string, any\u003E, string | null\u003E) =\u003E {&amp;#10;    user: {&amp;#10;        name: string;&amp;#10;    } | null;&amp;#10;}' \u003Eload\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E ((\u003Cdata-lsp lsp='(parameter) event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-serverloadevent\"\u003EServerLoadEvent\u003C\u002Fa\u003E&amp;lt;{}, Record&amp;lt;string, any\u003E, string | null\u003E' \u003Eevent\u003C\u002Fdata-lsp\u003E) \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Ereturn\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E    \u003Cdata-lsp lsp='(property) user: {&amp;#10;    name: string;&amp;#10;} | null' \u003Euser\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='(parameter) event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-serverloadevent\"\u003EServerLoadEvent\u003C\u002Fa\u003E&amp;lt;{}, Record&amp;lt;string, any\u003E, string | null\u003E' \u003Eevent\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='(property) \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E.locals: App.\u003Ca href=\"\u002Fdocs\u002Ftypes#app-locals\"\u003ELocals\u003C\u002Fa\u003E' \u003Elocals\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E.\u003Cdata-lsp lsp='(property) App.\u003Ca href=\"\u002Fdocs\u002Ftypes#app-locals\"\u003ELocals\u003C\u002Fa\u003E.user: {&amp;#10;    name: string;&amp;#10;} | null' \u003Euser\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  };\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E}) satisfies \u003Cdata-lsp lsp='(alias) type PageServerLoad = Kit.\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-serverload\"\u003EServerLoad\u003C\u002Fa\u003E&amp;lt;{}, Record&amp;lt;string, any\u003E, void | Record&amp;lt;string, any\u003E, string | null\u003E&amp;#10;import PageServerLoad' \u003EPageServerLoad\u003C\u002Fdata-lsp\u003E;\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E&nbsp;\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eexport\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Econst\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='const actions: {&amp;#10;    logout: (event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E) =\u003E Promise&amp;lt;void\u003E;&amp;#10;}' \u003Eactions\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E\u003Cdata-lsp lsp='(property) logout: (event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E) =\u003E Promise&amp;lt;void\u003E' \u003Elogout\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Easync\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E (\u003Cdata-lsp lsp='(parameter) event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E' \u003Eevent\u003C\u002Fdata-lsp\u003E) \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='(parameter) event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E' \u003Eevent\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='(property) \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E.cookies: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-cookies\"\u003ECookies\u003C\u002Fa\u003E' \u003Ecookies\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E.\u003Cdata-lsp lsp='(method) \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-cookies\"\u003ECookies\u003C\u002Fa\u003E.delete(name: string, opts?: CookieSerializeOptions | undefined): void' \u003Edelete\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E&apos;sessionid&apos;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E);\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='(parameter) event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E' \u003Eevent\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='(property) \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;Params extends Partial&amp;lt;Record&amp;lt;string, string\u003E\u003E = Partial&amp;lt;Record&amp;lt;string, string\u003E\u003E, RouteId extends string | null = string | null\u003E.locals: App.\u003Ca href=\"\u002Fdocs\u002Ftypes#app-locals\"\u003ELocals\u003C\u002Fa\u003E' \u003Elocals\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E.\u003Cdata-lsp lsp='(property) App.\u003Ca href=\"\u002Fdocs\u002Ftypes#app-locals\"\u003ELocals\u003C\u002Fa\u003E.user: {&amp;#10;    name: string;&amp;#10;} | null' \u003Euser\u003C\u002Fdata-lsp\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  }\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E} satisfies \u003Cdata-lsp lsp='(alias) type \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actions\"\u003EActions\u003C\u002Fa\u003E = {&amp;#10;    [x: string]: Kit.\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-action\"\u003EAction\u003C\u002Fa\u003E&amp;lt;{}, void | Record&amp;lt;string, any\u003E, string | null\u003E;&amp;#10;}&amp;#10;import \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actions\"\u003EActions\u003C\u002Fa\u003E' \u003E\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actions\"\u003EActions\u003C\u002Fa\u003E\u003C\u002Fdata-lsp\u003E;\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003C\u002Fcode\u003E\u003C\u002Fdiv\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Ch2 id=\"progressive-enhancement\"\u003EProgressive enhancement\u003Ca href=\"#progressive-enhancement\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh2\u003E\u003Cp\u003EIn the preceding sections we built a \u003Ccode\u003E\u002Flogin\u003C\u002Fcode\u003E action that \u003Ca href=\"https:\u002F\u002Fkryogenix.org\u002Fcode\u002Fbrowser\u002Feveryonehasjs.html\"\u003Eworks without client-side JavaScript\u003C\u002Fa\u003E — not a \u003Ccode\u003Efetch\u003C\u002Fcode\u003E in sight. That&#39;s great, but when JavaScript \u003Cem\u003Eis\u003C\u002Fem\u003E available we can progressively enhance our form interactions to provide a better user experience.\u003C\u002Fp\u003E\n\u003Ch3 id=\"progressive-enhancement-use-enhance\"\u003Euse:enhance\u003Ca href=\"#progressive-enhancement-use-enhance\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh3\u003E\u003Cp\u003EThe easiest way to progressively enhance a form is to add the \u003Ccode\u003Euse:enhance\u003C\u002Fcode\u003E action:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block\"\u003E\u003Cspan class=\"filename\"\u003Esrc\u002Froutes\u002Flogin\u002F+page.svelte\u003C\u002Fspan\u003E\u003Cpre class=\"language-diff\"\u003E\u003Ccode\u003E&lt;script&gt;\n\u003Cspan class=\"inserted\"\u003E\timport { enhance } from &#39;$app\u002Fforms&#39;;\n\u003C\u002Fspan\u003E\n  \u002F** @type {import(&#39;.\u002F$types&#39;).ActionData} *\u002F\n  export let form;\n&lt;\u002Fscript&gt;\n\n\u003Cspan class=\"inserted\"\u003E&lt;form method=&quot;POST&quot; use:enhance&gt;\n\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cblockquote\u003E\n\u003Cp\u003EYes, it&#39;s a little confusing that the \u003Ccode\u003Eenhance\u003C\u002Fcode\u003E action and \u003Ccode\u003E&lt;form action&gt;\u003C\u002Fcode\u003E are both called &#39;action&#39;. These docs are action-packed. Sorry.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003EWithout an argument, \u003Ccode\u003Euse:enhance\u003C\u002Fcode\u003E will emulate the browser-native behaviour, just without the full-page reloads. It will:\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003Eupdate the \u003Ccode\u003Eform\u003C\u002Fcode\u003E property, \u003Ccode\u003E$page.form\u003C\u002Fcode\u003E and \u003Ccode\u003E$page.status\u003C\u002Fcode\u003E on a successful or invalid response, but only if the action is on the same page you&#39;re submitting from. So for example if your form looks like \u003Ccode\u003E&lt;form action=&quot;\u002Fsomewhere\u002Felse&quot; ..&gt;\u003C\u002Fcode\u003E, \u003Ccode\u003Eform\u003C\u002Fcode\u003E and \u003Ccode\u003E$page\u003C\u002Fcode\u003E will \u003Cem\u003Enot\u003C\u002Fem\u003E be updated. This is because in the native form submission case you would be redirected to the page the action is on. If you want to have them updated either way, use \u003Ca href=\"#progressive-enhancement-applyaction\"\u003E\u003Ccode\u003EapplyAction\u003C\u002Fcode\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003Ereset the \u003Ccode\u003E&lt;form&gt;\u003C\u002Fcode\u003E element and invalidate all data using \u003Ccode\u003EinvalidateAll\u003C\u002Fcode\u003E on a successful response\u003C\u002Fli\u003E\n\u003Cli\u003Ecall \u003Ccode\u003Egoto\u003C\u002Fcode\u003E on a redirect response\u003C\u002Fli\u003E\n\u003Cli\u003Erender the nearest \u003Ccode\u003E+error\u003C\u002Fcode\u003E boundary if an error occurs\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"accessibility#focus-management\"\u003Ereset focus\u003C\u002Fa\u003E to the appropriate element\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003ETo customise the behaviour, you can provide a \u003Ccode\u003E\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-submitfunction\"\u003ESubmitFunction\u003C\u002Fa\u003E\u003C\u002Fcode\u003E that runs immediately before the form is submitted, and (optionally) returns a callback that runs with the \u003Ccode\u003E\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actionresult\"\u003EActionResult\u003C\u002Fa\u003E\u003C\u002Fcode\u003E. Note that if you return a callback, the default behavior mentioned above is not triggered. To get it back, call \u003Ccode\u003Eupdate\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Cpre class='language-svelte'\u003E\u003Ccode\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003Eform\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token attr-name\"\u003Emethod\u003C\u002Fspan\u003E\u003Cspan class=\"token attr-value\"\u003E\u003Cspan class=\"token punctuation\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003EPOST\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token attr-name\"\u003E\u003Cspan class=\"token namespace\"\u003Euse:\u003C\u002Fspan\u003Eenhance=\u003C\u002Fspan\u003E\u003Cspan class=\"token language-javascript\"\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E form\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E action\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E cancel\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E submitter \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment wrapped\" style=\"--indent: 4ch\"\u003E    \u002F\u002F `form` is the `&lt;form\u003E` element\u003C\u002Fspan\u003E\u003Cspan class=\"token comment wrapped\" style=\"--indent: 4ch\"\u003E    \u002F\u002F `data` is its `FormData` object\u003C\u002Fspan\u003E\u003Cspan class=\"token comment wrapped\" style=\"--indent: 4ch\"\u003E    \u002F\u002F `action` is the URL to which the form is posted\u003C\u002Fspan\u003E\u003Cspan class=\"token comment wrapped\" style=\"--indent: 4ch\"\u003E    \u002F\u002F `cancel()` will prevent the submission\u003C\u002Fspan\u003E\u003Cspan class=\"token comment wrapped\" style=\"--indent: 4ch\"\u003E    \u002F\u002F `submitter` is the `HTMLElement` that caused the form to be submitted\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Easync\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E result\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E update \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment wrapped\" style=\"--indent: 6ch\"\u003E      \u002F\u002F `result` is an `\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actionresult\"\u003EActionResult\u003C\u002Fa\u003E` object\u003C\u002Fspan\u003E\u003Cspan class=\"token comment wrapped\" style=\"--indent: 6ch\"\u003E      \u002F\u002F `update` is a function which triggers the logic that would be triggered if this callback wasn't set\u003C\u002Fspan\u003E    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EYou can use these functions to show and hide loading UI, and so on.\u003C\u002Fp\u003E\n\u003Ch3 id=\"progressive-enhancement-applyaction\"\u003EapplyAction\u003Ca href=\"#progressive-enhancement-applyaction\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh3\u003E\u003Cp\u003EIf you provide your own callbacks, you may need to reproduce part of the default \u003Ccode\u003Euse:enhance\u003C\u002Fcode\u003E behaviour, such as showing the nearest \u003Ccode\u003E+error\u003C\u002Fcode\u003E boundary. Most of the time, calling \u003Ccode\u003Eupdate\u003C\u002Fcode\u003E passed to the callback is enough. If you need more customization you can do so with \u003Ccode\u003EapplyAction\u003C\u002Fcode\u003E:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block\"\u003E\u003Cspan class=\"filename\"\u003Esrc\u002Froutes\u002Flogin\u002F+page.svelte\u003C\u002Fspan\u003E\u003Cpre class=\"language-diff\"\u003E\u003Ccode\u003E&lt;script&gt;\n\u003Cspan class=\"inserted\"\u003E\timport { enhance, applyAction } from &#39;$app\u002Fforms&#39;;\n\u003C\u002Fspan\u003E\n  \u002F** @type {import(&#39;.\u002F$types&#39;).ActionData} *\u002F\n  export let form;\n&lt;\u002Fscript&gt;\n\n&lt;form\n  method=&quot;POST&quot;\n  use:enhance={({ form, data, action, cancel }) =&gt; {\n    \u002F\u002F `form` is the `&lt;form&gt;` element\n    \u002F\u002F `data` is its `FormData` object\n    \u002F\u002F `action` is the URL to which the form is posted\n    \u002F\u002F `cancel()` will prevent the submission\n\n    return async ({ result }) =&gt; {\n      \u002F\u002F `result` is an `\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actionresult\"\u003EActionResult\u003C\u002Fa\u003E` object\n\u003Cspan class=\"inserted\"\u003E\t\t\tif (result.type === &#39;error&#39;) {\n\u003C\u002Fspan\u003E\u003Cspan class=\"inserted\"\u003E\t\t\t\tawait applyAction(result);\n\u003C\u002Fspan\u003E\u003Cspan class=\"inserted\"\u003E\t\t\t}\n\u003C\u002Fspan\u003E    };\n  }}\n&gt;\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp\u003EThe behaviour of \u003Ccode\u003EapplyAction(result)\u003C\u002Fcode\u003E depends on \u003Ccode\u003Eresult.type\u003C\u002Fcode\u003E:\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode\u003Esuccess\u003C\u002Fcode\u003E, \u003Ccode\u003Efailure\u003C\u002Fcode\u003E — sets \u003Ccode\u003E$page.status\u003C\u002Fcode\u003E to \u003Ccode\u003Eresult.status\u003C\u002Fcode\u003E and updates \u003Ccode\u003Eform\u003C\u002Fcode\u003E and \u003Ccode\u003E$page.form\u003C\u002Fcode\u003E to \u003Ccode\u003Eresult.data\u003C\u002Fcode\u003E (regardless of where you are submitting from, in contrast to \u003Ccode\u003Eupdate\u003C\u002Fcode\u003E from \u003Ccode\u003Eenhance\u003C\u002Fcode\u003E)\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Eredirect\u003C\u002Fcode\u003E — calls \u003Ccode\u003Egoto(result.location)\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Eerror\u003C\u002Fcode\u003E — renders the nearest \u003Ccode\u003E+error\u003C\u002Fcode\u003E boundary with \u003Ccode\u003Eresult.error\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003EIn all cases, \u003Ca href=\"accessibility#focus-management\"\u003Efocus will be reset\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003Ch3 id=\"progressive-enhancement-custom-event-listener\"\u003ECustom event listener\u003Ca href=\"#progressive-enhancement-custom-event-listener\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh3\u003E\u003Cp\u003EWe can also implement progressive enhancement ourselves, without \u003Ccode\u003Euse:enhance\u003C\u002Fcode\u003E, with a normal event listener on the \u003Ccode\u003E&lt;form&gt;\u003C\u002Fcode\u003E:\u003C\u002Fp\u003E\n\u003Cdiv class=\"js-version code-block\"\u003E\u003Cspan class=\"filename\"\u003Esrc\u002Froutes\u002Flogin\u002F+page.svelte\u003C\u002Fspan\u003E\u003Cpre class='language-svelte'\u003E\u003Ccode\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003Escript\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token script\"\u003E\u003Cspan class=\"token language-javascript\"\u003E\n  \u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E invalidateAll\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E goto \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'$app\u002Fnavigation'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E applyAction\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E deserialize \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'$app\u002Fforms'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment wrapped\" style=\"--indent: 0ch\"\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token comment wrapped\" style=\"--indent: 2ch\"\u003E  \u002F** @type {import('.\u002F$types').ActionData} *\u002F\u003C\u002Fspan\u003E  \u003Cspan class=\"token keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E form\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment wrapped\" style=\"--indent: 0ch\"\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token comment wrapped\" style=\"--indent: 2ch\"\u003E  \u002F** @type {any} *\u002F\u003C\u002Fspan\u003E  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E error\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"token keyword\"\u003Easync\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EhandleSubmit\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Eevent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E data \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EFormData\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E response \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Eawait\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Efetch\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eaction\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token literal-property property\"\u003Emethod\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'POST'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token literal-property property\"\u003Ebody\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E data\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment wrapped\" style=\"--indent: 0ch\"\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token comment wrapped\" style=\"--indent: 4ch\"\u003E    \u002F** @type {import('@sveltejs\u002Fkit').\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actionresult\"\u003EActionResult\u003C\u002Fa\u003E} *\u002F\u003C\u002Fspan\u003E    \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E result \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Edeserialize\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Eawait\u003C\u002Fspan\u003E response\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Etext\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eresult\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Etype \u003Cspan class=\"token operator\"\u003E===\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'success'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment wrapped\" style=\"--indent: 6ch\"\u003E      \u002F\u002F re-run all `load` functions, following the successful update\u003C\u002Fspan\u003E      \u003Cspan class=\"token keyword\"\u003Eawait\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EinvalidateAll\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"token function\"\u003EapplyAction\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eresult\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u002F\u003C\u002Fspan\u003Escript\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003Eform\u003C\u002Fspan\u003E \u003Cspan class=\"token attr-name\"\u003Emethod\u003C\u002Fspan\u003E\u003Cspan class=\"token attr-value\"\u003E\u003Cspan class=\"token punctuation\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003EPOST\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token attr-name\"\u003E\u003Cspan class=\"token namespace\"\u003Eon:\u003C\u002Fspan\u003Esubmit|preventDefault=\u003C\u002Fspan\u003E\u003Cspan class=\"token language-javascript\"\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003EhandleSubmit\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment wrapped\" style=\"--indent: 2ch\"\u003E  &lt;!-- content --\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u002F\u003C\u002Fspan\u003Eform\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"ts-version code-block\"\u003E\u003Cspan class=\"filename\"\u003Esrc\u002Froutes\u002Flogin\u002F+page.svelte\u003C\u002Fspan\u003E\u003Cpre class='language-svelte'\u003E\u003Ccode\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003Escript\u003C\u002Fspan\u003E \u003Cspan class=\"token attr-name\"\u003Elang\u003C\u002Fspan\u003E\u003Cspan class=\"token attr-value\"\u003E\u003Cspan class=\"token punctuation\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003Ets\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token script\"\u003E\u003Cspan class=\"token language-javascript\"\u003E\n  \u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E invalidateAll\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E goto \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'$app\u002Fnavigation'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E applyAction\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E deserialize \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'$app\u002Fforms'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E type \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E ActionData \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'.\u002F$types'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E type \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actionresult\"\u003EActionResult\u003C\u002Fa\u003E \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'@sveltejs\u002Fkit'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"token keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E \u003Cspan class=\"token literal-property property\"\u003Eform\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E ActionData\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E \u003Cspan class=\"token literal-property property\"\u003Eerror\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E any\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"token keyword\"\u003Easync\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EhandleSubmit\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Eevent\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E data \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EFormData\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E response \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Eawait\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Efetch\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Ethis\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eaction\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token literal-property property\"\u003Emethod\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'POST'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token literal-property property\"\u003Ebody\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E data\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E \u003Cspan class=\"token literal-property property\"\u003Eresult\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-actionresult\"\u003EActionResult\u003C\u002Fa\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Edeserialize\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Eawait\u003C\u002Fspan\u003E response\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Etext\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eresult\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Etype \u003Cspan class=\"token operator\"\u003E===\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'success'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment wrapped\" style=\"--indent: 6ch\"\u003E      \u002F\u002F re-run all `load` functions, following the successful update\u003C\u002Fspan\u003E      \u003Cspan class=\"token keyword\"\u003Eawait\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EinvalidateAll\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"token function\"\u003EapplyAction\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eresult\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u002F\u003C\u002Fspan\u003Escript\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003Eform\u003C\u002Fspan\u003E \u003Cspan class=\"token attr-name\"\u003Emethod\u003C\u002Fspan\u003E\u003Cspan class=\"token attr-value\"\u003E\u003Cspan class=\"token punctuation\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003EPOST\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token attr-name\"\u003E\u003Cspan class=\"token namespace\"\u003Eon:\u003C\u002Fspan\u003Esubmit|preventDefault=\u003C\u002Fspan\u003E\u003Cspan class=\"token language-javascript\"\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003EhandleSubmit\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment wrapped\" style=\"--indent: 2ch\"\u003E  &lt;!-- content --\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u002F\u003C\u002Fspan\u003Eform\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cp\u003ENote that you need to \u003Ccode\u003Edeserialize\u003C\u002Fcode\u003E the response before processing it further using the corresponding method from \u003Ccode\u003E$app\u002Fforms\u003C\u002Fcode\u003E. \u003Ccode\u003EJSON.parse()\u003C\u002Fcode\u003E isn&#39;t enough because form actions - like \u003Ccode\u003Eload\u003C\u002Fcode\u003E functions - also support returning \u003Ccode\u003EDate\u003C\u002Fcode\u003E or \u003Ccode\u003EBigInt\u003C\u002Fcode\u003E objects.\u003C\u002Fp\u003E\n\u003Cp\u003EIf you have a \u003Ccode\u003E+server.js\u003C\u002Fcode\u003E alongside your \u003Ccode\u003E+page.server.js\u003C\u002Fcode\u003E, \u003Ccode\u003Efetch\u003C\u002Fcode\u003E requests will be routed there by default. To \u003Ccode\u003EPOST\u003C\u002Fcode\u003E to an action in \u003Ccode\u003E+page.server.js\u003C\u002Fcode\u003E instead, use the custom \u003Ccode\u003Ex-sveltekit-action\u003C\u002Fcode\u003E header:\u003C\u002Fp\u003E\n\u003Cpre class=\"language-diff\"\u003E\u003Ccode\u003Econst response = await fetch(this.action, {\n  method: &#39;POST&#39;,\n  body: data,\n\u003Cspan class=\"inserted\"\u003E\theaders: {\n\u003C\u002Fspan\u003E\u003Cspan class=\"inserted\"\u003E\t\t&#39;x-sveltekit-action&#39;: &#39;true&#39;\n\u003C\u002Fspan\u003E\u003Cspan class=\"inserted\"\u003E\t}\n\u003C\u002Fspan\u003E});\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch2 id=\"alternatives\"\u003EAlternatives\u003Ca href=\"#alternatives\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh2\u003E\u003Cp\u003EForm actions are the preferred way to send data to the server, since they can be progressively enhanced, but you can also use \u003Ca href=\"routing#server\"\u003E\u003Ccode\u003E+server.js\u003C\u002Fcode\u003E\u003C\u002Fa\u003E files to expose (for example) a JSON API. Here&#39;s how such an interaction could look like:\u003C\u002Fp\u003E\n\u003Cdiv class=\"code-block\"\u003E\u003Cspan class=\"filename\"\u003Esend-message\u002F+page.svelte\u003C\u002Fspan\u003E\u003Cpre class='language-svelte'\u003E\u003Ccode\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003Escript\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token script\"\u003E\u003Cspan class=\"token language-javascript\"\u003E\n  \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Ererun\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003Efetch\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'\u002Fapi\u002Fci'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token literal-property property\"\u003Emethod\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'POST'\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u002F\u003C\u002Fspan\u003Escript\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003Ebutton\u003C\u002Fspan\u003E \u003Cspan class=\"token attr-name\"\u003E\u003Cspan class=\"token namespace\"\u003Eon:\u003C\u002Fspan\u003Eclick=\u003C\u002Fspan\u003E\u003Cspan class=\"token language-javascript\"\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003Ererun\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003ERerun CI\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u002F\u003C\u002Fspan\u003Ebutton\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"js-version code-block\"\u003E\u003Cspan class=\"filename\"\u003Eapi\u002Fci\u002F+server.js\u003C\u002Fspan\u003E\u003Cpre class=\"shiki twoslash lsp\" style=\"background-color: var(--shiki-color-background); color: var(--shiki-color-text)\"\u003E\u003Cdiv class=\"language-id\"\u003Ets\u003C\u002Fdiv\u003E\u003Cdiv class='code-container'\u003E\u003Ccode\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E\u002F** \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E@type\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E{import(&apos;.\u002F$types&apos;).\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requesthandler\"\u003ERequestHandler\u003C\u002Fa\u003E}\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E *\u002F\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eexport\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-function)\"\u003E\u003Cdata-lsp lsp='function POST(event: \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requestevent\"\u003ERequestEvent\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E): \u003Ca href=\"\u002Fdocs\u002Ftypes#private-types-maybepromise\"\u003EMaybePromise\u003C\u002Fa\u003E&amp;lt;Response\u003E' \u003EPOST\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E() {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E\u002F\u002F do something\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003C\u002Fcode\u003E\u003C\u002Fdiv\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"ts-version code-block\"\u003E\u003Cspan class=\"filename\"\u003Eapi\u002Fci\u002F+server.ts\u003C\u002Fspan\u003E\u003Cpre class=\"shiki twoslash lsp\" style=\"background-color: var(--shiki-color-background); color: var(--shiki-color-text)\"\u003E\u003Cdiv class=\"language-id\"\u003Ets\u003C\u002Fdiv\u003E\u003Cdiv class='code-container'\u003E\u003Ccode\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eimport\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Etype\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E { \u003Cdata-lsp lsp='(alias) type \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requesthandler\"\u003ERequestHandler\u003C\u002Fa\u003E = Kit.\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requesthandler\"\u003ERequestHandler\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E&amp;#10;import \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requesthandler\"\u003ERequestHandler\u003C\u002Fa\u003E' \u003E\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requesthandler\"\u003ERequestHandler\u003C\u002Fa\u003E\u003C\u002Fdata-lsp\u003E } \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-string-expression)\"\u003E&apos;.\u002F$types&apos;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E&nbsp;\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Eexport\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003Econst\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-constant)\"\u003E\u003Cdata-lsp lsp='const POST: () =\u003E void' \u003EPOST\u003C\u002Fdata-lsp\u003E\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E (() \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-keyword)\"\u003E=&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: var(--shiki-token-comment)\"\u003E\u002F\u002F do something\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color: var(--shiki-color-text)\"\u003E}) satisfies \u003Cdata-lsp lsp='(alias) type \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requesthandler\"\u003ERequestHandler\u003C\u002Fa\u003E = Kit.\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requesthandler\"\u003ERequestHandler\u003C\u002Fa\u003E&amp;lt;{}, string | null\u003E&amp;#10;import \u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requesthandler\"\u003ERequestHandler\u003C\u002Fa\u003E' \u003E\u003Ca href=\"\u002Fdocs\u002Ftypes#public-types-requesthandler\"\u003ERequestHandler\u003C\u002Fa\u003E\u003C\u002Fdata-lsp\u003E;\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003C\u002Fcode\u003E\u003C\u002Fdiv\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003Ch2 id=\"get-vs-post\"\u003EGET vs POST\u003Ca href=\"#get-vs-post\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh2\u003E\u003Cp\u003EAs we&#39;ve seen, to invoke a form action you must use \u003Ccode\u003Emethod=&quot;POST&quot;\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003ESome forms don&#39;t need to \u003Ccode\u003EPOST\u003C\u002Fcode\u003E data to the server — search inputs, for example. For these you can use \u003Ccode\u003Emethod=&quot;GET&quot;\u003C\u002Fcode\u003E (or, equivalently, no \u003Ccode\u003Emethod\u003C\u002Fcode\u003E at all), and SvelteKit will treat them like \u003Ccode\u003E&lt;a&gt;\u003C\u002Fcode\u003E elements, using the client-side router instead of a full page navigation:\u003C\u002Fp\u003E\n\u003Cpre class='language-markup'\u003E\u003Ccode\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003Eform\u003C\u002Fspan\u003E \u003Cspan class=\"token attr-name\"\u003Eaction\u003C\u002Fspan\u003E\u003Cspan class=\"token attr-value\"\u003E\u003Cspan class=\"token punctuation attr-equals\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003E\u002Fsearch\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003Elabel\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n    Search\n    \u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003Einput\u003C\u002Fspan\u003E \u003Cspan class=\"token attr-name\"\u003Ename\u003C\u002Fspan\u003E\u003Cspan class=\"token attr-value\"\u003E\u003Cspan class=\"token punctuation attr-equals\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003Eq\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u002F\u003C\u002Fspan\u003Elabel\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u002F\u003C\u002Fspan\u003Eform\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003ESubmitting this form will navigate to \u003Ccode\u003E\u002Fsearch?q=...\u003C\u002Fcode\u003E and invoke your load function but will not invoke an action. As with \u003Ccode\u003E&lt;a&gt;\u003C\u002Fcode\u003E elements, you can set the \u003Ca href=\"link-options#data-sveltekit-reload\"\u003E\u003Ccode\u003Edata-sveltekit-reload\u003C\u002Fcode\u003E\u003C\u002Fa\u003E, \u003Ca href=\"link-options#data-sveltekit-replacestate\"\u003E\u003Ccode\u003Edata-sveltekit-replacestate\u003C\u002Fcode\u003E\u003C\u002Fa\u003E, \u003Ca href=\"link-options#data-sveltekit-keepfocus\"\u003E\u003Ccode\u003Edata-sveltekit-keepfocus\u003C\u002Fcode\u003E\u003C\u002Fa\u003E and \u003Ca href=\"link-options#data-sveltekit-noscroll\"\u003E\u003Ccode\u003Edata-sveltekit-noscroll\u003C\u002Fcode\u003E\u003C\u002Fa\u003E attributes on the \u003Ccode\u003E&lt;form&gt;\u003C\u002Fcode\u003E to control the router&#39;s behaviour.\u003C\u002Fp\u003E\n\u003Ch2 id=\"further-reading\"\u003EFurther reading\u003Ca href=\"#further-reading\" class=\"permalink\"\u003E\u003Cspan class=\"visually-hidden\"\u003Epermalink\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fh2\u003E\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Flearn.svelte.dev\u002Ftutorial\u002Fthe-form-element\"\u003ETutorial: Forms\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n",sections:[{title:"Default actions",slug:"default-actions",sections:[]},{title:"Named actions",slug:"named-actions",sections:[]},{title:"Anatomy of an action",slug:"anatomy-of-an-action",sections:[{title:"Validation errors",slug:"anatomy-of-an-action-validation-errors"},{title:"Redirects",slug:"anatomy-of-an-action-redirects"}]},{title:"Loading data",slug:"loading-data",sections:[]},{title:"Progressive enhancement",slug:"progressive-enhancement",sections:[{title:"use:enhance",slug:"progressive-enhancement-use-enhance"},{title:"applyAction",slug:"progressive-enhancement-applyaction"},{title:"Custom event listener",slug:"progressive-enhancement-custom-event-listener"}]},{title:"Alternatives",slug:"alternatives",sections:[]},{title:"GET vs POST",slug:"get-vs-post",sections:[]},{title:"Further reading",slug:"further-reading",sections:[]}]}},"uses":{"params":["slug"]}}];

					Promise.all([
						import("../_app/immutable/entry/start.bc2154d3.js"),
						import("../_app/immutable/entry/app.6b34a82d.js")
					]).then(([kit, app]) => {
						kit.start(app, __sveltekit_duwvm8.element, {
							node_ids: [0, 2, 5],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
